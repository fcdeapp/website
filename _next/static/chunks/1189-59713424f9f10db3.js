(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1189],{13073:(e,a,r)=>{"use strict";r.d(a,{A:()=>m});var n=r(95155),s=r(12115),t=r(23464),i=r(91218),c=r(35695),o=r(29017),d=r(32649),l=r(81300),u=r.n(l);let m=e=>{let{buddyPhoto:a,buddyPhotoMedium:r,buddyPhotoThumbnail:l,buddyGroupName:m,activityCountry:h,description:g,members:f,userId:p,buddyGroupId:y}=e,{SERVER_URL:_}={SERVER_URL:"https://fcde.app"},{t:I}=(0,i.Bd)(),j=(0,c.useRouter)(),[x,b]=(0,s.useState)(!1),v=null==f?void 0:f.some(e=>e.userId===p),S=async e=>{try{let a=await t.A.post("".concat(_,"/buddy-groups/remove"),{buddyGroupId:e},{headers:{"Content-Type":"application/json"}});200===a.status?alert(I("buddySearch.removeBuddySuccess")):alert(I("buddySearch.removeBuddyError"))}catch(e){console.error("Error removing buddy group:",e),alert(I("buddySearch.removeBuddyError"))}},N=async e=>{try{let a=await t.A.post("".concat(_,"/buddy-groups/join-request"),{buddyGroupId:e},{headers:{"Content-Type":"application/json"}});200===a.status?alert(I("buddySearch.joinRequestSuccess")):alert(I("buddySearch.joinRequestError"))}catch(e){console.error("Error sending join request:",e),alert(I("buddySearch.joinRequestError"))}};return(0,n.jsxs)("div",{className:u().buddySearchItem,children:[(0,n.jsxs)("div",{className:u().buddyInfoContainer,children:[(0,n.jsx)(o.A,{buddyGroupId:y,buddyPhoto:a,buddyPhotoMedium:r,buddyPhotoThumbnail:l,activityCountry:h||"",size:60}),(0,n.jsxs)("div",{className:u().buddyInfoTextContainer,children:[(0,n.jsx)("p",{className:u().buddyGroupName,children:m}),(0,n.jsx)("p",{className:u().buddyGroupDescription,children:g||I("buddySearch.descriptionDefault")}),(0,n.jsx)("p",{className:u().memberCountText,children:I("buddySearch.memberCount",{count:(null==f?void 0:f.length)||0})})]})]}),(0,n.jsx)("div",{className:u().memberListContainer,children:null==f?void 0:f.map(e=>(0,n.jsxs)("div",{className:u().memberProfileContainer,children:[(0,n.jsx)(d.A,{userId:e.userId,nickname:e.nickname,profileImage:e.profileImage,size:40}),(0,n.jsx)("p",{className:u().memberNickname,children:e.nickname})]},e.userId))}),(0,n.jsx)("button",{className:x?u().removeBuddyButton:v?u().buddyPageButton:u().joinRequestButton,onClick:()=>{x?S(y):v?j.push("/buddy?buddyGroupId=".concat(y)):N(y)},onContextMenu:e=>{e.preventDefault(),b(e=>!e)},children:x?I("buddySearch.removeBuddy"):v?I("buddySearch.navigateToBuddy"):I("buddySearch.joinRequest")})]})}},27714:e=>{e.exports={friendItem:"FriendSearchItem_friendItem__AEsee",rowContainer:"FriendSearchItem_rowContainer__V_9V_",nickname:"FriendSearchItem_nickname__n616J",expandedContent:"FriendSearchItem_expandedContent__d9pLW",infoGrid:"FriendSearchItem_infoGrid__U_TDZ",infoBlock:"FriendSearchItem_infoBlock__G95sJ",sectionTitle:"FriendSearchItem_sectionTitle__WBFf_",infoRow:"FriendSearchItem_infoRow__IUY_r",flagIcon:"FriendSearchItem_flagIcon__7UCYU",infoText:"FriendSearchItem_infoText__57tMV",languageList:"FriendSearchItem_languageList__s32uP",languageItem:"FriendSearchItem_languageItem__pRdnT",buttonRow:"FriendSearchItem_buttonRow__tQ4WX",button:"FriendSearchItem_button__8qUnt",pendingRequestText:"FriendSearchItem_pendingRequestText__WgEz4",mapImageContainer:"FriendSearchItem_mapImageContainer__jhvEh",mapImage:"FriendSearchItem_mapImage__Yoq1l",formContainer:"FriendSearchItem_formContainer__B6KXz",input:"FriendSearchItem_input__8qOH3",picker:"FriendSearchItem_picker__g56aK",confirmButton:"FriendSearchItem_confirmButton__1IKNP",deactivateButton:"FriendSearchItem_deactivateButton__OevpH",reactivateButton:"FriendSearchItem_reactivateButton__T3Nd8"}},29017:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var n=r(95155);r(12115);var s=r(35695),t=r(91218),i=r(89760),c=r(7926),o=r(50246),d=r.n(o);let l=e=>{var a;let{buddyGroupId:r,buddyPhoto:o,buddyPhotoMedium:l,buddyPhotoThumbnail:u,activityCountry:m,size:h}=e,{SERVER_URL:g}=(0,i.U)(),{t:f}=(0,t.Bd)(),p=(0,s.useRouter)(),y=null===(a=c.X.find(e=>e.name===m))||void 0===a?void 0:a.flag;return(0,n.jsxs)("div",{onClick:()=>{p.push("/buddyInfo?buddyGroupId=".concat(r))},className:d().container,style:{width:h,height:h},children:[(0,n.jsx)("img",{src:u||l||o||"/assets/buddyDefault.png",alt:"Profile",className:d().profileImage,style:{width:h,height:h,borderRadius:h/2}}),y&&(0,n.jsx)("div",{className:d().flagWrapper,style:{width:h/3+4,height:h/3+4,borderRadius:h/6+2},children:(0,n.jsx)("img",{src:y,alt:"Flag",className:d().flagImage,style:{width:h/3,height:h/3,borderRadius:h/6}})})]})}},48335:(e,a,r)=>{"use strict";r.d(a,{A:()=>n});let n={en:"/assets/flags/uk-flag.png",es:"/assets/flags/spain-flag.png",zh:"/assets/flags/china-flag.png",hi:"/assets/flags/india-flag.png",fr:"/assets/flags/france-flag.png",ko:"/assets/flags/south-korea-flag.png",ja:"/assets/flags/japan-flag.png",de:"/assets/flags/germany-flag.png",ar:"/assets/flags/saudi-arabia-flag.png",pt:"/assets/flags/portugal-flag.png",ru:"/assets/flags/russia-flag.png",it:"/assets/flags/italy-flag.png",tr:"/assets/flags/turkey-flag.png",nl:"/assets/flags/netherlands-flag.png",pl:"/assets/flags/poland-flag.png",th:"/assets/flags/thailand-flag.png",vi:"/assets/flags/vietnam-flag.png",ms:"/assets/flags/malaysia-flag.png",sv:"/assets/flags/sweden-flag.png",no:"/assets/flags/norway-flag.png",fi:"/assets/flags/finland-flag.png",el:"/assets/flags/greece-flag.png",hu:"/assets/flags/hungary-flag.png",cs:"/assets/flags/czech-republic-flag.png",ro:"/assets/flags/romania-flag.png",da:"/assets/flags/denmark-flag.png",he:"/assets/flags/israel-flag.png",id:"/assets/flags/indonesia-flag.png",uk:"/assets/flags/ukraine-flag.png",fa:"/assets/flags/iran-flag.png",bn:"/assets/flags/bangladesh-flag.png"}},50246:e=>{e.exports={container:"BuddyProfileWithFlag_container__A1ueJ",profileImage:"BuddyProfileWithFlag_profileImage__prUCO",flagWrapper:"BuddyProfileWithFlag_flagWrapper__UMv1Y",flagImage:"BuddyProfileWithFlag_flagImage__yXy_D"}},81300:e=>{e.exports={buddySearchItem:"BuddySearchItem_buddySearchItem__r4hP9",buddyInfoContainer:"BuddySearchItem_buddyInfoContainer__Q1Iiq",buddyInfoTextContainer:"BuddySearchItem_buddyInfoTextContainer__bEH_z",buddyGroupName:"BuddySearchItem_buddyGroupName___2IDU",buddyGroupDescription:"BuddySearchItem_buddyGroupDescription__7VMdk",memberCountText:"BuddySearchItem_memberCountText__sTZ82",memberListContainer:"BuddySearchItem_memberListContainer__D4RfG",memberProfileContainer:"BuddySearchItem_memberProfileContainer__4hvBg",memberNickname:"BuddySearchItem_memberNickname__wMNtw",joinRequestButton:"BuddySearchItem_joinRequestButton__Po_y5",buddyPageButton:"BuddySearchItem_buddyPageButton__rnn6a",removeBuddyButton:"BuddySearchItem_removeBuddyButton__iswtc"}},92037:(e,a,r)=>{"use strict";r.d(a,{A:()=>f});var n=r(95155),s=r(12115),t=r(23464),i=r(89760),c=r(91218),o=r(35695),d=r(32649),l=r(27714),u=r.n(l),m=r(73625),h=r(48335);let g="/assets/buddyDefault.png",f=e=>{let{friend:a,userId:r,isFriend:l,hasSentRequest:f,hasReceivedRequest:p,buddyGroupId:y}=e,{SERVER_URL:_}=(0,i.U)(),{t:I}=(0,c.Bd)(),j=(0,o.useRouter)(),[x,b]=(0,s.useState)(!1),[v,S]=(0,s.useState)(!1),[N,C]=(0,s.useState)(!1),[k,B]=(0,s.useState)({}),[w,R]=(0,s.useState)(!1),[T,F]=(0,s.useState)(a.isDeactivated||!1),[q,E]=(0,s.useState)(!1),[A,D]=(0,s.useState)(""),[P,U]=(0,s.useState)(null),G=async e=>{try{let a=await t.A.get("".concat(_,"/users/members/").concat(e));a.data&&B(a.data)}catch(e){console.error("Error fetching member details:",e)}},L=()=>{R(e=>!e)},W=async()=>{try{let e=await t.A.post("".concat(_,"/chats/one-on-one"),{friendId:a.userId});e.data&&e.data.chatRoomId?j.push("/chat?chatRoomId=".concat(e.data.chatRoomId,"&otherUserId=").concat(a.userId,"&nickname=").concat(a.nickname)):alert("Failed to retrieve or create a chat room.")}catch(e){console.error("Error handling chat:",e),alert("An error occurred while trying to open the chat.")}},M=async()=>{if(!r||!a.userId){alert("User information is missing.");return}try{let e=await t.A.post("".concat(_,"/friend/friend-request"),{senderId:r,receiverId:a.userId},{headers:{"Content-Type":"application/json"}});200===e.status?alert(I("friendSearch.friendRequestSuccess")):alert("Error: "+e.data.message)}catch(e){console.error("Error sending friend request:",e),alert(I("friendSearch.friendRequestError"))}},z=async()=>{if(!r||!a.userId){alert("User information is missing.");return}try{let e=await t.A.post("".concat(_,"/friend/friend-request/cancel"),{senderId:r,receiverId:a.userId},{headers:{"Content-Type":"application/json"}});200===e.status?alert(I("friendSearch.cancelRequestSuccess")):alert(I("friendSearch.cancelRequestError")+" "+e.data.message)}catch(e){console.error("Error cancelling friend request:",e),alert(I("friendSearch.cancelRequestError"))}},J=async()=>{try{let e=await t.A.post("".concat(_,"/friend/friend-request/accept"),{receiverId:r,senderId:a.userId,accept:!0},{headers:{"Content-Type":"application/json"}});200===e.status?alert(I("friendSearch.acceptRequestSuccess")):alert(I("friendSearch.acceptRequestError")+" "+e.data.message)}catch(e){console.error("Error accepting friend request:",e),alert(I("friendSearch.acceptRequestError"))}},V=async()=>{try{let e=await t.A.post("".concat(_,"/friend/remove"),{userId:r,friendId:a.userId},{headers:{"Content-Type":"application/json"}});200===e.status?alert(I("friendSearch.removeFriendSuccess")):alert("Error: "+e.data.message)}catch(e){console.error("Error removing friend:",e),alert(I("friendSearch.removeFriendError"))}},X=async()=>{if(y)try{await t.A.post("".concat(_,"/buddy-groups/join-request/accept"),{buddyGroupId:y,userId:a.userId}),alert(I("friendSearch.joinAcceptSuccess"))}catch(e){console.error("Error accepting join request:",e),alert(I("friendSearch.joinAcceptError"))}},Y=async()=>{if(y)try{await t.A.post("".concat(_,"/buddy-groups/join-request/reject"),{buddyGroupId:y,userId:a.userId}),alert(I("friendSearch.joinRejectSuccess"))}catch(e){console.error("Error rejecting join request:",e),alert(I("friendSearch.joinRejectError"))}},H=async()=>{try{let e=await t.A.post("".concat(_,"/api/admin/users/reactivate"),{userId:a.userId});200===e.status?(alert(I("friendSearch.reactivateUser")),O()):alert("Failed to reactivate user account.")}catch(e){console.error("Error reactivating user:",e),alert("An error occurred while reactivating the account.")}},K=async()=>{try{let e=await t.A.post("".concat(_,"/api/admin/users/deactivate"),{userId:a.userId,reason:A,durationInDays:P});200===e.status?(alert(I("friendSearch.deactivateUserSuccess")),O()):alert("Failed to deactivate user account."),E(!1)}catch(e){console.error("Error deactivating user:",e),alert("An error occurred while deactivating the account.")}},O=async()=>{try{let e=await t.A.get("".concat(_,"/users/members/").concat(a.userId));e.data&&(F(e.data.isDeactivated),B(e.data))}catch(e){console.error("Error refreshing user status:",e)}};return(0,s.useEffect)(()=>{(async()=>{try{let e=await t.A.get("".concat(_,"/users/me"));e.data&&b(e.data.isAdmin)}catch(e){console.error("Error checking admin status:",e)}})()},[_]),(0,n.jsxs)("div",{className:u().friendItem,onContextMenu:e=>{e.preventDefault(),C(e=>!e)},children:[(0,n.jsxs)("div",{className:u().rowContainer,onClick:()=>{S(e=>!e),v||G(a.userId)},children:[(0,n.jsx)(d.A,{userId:a.userId,nickname:a.nickname,profileImage:a.profileImage||void 0,profileThumbnail:a.profileThumbnail||void 0,countryName:a.originCountry||void 0,size:50}),(0,n.jsx)("span",{className:u().nickname,children:a.nickname||k.nickname})]}),v&&(0,n.jsxs)("div",{className:u().expandedContent,children:[(0,n.jsxs)("div",{className:u().infoGrid,children:[(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("origin_country")}),(0,n.jsxs)("div",{className:u().infoRow,children:[(0,n.jsx)("img",{src:k.originCountry?m.A[k.originCountry]:g,alt:k.originCountry||I("unknown"),className:u().flagIcon}),(0,n.jsx)("span",{className:u().infoText,children:k.originCountry||I("unknown")})]})]}),(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("main_language")}),(0,n.jsxs)("div",{className:u().infoRow,children:[(0,n.jsx)("img",{src:k.mainLanguage?h.A[k.mainLanguage]:g,alt:k.mainLanguage||I("unknown"),className:u().flagIcon}),(0,n.jsx)("span",{className:u().infoText,children:k.mainLanguage||I("unknown")})]})]})]}),(0,n.jsxs)("div",{className:u().infoGrid,children:[(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("learning_languages")}),(0,n.jsx)("div",{className:u().languageList,children:k.learningLanguage&&k.learningLanguage.length>0?k.learningLanguage.map(e=>(0,n.jsxs)("div",{className:u().languageItem,children:[(0,n.jsx)("img",{src:e?h.A[e]:g,alt:e,className:u().flagIcon}),(0,n.jsx)("span",{className:u().infoText,children:e})]},e)):(0,n.jsx)("span",{className:u().infoText,children:I("none")})})]}),(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,onClick:L,style:{cursor:"pointer"},children:I("current_country")}),(0,n.jsxs)("div",{className:u().infoRow,children:[(0,n.jsx)("img",{src:k.currentCountry?m.A[k.currentCountry]:g,alt:k.currentCountry||I("unknown"),className:u().flagIcon}),(0,n.jsx)("span",{className:u().infoText,children:k.currentCountry||I("unknown")})]})]})]}),(0,n.jsxs)("div",{className:u().infoGrid,children:[(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,onClick:L,style:{cursor:"pointer"},children:I("current_city")}),(0,n.jsx)("span",{className:u().infoText,children:k.currentCity||I("unknown")})]}),(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("profile.hobbies")}),(0,n.jsx)("span",{className:u().infoText,children:k.hobbies&&k.hobbies.length>0?k.hobbies.join(", "):I("profile.info_none")})]})]}),(0,n.jsxs)("div",{className:u().infoGrid,children:[(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("profile.skills")}),(0,n.jsx)("span",{className:u().infoText,children:k.skills&&k.skills.length>0?k.skills.join(", "):I("profile.info_none")})]}),(0,n.jsxs)("div",{className:u().infoBlock,children:[(0,n.jsx)("span",{className:u().sectionTitle,children:I("description")}),(0,n.jsx)("span",{className:u().infoText,children:k.description||I("none")})]})]}),w&&k.locationMapImage&&(0,n.jsx)("div",{className:u().mapImageContainer,children:(0,n.jsx)("img",{src:k.locationMapImage,alt:"Map",className:u().mapImage})}),(0,n.jsx)("div",{className:u().buttonRow,children:y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:u().button,onClick:X,children:I("friendSearch.acceptJoin")}),(0,n.jsx)("button",{className:u().button,onClick:Y,children:I("friendSearch.rejectJoin")})]}):(0,n.jsx)(n.Fragment,{children:l?N?(0,n.jsx)("button",{className:u().button,onClick:V,children:I("friendSearch.removeFriend")}):(0,n.jsx)("button",{className:u().button,onClick:W,children:I("friendSearch.chat")}):p?(0,n.jsx)("button",{className:u().button,onClick:J,children:I("friendSearch.acceptFriendRequest")}):f?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:u().pendingRequestText,children:I("friendSearch.pendingFriendRequest")}),(0,n.jsx)("button",{className:u().button,onClick:z,children:I("friendSearch.cancelFriendRequest")})]}):(0,n.jsx)("button",{className:u().button,onClick:M,children:I("friendSearch.sendFriendRequest")})})}),x&&(T?(0,n.jsx)("button",{className:u().reactivateButton,onClick:H,children:I("friendSearch.reactivateUser")}):(0,n.jsx)("button",{className:u().deactivateButton,onClick:()=>E(!q),children:I("friendSearch.deactivateUser")})),q&&(0,n.jsxs)("div",{className:u().formContainer,children:[(0,n.jsx)("input",{type:"text",className:u().input,placeholder:"Enter reason for deactivation",value:A,onChange:e=>D(e.target.value)}),(0,n.jsxs)("select",{className:u().picker,value:null!==P?P:"",onChange:e=>U(e.target.value?Number(e.target.value):null),children:[(0,n.jsx)("option",{value:"",children:"Select duration"}),(0,n.jsx)("option",{value:1,children:"1 Day"}),(0,n.jsx)("option",{value:7,children:"7 Days"}),(0,n.jsx)("option",{value:30,children:"30 Days"}),(0,n.jsx)("option",{value:"",children:"Permanent"})]}),(0,n.jsx)("button",{className:u().confirmButton,onClick:K,children:I("friendSearch.confirmDeactivation")})]})]})]})}}}]);