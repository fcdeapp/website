(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9545],{57047:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>o});var n=l(95155),r=l(12115),t=l(61065),s=l(59455),i=l.n(s);function o(){let{SERVER_URL:e}=(0,t.U)(),[a,l]=(0,r.useState)(null),[s,o]=(0,r.useState)(null),[c,_]=(0,r.useState)(null),[d,y]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{s&&URL.revokeObjectURL(s)},[s]);let h=async()=>{if(!a){m("Please select an image.");return}m(null),y(!0),_(null);try{var l,n;let r=new FormData;r.append("profileImage",a);let t=await fetch("".concat(e,"/api/userAnalysis/analyze-user-image-only"),{method:"POST",body:r});if(!t.ok){let e=await t.text();throw Error(e||t.statusText)}let s=await t.json(),i=null!==(n=null===(l=s.analysis)||void 0===l?void 0:l.results)&&void 0!==n?n:s.analysis;if(!Array.isArray(i))throw console.error("Unexpected analysis payload:",s.analysis),Error("Invalid analysis format received");_(i)}catch(e){console.error(e),m("Analysis failed. Please try again.")}finally{y(!1)}},v=()=>_(null);return(0,n.jsxs)("div",{className:i().container,children:[(0,n.jsx)("h1",{className:i().title,children:"Analyze Profile Image"}),(0,n.jsxs)("div",{className:i().form,children:[(0,n.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:e=>{var a;let n=null===(a=e.target.files)||void 0===a?void 0:a[0];n&&(l(n),o(URL.createObjectURL(n)),_(null),m(null))},className:i().fileInput}),(0,n.jsx)("div",{className:i().previewContainer,onClick:()=>{var e;null===(e=p.current)||void 0===e||e.click()},title:"Click to select or change image",children:s?(0,n.jsx)("img",{src:s,alt:"Preview",className:i().previewImage}):(0,n.jsx)("div",{className:i().previewPlaceholder,children:"Click to choose an image"})}),(0,n.jsx)("button",{onClick:h,disabled:d,className:i().analyzeButton,children:d?"Analyzingâ€¦":"Analyze"}),u&&(0,n.jsx)("p",{className:i().error,children:u})]}),c&&(0,n.jsx)("div",{className:i().backdrop,onClick:v,children:(0,n.jsxs)("div",{className:i().modal,onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{className:i().modalTitle,children:"Popularity Prediction"}),(0,n.jsx)("div",{className:i().modalBody,children:c.map((e,a)=>(0,n.jsxs)("div",{className:i().row,children:[(0,n.jsx)("span",{className:i().country,children:e.country}),(0,n.jsx)("div",{className:i().barBg,children:(0,n.jsx)("div",{className:i().barFill,style:{width:"".concat(e.percentage,"%")}})}),(0,n.jsxs)("span",{className:i().pct,children:[e.percentage,"%"]}),(0,n.jsx)("p",{className:i().reason,children:e.reason})]},a))}),(0,n.jsxs)("div",{className:i().btnRow,children:[(0,n.jsx)("button",{onClick:()=>{if(!c)return;let e=JSON.stringify(c,null,2);navigator.share?navigator.share({title:"Abrody Popularity Analysis",text:e}):(navigator.clipboard.writeText(e),alert("Results copied to clipboard."))},className:"".concat(i().btn," ").concat(i().btnPrimary),children:"Share"}),(0,n.jsx)("button",{onClick:v,className:"".concat(i().btn," ").concat(i().btnSecondary),children:"Close"})]})]})})]})}},58244:(e,a,l)=>{Promise.resolve().then(l.bind(l,57047))},59455:e=>{e.exports={container:"Analyze_container__q025C",title:"Analyze_title__Tw4VM",form:"Analyze_form__UixZN",fileInput:"Analyze_fileInput__DO90X",previewContainer:"Analyze_previewContainer__fnBOc",previewPlaceholder:"Analyze_previewPlaceholder__P5V1V",previewImage:"Analyze_previewImage__ZhWkm",analyzeButton:"Analyze_analyzeButton__dErcp",error:"Analyze_error__BNb8R",backdrop:"Analyze_backdrop__tkCKk",fadeIn:"Analyze_fadeIn__l7v5m",modal:"Analyze_modal__GCfX8",scaleUp:"Analyze_scaleUp__weEHD",modalTitle:"Analyze_modalTitle__awOa5",modalBody:"Analyze_modalBody__vQmWA",row:"Analyze_row__ODMam",country:"Analyze_country__9grtz",barBg:"Analyze_barBg__t5k8K",barFill:"Analyze_barFill__KRyg6",pct:"Analyze_pct__RPj2V",reason:"Analyze_reason__G9Vl4",btnRow:"Analyze_btnRow__rVpkN",btn:"Analyze_btn__Ks4TP",btnPrimary:"Analyze_btnPrimary__yLj8m",btnSecondary:"Analyze_btnSecondary__BQVzf"}},61065:(e,a,l)=>{"use strict";l.d(a,{s:()=>o,U:()=>c});var n=l(95155),r=l(12115);let t=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),s={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let a=navigator.language.split("-");a.length>1&&(e=a[1])}let a="";switch(e.toUpperCase()){case"CA":a="ca.";break;case"AU":a="au.";break;case"GB":a="uk.";break;default:a=""}return console.log("domainPrefix: ",a),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:t.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:t.SC,FACEBOOK_BANNER_PLACEMENT_ID:t.O8},i=(0,r.createContext)(null),o=e=>{let{children:a}=e;return(0,n.jsx)(i.Provider,{value:s,children:a})},c=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[2956,8441,1684,7358],()=>a(58244)),_N_E=e.O()}]);