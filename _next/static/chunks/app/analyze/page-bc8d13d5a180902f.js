(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9545],{57047:(a,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>i});var n=l(95155),t=l(12115),s=l(59455),r=l.n(s);function i(){let[a,e]=(0,t.useState)(null),[l,s]=(0,t.useState)(null),[i,o]=(0,t.useState)(!1),[c,_]=(0,t.useState)(null),d=(0,t.useRef)(null),y=async()=>{if(!a){_("Please select an image.");return}_(null),o(!0),s(null);try{var e;let l=new FormData;l.append("profileImage",a);let n=await fetch("/api/userAnalysis/analyze-user-image-only",{method:"POST",body:l});if(!n.ok){let a=await n.text();throw Error(a||n.statusText)}let t=await n.json(),r=null!==(e=t.analysis.results)&&void 0!==e?e:t.analysis;s(r)}catch(a){console.error(a),_("Analysis failed. Please try again.")}finally{o(!1)}},m=()=>{s(null)};return(0,n.jsxs)("div",{className:r().container,children:[(0,n.jsx)("h1",{className:r().title,children:"Analyze Profile Image"}),(0,n.jsxs)("div",{className:r().form,children:[(0,n.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:a=>{var l;(null===(l=a.target.files)||void 0===l?void 0:l[0])&&e(a.target.files[0])},className:r().fileInput}),(0,n.jsx)("button",{onClick:y,disabled:i,className:r().analyzeButton,children:i?"Analyzingâ€¦":"Analyze"}),c&&(0,n.jsx)("p",{className:r().error,children:c})]}),l&&(0,n.jsx)("div",{className:r().backdrop,onClick:m,children:(0,n.jsxs)("div",{className:r().modal,onClick:a=>a.stopPropagation(),children:[(0,n.jsx)("h2",{className:r().modalTitle,children:"Popularity Prediction"}),(0,n.jsx)("div",{className:r().modalBody,children:l.map((a,e)=>(0,n.jsxs)("div",{className:r().row,children:[(0,n.jsx)("span",{className:r().country,children:a.country}),(0,n.jsx)("div",{className:r().barBg,children:(0,n.jsx)("div",{className:r().barFill,style:{width:"".concat(a.percentage,"%")}})}),(0,n.jsxs)("span",{className:r().pct,children:[a.percentage,"%"]}),(0,n.jsx)("p",{className:r().reason,children:a.reason})]},e))}),(0,n.jsxs)("div",{className:r().btnRow,children:[(0,n.jsx)("button",{onClick:()=>{if(!l)return;let a=JSON.stringify(l,null,2);navigator.share?navigator.share({title:"Abrody Popularity Analysis",text:a}):(navigator.clipboard.writeText(a),alert("Results copied to clipboard."))},className:"".concat(r().btn," ").concat(r().btnPrimary),children:"Share"}),(0,n.jsx)("button",{onClick:m,className:"".concat(r().btn," ").concat(r().btnSecondary),children:"Close"})]})]})})]})}},58244:(a,e,l)=>{Promise.resolve().then(l.bind(l,57047))},59455:a=>{a.exports={container:"Analyze_container__q025C",title:"Analyze_title__Tw4VM",form:"Analyze_form__UixZN",analyzeButton:"Analyze_analyzeButton__dErcp",error:"Analyze_error__BNb8R",backdrop:"Analyze_backdrop__tkCKk",modal:"Analyze_modal__GCfX8",scaleUp:"Analyze_scaleUp__weEHD",modalTitle:"Analyze_modalTitle__awOa5",modalBody:"Analyze_modalBody__vQmWA",row:"Analyze_row__ODMam",country:"Analyze_country__9grtz",barBg:"Analyze_barBg__t5k8K",barFill:"Analyze_barFill__KRyg6",pct:"Analyze_pct__RPj2V",reason:"Analyze_reason__G9Vl4",btnRow:"Analyze_btnRow__rVpkN",btn:"Analyze_btn__Ks4TP",btnPrimary:"Analyze_btnPrimary__yLj8m",btnSecondary:"Analyze_btnSecondary__BQVzf"}}},a=>{var e=e=>a(a.s=e);a.O(0,[2956,8441,1684,7358],()=>e(58244)),_N_E=a.O()}]);