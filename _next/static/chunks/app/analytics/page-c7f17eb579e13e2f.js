(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{18495:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(95155),i=t(12115),r=t(23464),l=t(32502),n=t(64065),d=t(61065),c=t(97896),o=t.n(c);l.t1.register(l.PP,l.kc,l.FN,l.No,l.hE,l.m_,l.s$);let h=["ap-northeast-2","ap-southeast-2","ca-central-1","eu-west-2"];function p(){let{SERVER_URL:e}=(0,d.U)(),[a,t]=(0,i.useState)(h[0]),[l,c]=(0,i.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString().slice(0,10)}),[p,u]=(0,i.useState)(new Date().toISOString().slice(0,10)),[A,m]=(0,i.useState)([]),[x,_]=(0,i.useState)(!1),[g,v]=(0,i.useState)("");(0,i.useEffect)(()=>{a&&l&&p&&(_(!0),v(""),r.A.get("".concat(e,"/api/admin/analytics/range?region=").concat(a,"&start=").concat(l,"&end=").concat(p),{withCredentials:!0}).then(e=>m(e.data.analytics)).catch(e=>{console.error(e),v("데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>_(!1)))},[e,a,l,p]);let j=A.map(e=>e.date.slice(0,10)),C=(e,a,t)=>({label:e,data:a,borderColor:t,backgroundColor:"transparent",tension:.3});return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)("h1",{className:o().header,children:"\uD83D\uDCCA User Analytics Dashboard"}),(0,s.jsxs)("div",{className:o().filters,children:[(0,s.jsxs)("div",{className:o().filterItem,children:[(0,s.jsx)("label",{children:"Region"}),(0,s.jsx)("select",{value:a,onChange:e=>t(e.target.value),children:h.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:o().filterItem,children:[(0,s.jsx)("label",{children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value)})]}),(0,s.jsxs)("div",{className:o().filterItem,children:[(0,s.jsx)("label",{children:"End Date"}),(0,s.jsx)("input",{type:"date",value:p,onChange:e=>u(e.target.value)})]})]}),x?(0,s.jsx)("div",{className:o().loader,children:"Loading analytics…"}):g?(0,s.jsx)("div",{className:o().error,children:g}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().tableWrapper,children:(0,s.jsxs)("table",{className:o().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Total Users"}),(0,s.jsx)("th",{children:"Email Opt‑Ins"}),(0,s.jsx)("th",{children:"Daily Active"}),(0,s.jsx)("th",{children:"Avg App Load"}),(0,s.jsx)("th",{children:"Avg Map Search"}),(0,s.jsx)("th",{children:"Avg AI Posts"})]})}),(0,s.jsx)("tbody",{children:A.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsx)("td",{children:e.totalUsers}),(0,s.jsx)("td",{children:e.emailOptInUsers}),(0,s.jsx)("td",{children:e.dailyActiveUsers}),(0,s.jsx)("td",{children:e.avgAppLoadCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgMapSearchCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgAiPostCount.toFixed(1)})]},e.date))})]})}),(0,s.jsxs)("div",{className:o().chartGrid,children:[(0,s.jsxs)("div",{className:o().chartCard,children:[(0,s.jsx)("h3",{children:"Total vs Daily Active Users"}),(0,s.jsx)(n.N1,{data:{labels:j,datasets:[C("Total Users",A.map(e=>e.totalUsers),"#6C63FF"),C("Daily Active",A.map(e=>e.dailyActiveUsers),"#FF6B6B")]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})]}),(0,s.jsxs)("div",{className:o().chartCard,children:[(0,s.jsx)("h3",{children:"Average Usage Counts"}),(0,s.jsx)(n.N1,{data:{labels:j,datasets:[C("App Load",A.map(e=>e.avgAppLoadCount),"#1A1045"),C("Map Search",A.map(e=>e.avgMapSearchCount),"#6C63FF"),C("AI Posts",A.map(e=>e.avgAiPostCount),"#FF6B6B")]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})]}),(0,s.jsxs)("div",{className:o().chartCardFull,children:[(0,s.jsx)("h3",{children:"Feature Ratios (%)"}),(0,s.jsx)(n.N1,{data:{labels:j,datasets:[C("Trust Badge",A.map(e=>100*e.trustBadgeRatio),"#6C63FF"),C("Push Notif",A.map(e=>100*e.pushNotificationEnabledRatio),"#FF6B6B"),C("New Msg",A.map(e=>100*e.newMessageEnabledRatio),"#1A1045"),C("Email Verified",A.map(e=>100*e.isEmailVerifiedRatio),"#00A86B")]},options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{ticks:{callback:e=>"".concat(e,"%")}}}}})]})]})]})]})}},24592:(e,a,t)=>{Promise.resolve().then(t.bind(t,18495))},61065:(e,a,t)=>{"use strict";t.d(a,{s:()=>d,U:()=>c});var s=t(95155),i=t(12115);let r=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),l={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let a=navigator.language.split("-");a.length>1&&(e=a[1])}let a="";switch(e.toUpperCase()){case"CA":a="ca.";break;case"AU":a="au.";break;case"GB":a="uk.";break;default:a=""}return console.log("domainPrefix: ",a),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:r.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:r.SC,FACEBOOK_BANNER_PLACEMENT_ID:r.O8},n=(0,i.createContext)(null),d=e=>{let{children:a}=e;return(0,s.jsx)(n.Provider,{value:l,children:a})},c=()=>{let e=(0,i.useContext)(n);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},97896:e=>{e.exports={container:"AdminAnalytics_container__y3TFA",header:"AdminAnalytics_header__klgLW",filters:"AdminAnalytics_filters__IKIEe",filterItem:"AdminAnalytics_filterItem__U9vOL",loader:"AdminAnalytics_loader__1RdUt",error:"AdminAnalytics_error__qSNei",tableWrapper:"AdminAnalytics_tableWrapper__ojxNR",table:"AdminAnalytics_table__bGqPw",chartGrid:"AdminAnalytics_chartGrid__HogRT",chartCard:"AdminAnalytics_chartCard__SNtNQ",chartCardFull:"AdminAnalytics_chartCardFull__BqDO9"}}},e=>{var a=a=>e(e.s=a);e.O(0,[3163,5647,3464,6693,8441,1684,7358],()=>a(24592)),_N_E=e.O()}]);