(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{18495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(95155),s=a(12115),r=a(23464),l=a(32502),i=a(64065),o=a(89760),c=a(97896),d=a.n(c);l.t1.register(l.PP,l.kc,l.FN,l.No,l.hE,l.m_,l.s$);let h=[{label:"All Regions",value:"all"},{label:"ap-northeast-2",value:"ap-northeast-2"},{label:"ap-southeast-2",value:"ap-southeast-2"},{label:"ca-central-1",value:"ca-central-1"},{label:"eu-west-2",value:"eu-west-2"}];function u(){let{SERVER_URL:e}=(0,o.U)(),[t,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)("all"),[u,p]=(0,s.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString().slice(0,10)}),[_,A]=(0,s.useState)(new Date().toISOString().slice(0,10)),[E,b]=(0,s.useState)([]),[x,j]=(0,s.useState)([]),[C,g]=(0,s.useState)(!1),[m,N]=(0,s.useState)("");if((0,s.useEffect)(()=>{u&&_&&(g(!0),N(""),"all"===l?r.A.get("".concat(e,"/api/admin/analytics/all/range?start=").concat(u,"&end=").concat(_),{withCredentials:!0}).then(e=>{j(e.data.analytics),b([])}).catch(e=>{console.error(e),N("전체 리전 데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>g(!1)):r.A.get("".concat(e,"/api/admin/analytics/range?region=").concat(l,"&start=").concat(u,"&end=").concat(_),{withCredentials:!0}).then(e=>{b(e.data.analytics),j([])}).catch(e=>{console.error(e),N("데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>g(!1)))},[e,l,u,_]),(0,s.useEffect)(()=>{a(!0)},[]),!t)return(0,n.jsx)("div",{className:d().container,children:"Loading analytics…"});let v=(e,t)=>{let a=t.map(e=>e.date.slice(0,10)),s={labels:a,datasets:[{label:"Total Users",data:t.map(e=>e.totalUsers),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Daily Active",data:t.map(e=>e.dailyActiveUsers),borderColor:"#19857b",backgroundColor:"transparent",tension:.3}]},r={labels:a,datasets:[{label:"App Load",data:t.map(e=>e.avgAppLoadCount),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Map Search",data:t.map(e=>e.avgMapSearchCount),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"AI Posts",data:t.map(e=>e.avgAiPostCount),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Banner Ads",data:t.map(e=>e.avgBannerAdViewCount),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Interstitial Ads",data:t.map(e=>e.avgInterstitialAdViewCount),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Buddy Groups",data:t.map(e=>e.avgBuddyGroups),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]},l={labels:a,datasets:[{label:"Trust Badge",data:t.map(e=>100*e.trustBadgeRatio),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Push Notif",data:t.map(e=>100*e.pushNotificationEnabledRatio),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"New Msg",data:t.map(e=>100*e.newMessageEnabledRatio),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Account Public",data:t.map(e=>100*e.isAccountPublicRatio),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Email Verified",data:t.map(e=>100*e.isEmailVerifiedRatio),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Google Account",data:t.map(e=>100*e.isGoogleAccountRatio),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:d().regionHeader,children:e}),(0,n.jsxs)("section",{className:d().section,children:[(0,n.jsxs)("div",{className:d().tableWrapper,children:[(0,n.jsx)("h3",{className:d().sectionTitle,children:"Users & Daily Active"}),(0,n.jsxs)("table",{className:d().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"Total Users"}),(0,n.jsx)("th",{children:"Daily Active"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.date.slice(0,10)}),(0,n.jsx)("td",{children:e.totalUsers}),(0,n.jsx)("td",{children:e.dailyActiveUsers})]},e.date))})]})]}),(0,n.jsx)("div",{className:d().chartContainer,children:(0,n.jsx)(i.N1,{data:s,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,n.jsxs)("section",{className:d().section,children:[(0,n.jsxs)("div",{className:d().tableWrapper,children:[(0,n.jsx)("h3",{className:d().sectionTitle,children:"Usage Counts"}),(0,n.jsxs)("table",{className:d().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"App Load"}),(0,n.jsx)("th",{children:"Map Search"}),(0,n.jsx)("th",{children:"AI Posts"}),(0,n.jsx)("th",{children:"Banner Ads"}),(0,n.jsx)("th",{children:"Interstitial Ads"}),(0,n.jsx)("th",{children:"Buddy Groups"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.date.slice(0,10)}),(0,n.jsx)("td",{children:e.avgAppLoadCount.toFixed(1)}),(0,n.jsx)("td",{children:e.avgMapSearchCount.toFixed(1)}),(0,n.jsx)("td",{children:e.avgAiPostCount.toFixed(1)}),(0,n.jsx)("td",{children:e.avgBannerAdViewCount.toFixed(1)}),(0,n.jsx)("td",{children:e.avgInterstitialAdViewCount.toFixed(1)}),(0,n.jsx)("td",{children:e.avgBuddyGroups.toFixed(1)})]},e.date))})]})]}),(0,n.jsx)("div",{className:d().chartContainer,children:(0,n.jsx)(i.N1,{data:r,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,n.jsxs)("section",{className:d().section,children:[(0,n.jsxs)("div",{className:d().tableWrapper,children:[(0,n.jsx)("h3",{className:d().sectionTitle,children:"Feature Ratios (%)"}),(0,n.jsxs)("table",{className:d().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"Trust Badge"}),(0,n.jsx)("th",{children:"Push Notif"}),(0,n.jsx)("th",{children:"New Msg"}),(0,n.jsx)("th",{children:"Public Acc"}),(0,n.jsx)("th",{children:"Email Verified"}),(0,n.jsx)("th",{children:"Google Acc"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.date.slice(0,10)}),(0,n.jsxs)("td",{children:[(100*e.trustBadgeRatio).toFixed(1),"%"]}),(0,n.jsxs)("td",{children:[(100*e.pushNotificationEnabledRatio).toFixed(1),"%"]}),(0,n.jsxs)("td",{children:[(100*e.newMessageEnabledRatio).toFixed(1),"%"]}),(0,n.jsxs)("td",{children:[(100*e.isAccountPublicRatio).toFixed(1),"%"]}),(0,n.jsxs)("td",{children:[(100*e.isEmailVerifiedRatio).toFixed(1),"%"]}),(0,n.jsxs)("td",{children:[(100*e.isGoogleAccountRatio).toFixed(1),"%"]})]},e.date))})]})]}),(0,n.jsx)("div",{className:d().chartContainer,children:(0,n.jsx)(i.N1,{data:l,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>"".concat(e,"%")}}}}})})]})]},e)};return(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsx)("h1",{className:d().header,children:"\uD83D\uDCCA User Analytics Dashboard"}),(0,n.jsxs)("div",{className:d().toolbar,children:[(0,n.jsxs)("div",{className:d().filters,children:[(0,n.jsxs)("div",{className:d().filterItem,children:[(0,n.jsx)("label",{children:"Region"}),(0,n.jsx)("select",{value:l,onChange:e=>c(e.target.value),children:h.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{className:d().filterItem,children:[(0,n.jsx)("label",{children:"Start Date"}),(0,n.jsx)("input",{type:"date",value:u,onChange:e=>p(e.target.value)})]}),(0,n.jsxs)("div",{className:d().filterItem,children:[(0,n.jsx)("label",{children:"End Date"}),(0,n.jsx)("input",{type:"date",value:_,onChange:e=>A(e.target.value)})]})]}),"all"!==l&&(0,n.jsx)("button",{className:d().downloadButton,onClick:()=>{if(!E.length)return;let e="analytics_".concat(l,"_").concat(u,"_").concat(_,".json"),t=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=e,n.click(),URL.revokeObjectURL(a)},disabled:!E.length,children:"Download JSON"})]}),C?(0,n.jsx)("div",{className:d().loader,children:"Loading analytics…"}):m?(0,n.jsx)("div",{className:d().error,children:m}):"all"===l?x.map(e=>{let{region:t,analytics:a}=e;return v(t,a)}):v(l,E)]})}},24592:(e,t,a)=>{Promise.resolve().then(a.bind(a,18495))},89760:(e,t,a)=>{"use strict";a.d(t,{s:()=>u,U:()=>p});var n=a(95155),s=a(12115),r=a(49509);function l(e){switch(e.trim().toUpperCase()){case"BETA":return"https://beta.fcde.app";case"DEVELOPMENT":return"https://dev.fcde.app";case"CA":case"CANADA":return"https://ca.fcde.app";case"AU":case"AUSTRALIA":return"https://au.fcde.app";case"GB":case"UK":return"https://uk.fcde.app";case"KR":case"KOREA":return"https://kr.fcde.app";default:return"https://fcde.app"}}function i(){return"https://fcde.app"}async function o(e){try{return(await fetch("".concat(e,"/health"),{method:"GET"})).ok}catch(e){return!1}}async function c(){let e=null;try{let t=localStorage.getItem("selectedServer");t&&(e=t)}catch(e){}for(let t of(!e&&r.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER&&(e=r.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER),e||(e=function(){try{let e=localStorage.getItem("region");if(e)return e}catch(e){}if("undefined"!=typeof navigator&&navigator.language){let e=navigator.language.split("-");if(e.length>1)return e[1]}return"KR"}()),[e,"Beta","Development"])){let e=l(t);if(await o(e))return e}return l(e)}let d={SERVER_URL:i()||"https://www.fcde.app",APP_VERSION:r.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:r.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:r.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(r.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(r.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},h=(0,s.createContext)(null),u=e=>{let{children:t}=e,[a,r]=(0,s.useState)(i());(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await c();e&&r(t)}catch(e){}})(),()=>{e=!1}},[]);let l={SERVER_URL:a,APP_VERSION:d.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:d.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:d.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:d.FEATURE_UNDER_DEV,TEST_AD_MODE:d.TEST_AD_MODE};return(0,n.jsx)(h.Provider,{value:l,children:t})},p=()=>{let e=(0,s.useContext)(h);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},97896:e=>{e.exports={container:"AdminAnalytics_container__y3TFA",header:"AdminAnalytics_header__klgLW",toolbar:"AdminAnalytics_toolbar__iIcBz",filters:"AdminAnalytics_filters__IKIEe",filterItem:"AdminAnalytics_filterItem__U9vOL",downloadButton:"AdminAnalytics_downloadButton__GqqQN",loader:"AdminAnalytics_loader__1RdUt",error:"AdminAnalytics_error__qSNei",section:"AdminAnalytics_section__ej_cM",sectionTitle:"AdminAnalytics_sectionTitle__PYvXe",tableWrapper:"AdminAnalytics_tableWrapper__ojxNR",table:"AdminAnalytics_table__bGqPw",chartContainer:"AdminAnalytics_chartContainer__DyJj2"}}},e=>{var t=t=>e(e.s=t);e.O(0,[3163,5647,3464,6693,8441,1684,7358],()=>t(24592)),_N_E=e.O()}]);