(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{18495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),n=a(12115),l=a(23464),r=a(32502),i=a(64065),o=a(89760),d=a(97896),c=a.n(d);r.t1.register(r.PP,r.kc,r.FN,r.No,r.hE,r.m_,r.s$);let h=[{label:"All Regions",value:"all"},{label:"ap-northeast-2",value:"ap-northeast-2"},{label:"ap-southeast-2",value:"ap-southeast-2"},{label:"ca-central-1",value:"ca-central-1"},{label:"eu-west-2",value:"eu-west-2"}];function u(){let{SERVER_URL:e}=(0,o.U)(),[t,a]=(0,n.useState)(!1),[r,d]=(0,n.useState)("all"),[u,_]=(0,n.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString().slice(0,10)}),[b,x]=(0,n.useState)(new Date().toISOString().slice(0,10)),[A,p]=(0,n.useState)([]),[j,E]=(0,n.useState)([]),[C,m]=(0,n.useState)(!1),[N,g]=(0,n.useState)("");if((0,n.useEffect)(()=>{u&&b&&(m(!0),g(""),"all"===r?l.A.get("".concat(e,"/api/admin/analytics/all/range?start=").concat(u,"&end=").concat(b),{withCredentials:!0}).then(e=>{E(e.data.analytics),p([])}).catch(e=>{console.error(e),g("전체 리전 데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>m(!1)):l.A.get("".concat(e,"/api/admin/analytics/range?region=").concat(r,"&start=").concat(u,"&end=").concat(b),{withCredentials:!0}).then(e=>{p(e.data.analytics),E([])}).catch(e=>{console.error(e),g("데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>m(!1)))},[e,r,u,b]),(0,n.useEffect)(()=>{a(!0)},[]),!t)return(0,s.jsx)("div",{className:c().container,children:"Loading analytics…"});let v=(e,t)=>{let a=t.map(e=>e.date.slice(0,10)),n={labels:a,datasets:[{label:"Total Users",data:t.map(e=>e.totalUsers),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Daily Active",data:t.map(e=>e.dailyActiveUsers),borderColor:"#19857b",backgroundColor:"transparent",tension:.3}]},l={labels:a,datasets:[{label:"App Load",data:t.map(e=>e.avgAppLoadCount),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Map Search",data:t.map(e=>e.avgMapSearchCount),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"AI Posts",data:t.map(e=>e.avgAiPostCount),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Banner Ads",data:t.map(e=>e.avgBannerAdViewCount),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Interstitial Ads",data:t.map(e=>e.avgInterstitialAdViewCount),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Buddy Groups",data:t.map(e=>e.avgBuddyGroups),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]},r={labels:a,datasets:[{label:"Trust Badge",data:t.map(e=>100*e.trustBadgeRatio),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Push Notif",data:t.map(e=>100*e.pushNotificationEnabledRatio),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"New Msg",data:t.map(e=>100*e.newMessageEnabledRatio),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Account Public",data:t.map(e=>100*e.isAccountPublicRatio),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Email Verified",data:t.map(e=>100*e.isEmailVerifiedRatio),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Google Account",data:t.map(e=>100*e.isGoogleAccountRatio),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:c().regionHeader,children:e}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Users & Daily Active"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Total Users"}),(0,s.jsx)("th",{children:"Daily Active"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsx)("td",{children:e.totalUsers}),(0,s.jsx)("td",{children:e.dailyActiveUsers})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:n,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Usage Counts"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"App Load"}),(0,s.jsx)("th",{children:"Map Search"}),(0,s.jsx)("th",{children:"AI Posts"}),(0,s.jsx)("th",{children:"Banner Ads"}),(0,s.jsx)("th",{children:"Interstitial Ads"}),(0,s.jsx)("th",{children:"Buddy Groups"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsx)("td",{children:e.avgAppLoadCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgMapSearchCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgAiPostCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgBannerAdViewCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgInterstitialAdViewCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgBuddyGroups.toFixed(1)})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:l,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Feature Ratios (%)"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Trust Badge"}),(0,s.jsx)("th",{children:"Push Notif"}),(0,s.jsx)("th",{children:"New Msg"}),(0,s.jsx)("th",{children:"Public Acc"}),(0,s.jsx)("th",{children:"Email Verified"}),(0,s.jsx)("th",{children:"Google Acc"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsxs)("td",{children:[(100*e.trustBadgeRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.pushNotificationEnabledRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.newMessageEnabledRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isAccountPublicRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isEmailVerifiedRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isGoogleAccountRatio).toFixed(1),"%"]})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:r,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>"".concat(e,"%")}}}}})})]})]},e)};return(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("h1",{className:c().header,children:"\uD83D\uDCCA User Analytics Dashboard"}),(0,s.jsxs)("div",{className:c().toolbar,children:[(0,s.jsxs)("div",{className:c().filters,children:[(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"Region"}),(0,s.jsx)("select",{value:r,onChange:e=>d(e.target.value),children:h.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:u,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"End Date"}),(0,s.jsx)("input",{type:"date",value:b,onChange:e=>x(e.target.value)})]})]}),"all"!==r&&(0,s.jsx)("button",{className:c().downloadButton,onClick:()=>{if(!A.length)return;let e="analytics_".concat(r,"_").concat(u,"_").concat(b,".json"),t=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=e,s.click(),URL.revokeObjectURL(a)},disabled:!A.length,children:"Download JSON"})]}),C?(0,s.jsx)("div",{className:c().loader,children:"Loading analytics…"}):N?(0,s.jsx)("div",{className:c().error,children:N}):"all"===r?j.map(e=>{let{region:t,analytics:a}=e;return v(t,a)}):v(r,A)]})}},24592:(e,t,a)=>{Promise.resolve().then(a.bind(a,18495))},89760:(e,t,a)=>{"use strict";a.d(t,{s:()=>c,U:()=>h});var s=a(95155),n=a(12115),l=a(49509);function r(){return"https://fcde.app"}async function i(){return r()}let o={SERVER_URL:r()||"https://www.fcde.app",APP_VERSION:l.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:l.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:l.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(l.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(l.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},d=(0,n.createContext)(null),c=e=>{let{children:t}=e,[a,l]=(0,n.useState)(r());(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await i();e&&l(t)}catch(e){}})(),()=>{e=!1}},[]);let c={SERVER_URL:a,APP_VERSION:o.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:o.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:o.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:o.FEATURE_UNDER_DEV,TEST_AD_MODE:o.TEST_AD_MODE};return(0,s.jsx)(d.Provider,{value:c,children:t})},h=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},97896:e=>{e.exports={container:"AdminAnalytics_container__y3TFA",header:"AdminAnalytics_header__klgLW",toolbar:"AdminAnalytics_toolbar__iIcBz",filters:"AdminAnalytics_filters__IKIEe",filterItem:"AdminAnalytics_filterItem__U9vOL",downloadButton:"AdminAnalytics_downloadButton__GqqQN",loader:"AdminAnalytics_loader__1RdUt",error:"AdminAnalytics_error__qSNei",section:"AdminAnalytics_section__ej_cM",sectionTitle:"AdminAnalytics_sectionTitle__PYvXe",tableWrapper:"AdminAnalytics_tableWrapper__ojxNR",table:"AdminAnalytics_table__bGqPw",chartContainer:"AdminAnalytics_chartContainer__DyJj2"}}},e=>{var t=t=>e(e.s=t);e.O(0,[3163,5647,3464,6693,8441,1684,7358],()=>t(24592)),_N_E=e.O()}]);