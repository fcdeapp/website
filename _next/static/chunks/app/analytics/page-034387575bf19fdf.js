(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{18495:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(95155),n=t(12115),l=t(23464),r=t(32502),i=t(64065),o=t(61065),d=t(97896),c=t.n(d);r.t1.register(r.PP,r.kc,r.FN,r.No,r.hE,r.m_,r.s$);let h=[{label:"All Regions",value:"all"},{label:"ap-northeast-2",value:"ap-northeast-2"},{label:"ap-southeast-2",value:"ap-southeast-2"},{label:"ca-central-1",value:"ca-central-1"},{label:"eu-west-2",value:"eu-west-2"}];function u(){let{SERVER_URL:e}=(0,o.U)(),[a,t]=(0,n.useState)(!1),[r,d]=(0,n.useState)("all"),[u,b]=(0,n.useState)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString().slice(0,10)}),[x,p]=(0,n.useState)(new Date().toISOString().slice(0,10)),[j,g]=(0,n.useState)([]),[m,A]=(0,n.useState)([]),[C,_]=(0,n.useState)(!1),[v,N]=(0,n.useState)("");if((0,n.useEffect)(()=>{u&&x&&(_(!0),N(""),"all"===r?l.A.get("".concat(e,"/api/admin/analytics/all/range?start=").concat(u,"&end=").concat(x),{withCredentials:!0}).then(e=>{A(e.data.analytics),g([])}).catch(e=>{console.error(e),N("전체 리전 데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>_(!1)):l.A.get("".concat(e,"/api/admin/analytics/range?region=").concat(r,"&start=").concat(u,"&end=").concat(x),{withCredentials:!0}).then(e=>{g(e.data.analytics),A([])}).catch(e=>{console.error(e),N("데이터를 불러오는 중 오류가 발생했습니다.")}).finally(()=>_(!1)))},[e,r,u,x]),(0,n.useEffect)(()=>{t(!0)},[]),!a)return(0,s.jsx)("div",{className:c().container,children:"Loading analytics…"});let f=(e,a)=>{let t=a.map(e=>e.date.slice(0,10)),n={labels:t,datasets:[{label:"Total Users",data:a.map(e=>e.totalUsers),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Daily Active",data:a.map(e=>e.dailyActiveUsers),borderColor:"#19857b",backgroundColor:"transparent",tension:.3}]},l={labels:t,datasets:[{label:"App Load",data:a.map(e=>e.avgAppLoadCount),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Map Search",data:a.map(e=>e.avgMapSearchCount),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"AI Posts",data:a.map(e=>e.avgAiPostCount),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Banner Ads",data:a.map(e=>e.avgBannerAdViewCount),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Interstitial Ads",data:a.map(e=>e.avgInterstitialAdViewCount),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Buddy Groups",data:a.map(e=>e.avgBuddyGroups),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]},r={labels:t,datasets:[{label:"Trust Badge",data:a.map(e=>100*e.trustBadgeRatio),borderColor:"#556cd6",backgroundColor:"transparent",tension:.3},{label:"Push Notif",data:a.map(e=>100*e.pushNotificationEnabledRatio),borderColor:"#19857b",backgroundColor:"transparent",tension:.3},{label:"New Msg",data:a.map(e=>100*e.newMessageEnabledRatio),borderColor:"#ff8a65",backgroundColor:"transparent",tension:.3},{label:"Account Public",data:a.map(e=>100*e.isAccountPublicRatio),borderColor:"#9c27b0",backgroundColor:"transparent",tension:.3},{label:"Email Verified",data:a.map(e=>100*e.isEmailVerifiedRatio),borderColor:"#ffca28",backgroundColor:"transparent",tension:.3},{label:"Google Account",data:a.map(e=>100*e.isGoogleAccountRatio),borderColor:"#00838f",backgroundColor:"transparent",tension:.3}]};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:c().regionHeader,children:e}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Users & Daily Active"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Total Users"}),(0,s.jsx)("th",{children:"Daily Active"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsx)("td",{children:e.totalUsers}),(0,s.jsx)("td",{children:e.dailyActiveUsers})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:n,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Usage Counts"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"App Load"}),(0,s.jsx)("th",{children:"Map Search"}),(0,s.jsx)("th",{children:"AI Posts"}),(0,s.jsx)("th",{children:"Banner Ads"}),(0,s.jsx)("th",{children:"Interstitial Ads"}),(0,s.jsx)("th",{children:"Buddy Groups"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsx)("td",{children:e.avgAppLoadCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgMapSearchCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgAiPostCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgBannerAdViewCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgInterstitialAdViewCount.toFixed(1)}),(0,s.jsx)("td",{children:e.avgBuddyGroups.toFixed(1)})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:l,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}})})]}),(0,s.jsxs)("section",{className:c().section,children:[(0,s.jsxs)("div",{className:c().tableWrapper,children:[(0,s.jsx)("h3",{className:c().sectionTitle,children:"Feature Ratios (%)"}),(0,s.jsxs)("table",{className:c().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Trust Badge"}),(0,s.jsx)("th",{children:"Push Notif"}),(0,s.jsx)("th",{children:"New Msg"}),(0,s.jsx)("th",{children:"Public Acc"}),(0,s.jsx)("th",{children:"Email Verified"}),(0,s.jsx)("th",{children:"Google Acc"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.date.slice(0,10)}),(0,s.jsxs)("td",{children:[(100*e.trustBadgeRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.pushNotificationEnabledRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.newMessageEnabledRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isAccountPublicRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isEmailVerifiedRatio).toFixed(1),"%"]}),(0,s.jsxs)("td",{children:[(100*e.isGoogleAccountRatio).toFixed(1),"%"]})]},e.date))})]})]}),(0,s.jsx)("div",{className:c().chartContainer,children:(0,s.jsx)(i.N1,{data:r,options:{responsive:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>"".concat(e,"%")}}}}})})]})]},e)};return(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsx)("h1",{className:c().header,children:"\uD83D\uDCCA User Analytics Dashboard"}),(0,s.jsxs)("div",{className:c().toolbar,children:[(0,s.jsxs)("div",{className:c().filters,children:[(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"Region"}),(0,s.jsx)("select",{value:r,onChange:e=>d(e.target.value),children:h.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:u,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)("div",{className:c().filterItem,children:[(0,s.jsx)("label",{children:"End Date"}),(0,s.jsx)("input",{type:"date",value:x,onChange:e=>p(e.target.value)})]})]}),"all"!==r&&(0,s.jsx)("button",{className:c().downloadButton,onClick:()=>{if(!j.length)return;let e="analytics_".concat(r,"_").concat(u,"_").concat(x,".json"),a=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=e,s.click(),URL.revokeObjectURL(t)},disabled:!j.length,children:"Download JSON"})]}),C?(0,s.jsx)("div",{className:c().loader,children:"Loading analytics…"}):v?(0,s.jsx)("div",{className:c().error,children:v}):"all"===r?m.map(e=>{let{region:a,analytics:t}=e;return f(a,t)}):f(r,j)]})}},24592:(e,a,t)=>{Promise.resolve().then(t.bind(t,18495))},61065:(e,a,t)=>{"use strict";t.d(a,{s:()=>o,U:()=>d});var s=t(95155),n=t(12115);let l=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),r={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let a=navigator.language.split("-");a.length>1&&(e=a[1])}let a="";switch(e.toUpperCase()){case"CA":a="ca.";break;case"AU":a="au.";break;case"GB":a="uk.";break;default:a=""}return console.log("domainPrefix: ",a),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:l.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:l.SC,FACEBOOK_BANNER_PLACEMENT_ID:l.O8},i=(0,n.createContext)(null),o=e=>{let{children:a}=e;return(0,s.jsx)(i.Provider,{value:r,children:a})},d=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},97896:e=>{e.exports={container:"AdminAnalytics_container__y3TFA",header:"AdminAnalytics_header__klgLW",toolbar:"AdminAnalytics_toolbar__iIcBz",filters:"AdminAnalytics_filters__IKIEe",filterItem:"AdminAnalytics_filterItem__U9vOL",downloadButton:"AdminAnalytics_downloadButton__GqqQN",loader:"AdminAnalytics_loader__1RdUt",error:"AdminAnalytics_error__qSNei",section:"AdminAnalytics_section__ej_cM",sectionTitle:"AdminAnalytics_sectionTitle__PYvXe",tableWrapper:"AdminAnalytics_tableWrapper__ojxNR",table:"AdminAnalytics_table__bGqPw",chartContainer:"AdminAnalytics_chartContainer__DyJj2"}}},e=>{var a=a=>e(e.s=a);e.O(0,[3163,5647,3464,6693,8441,1684,7358],()=>a(24592)),_N_E=e.O()}]);