(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4350],{22903:(e,a,t)=>{Promise.resolve().then(t.bind(t,27440))},27440:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var i=t(95155),n=t(12115),s=t(23464),l=t(89760),o=t(31801),r=t.n(o);function c(){let{SERVER_URL:e}=(0,l.U)(),a="ap-northeast-2",[t,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[p,_]=(0,n.useState)(""),[v,h]=(0,n.useState)([{image:null,audio:null,video:null,prompt:""}]),[g,N]=(0,n.useState)(null),[x,f]=(0,n.useState)(""),[E,j]=(0,n.useState)(""),[C,w]=(0,n.useState)([]),[O,S]=(0,n.useState)({}),[A,y]=(0,n.useState)({});async function I(){try{let t=await s.A.get("".concat(e,"/owl-videos?region=").concat(a),{withCredentials:!0});o(t.data)}catch(e){console.error(e),alert("Failed to fetch videos")}}function V(e,a,t){h(i=>i.map((i,n)=>n===e?{...i,[a]:t}:i))}async function R(){if(!c||!u){alert("User ID, country required.");return}let t=new FormData;t.append("userId",c),t.append("country",u),t.append("description",p),t.append("region",a),v.forEach(e=>{e.image&&t.append("images",e.image,e.image.name),e.audio&&t.append("audios",e.audio,e.audio.name),e.video&&t.append("videos",e.video,e.video.name),t.append("prompts",e.prompt)});try{await s.A.post("".concat(e,"/owl-videos"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),m(""),_(""),h([{image:null,audio:null,video:null,prompt:""}]),I()}catch(e){console.error(e),alert("Failed to create video")}}function T(){N(null)}function b(){w(e=>[...e,{image:null,audio:null,video:null,prompt:""}])}function B(e,a,t){w(i=>i.map((i,n)=>n===e?{...i,[a]:t}:i))}async function L(t){if(!x){alert("Country required.");return}let i=new FormData;i.append("country",x),i.append("description",E),i.append("region",a),C.forEach(e=>{e.image&&i.append("images",e.image,e.image.name),e.audio&&i.append("audios",e.audio,e.audio.name),e.video&&i.append("videos",e.video,e.video.name),i.append("prompts",e.prompt)});try{await s.A.put("".concat(e,"/owl-videos/").concat(t._id),i,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),T(),I()}catch(e){console.error(e),alert("Failed to save edits")}}async function P(t,i,n,l){let o=new FormData;o.append("region",a),o.append(n,l);try{await s.A.patch("".concat(e,"/owl-videos/").concat(t,"/scenes/").concat(i,"/").concat(n),o,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),I()}catch(e){console.error(e),alert("Failed to update ".concat(n))}}async function D(t,i){let n="".concat(t,"-").concat(i);y(e=>({...e,[n]:!0}));try{let l=O[n]||"";await s.A.post("".concat(e,"/owl-videos/").concat(t,"/scenes/").concat(i,"/generate-video"),{region:a,prompt:l},{withCredentials:!0}),alert("Video generation started.")}catch(e){console.error(e),alert("Failed to start video generation")}finally{y(e=>({...e,[n]:!1}))}}async function U(t){if(confirm("진짜 삭제하시겠습니까?"))try{await s.A.delete("".concat(e,"/owl-videos/").concat(t,"?region=").concat(a),{withCredentials:!0}),I()}catch(e){console.error(e),alert("Failed to delete video")}}return(0,n.useEffect)(()=>{I();let e=localStorage.getItem("userId");e&&d(e)},[]),(0,i.jsxs)("div",{className:r().container,children:[(0,i.jsx)("header",{className:r().header,children:(0,i.jsx)("h1",{className:r().title,children:"Owl Videos Management"})}),(0,i.jsxs)("main",{className:r().main,children:[(0,i.jsxs)("section",{className:r().createSection,children:[(0,i.jsx)("h2",{className:r().sectionTitle,children:"Create New Owl Video"}),(0,i.jsxs)("div",{className:r().formRow,children:[(0,i.jsx)("input",{className:r().input,type:"text",placeholder:"User ID",value:c,readOnly:!0}),(0,i.jsxs)("select",{className:r().select,value:u,onChange:e=>m(e.target.value),children:[(0,i.jsx)("option",{value:"",children:"Select country"}),(0,i.jsx)("option",{value:"Canada",children:"Canada"}),(0,i.jsx)("option",{value:"Australia",children:"Australia"}),(0,i.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,i.jsx)("option",{value:"South Korea",children:"South Korea"})]})]}),(0,i.jsx)("div",{className:r().formRow,children:(0,i.jsx)("textarea",{className:r().textarea,placeholder:"Description",value:p,onChange:e=>_(e.target.value)})}),(0,i.jsx)("div",{className:r().sceneGrid,children:v.map((e,a)=>{var t,n,s;return(0,i.jsxs)("div",{className:r().sceneCard,children:[(0,i.jsxs)("h3",{children:["Scene ",a+1]}),(0,i.jsxs)("div",{className:r().mediaRow,children:[(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsxs)("button",{className:r().fileBtn,children:[(null===(t=e.image)||void 0===t?void 0:t.name)||"Select Image",(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return V(a,"image",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})}),(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsxs)("button",{className:r().fileBtnLight,children:[(null===(n=e.audio)||void 0===n?void 0:n.name)||"Select Audio",(0,i.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var t;return V(a,"audio",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})}),(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsxs)("button",{className:r().fileBtn,children:[(null===(s=e.video)||void 0===s?void 0:s.name)||"Select Video",(0,i.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var t;return V(a,"video",(null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})})]}),(0,i.jsx)("input",{className:r().promptInput,type:"text",placeholder:"Scene prompt",value:e.prompt,onChange:e=>V(a,"prompt",e.target.value)}),v.length>1&&(0,i.jsx)("button",{className:r().removeScene,onClick:()=>{h(e=>e.filter((e,t)=>t!==a))},children:"Remove Scene"})]},a)})}),(0,i.jsxs)("button",{className:r().addScene,onClick:function(){h(e=>[...e,{image:null,audio:null,video:null,prompt:""}])},children:[(0,i.jsx)("span",{className:r().plus,children:"＋"})," Add Scene"]}),(0,i.jsx)("button",{className:r().buttonPrimary,onClick:R,children:"Create Owl Video"})]}),(0,i.jsxs)("section",{className:r().listSection,children:[(0,i.jsx)("h2",{className:r().sectionTitle,children:"Existing Owl Videos"}),0===t.length&&(0,i.jsx)("p",{children:"No videos found."}),(0,i.jsx)("div",{className:r().videoGrid,children:t.map(e=>(0,i.jsxs)("div",{className:r().videoCard,children:[g!==e._id?(0,i.jsx)("button",{className:r().buttonPrimary,onClick:()=>{N(e._id),f(e.country),j(e.description),w(e.scenes.map(a=>({image:null,audio:null,video:null,prompt:O["".concat(e._id,"-").concat(a.sceneNumber)]||""})))},children:"Edit"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:r().removeScene,onClick:T,children:"Cancel"}),(0,i.jsx)("button",{className:r().buttonPrimary,onClick:()=>L(e),children:"Save"})]}),g===e._id?(0,i.jsxs)("div",{className:r().formRow,children:[(0,i.jsx)("input",{className:r().input,value:x,onChange:e=>f(e.target.value)}),(0,i.jsx)("textarea",{className:r().textarea,value:E,onChange:e=>j(e.target.value)})]}):(0,i.jsxs)("div",{className:r().cardHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Country:"})," ",e.country," \xa0|\xa0",(0,i.jsx)("strong",{children:"Uploaded:"})," ",new Date(e.uploadedAt).toLocaleString()]}),(0,i.jsx)("button",{className:r().deleteButton,onClick:()=>U(e._id),children:"Delete Video"})]}),g!==e._id&&(0,i.jsx)("p",{className:r().description,children:e.description}),(0,i.jsx)("div",{className:r().sceneGrid,children:g===e._id?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:r().editInfo,children:(0,i.jsxs)("p",{children:["Original scenes: ",e.scenes.length]})}),C.map((a,t)=>{var n,s,l;let o=e.scenes[t],c=o?o.sceneNumber:t+1;return(0,i.jsxs)("div",{className:r().sceneCard,children:[(0,i.jsxs)("h3",{children:["Scene ",c]}),o&&(0,i.jsxs)("div",{className:r().mediaRow,children:[(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsx)("img",{src:o.imageUrl,alt:"scene ".concat(c),className:r().previewImage})}),(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsx)("audio",{controls:!0,src:o.audioUrl,className:r().audioPlayer})}),(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsx)("video",{controls:!0,src:o.videoUrl,className:r().videoPlayer})})]}),(0,i.jsxs)("div",{className:r().mediaRow,children:[(0,i.jsxs)("button",{className:r().fileBtn,children:[(null===(n=a.image)||void 0===n?void 0:n.name)||((null==o?void 0:o.imageUrl)?"Existing Image":"Change Image"),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return B(t,"image",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,i.jsxs)("button",{className:r().fileBtnLight,children:[(null===(s=a.audio)||void 0===s?void 0:s.name)||((null==o?void 0:o.audioUrl)?"Existing Audio":"Change Audio"),(0,i.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var a;return B(t,"audio",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,i.jsxs)("button",{className:r().fileBtn,children:[(null===(l=a.video)||void 0===l?void 0:l.name)||((null==o?void 0:o.videoUrl)?"Existing Video":"Change Video"),(0,i.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var a;return B(t,"video",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]})]}),(0,i.jsx)("input",{className:r().promptInput,value:a.prompt,onChange:e=>B(t,"prompt",e.target.value)}),C.length>1&&(0,i.jsx)("button",{className:r().removeScene,onClick:()=>{w(e=>e.filter((e,a)=>a!==t))},children:"Remove Scene"})]},t)})]}):e.scenes.map(a=>(0,i.jsxs)("div",{className:r().sceneCard,children:[(0,i.jsxs)("h3",{children:["Scene ",a.sceneNumber]}),(0,i.jsx)("img",{className:r().previewImage,src:a.imageUrl,alt:"scene ".concat(a.sceneNumber)}),(0,i.jsxs)("div",{className:r().mediaRow,children:[(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsx)("audio",{className:r().audioPlayer,controls:!0,src:a.audioUrl})}),(0,i.jsx)("div",{className:r().mediaBox,children:(0,i.jsx)("video",{className:r().videoPlayer,controls:!0,src:a.videoUrl})})]}),(0,i.jsxs)("label",{className:r().patchLabel,children:["Change Image",(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:t=>{var i;return(null===(i=t.target.files)||void 0===i?void 0:i[0])&&P(e._id,a.sceneNumber,"image",t.target.files[0])}})]}),(0,i.jsxs)("label",{className:r().patchLabel,children:["Change Audio",(0,i.jsx)("input",{type:"file",accept:"audio/*",onChange:t=>{var i;return(null===(i=t.target.files)||void 0===i?void 0:i[0])&&P(e._id,a.sceneNumber,"audio",t.target.files[0])}})]}),(0,i.jsxs)("label",{className:r().patchLabel,children:["Change Video",(0,i.jsx)("input",{type:"file",accept:"video/*",onChange:t=>{var i;return(null===(i=t.target.files)||void 0===i?void 0:i[0])&&P(e._id,a.sceneNumber,"video",t.target.files[0])}})]})]},a.sceneNumber))}),g===e._id&&(0,i.jsxs)("button",{className:r().addScene,onClick:b,children:[(0,i.jsx)("span",{className:r().plus,children:"＋"})," Add Scene"]}),e.scenes.map(a=>(0,i.jsxs)("div",{className:r().sceneCard,children:[(0,i.jsx)("input",{className:r().input,type:"text",placeholder:"Enter generation prompt",value:O["".concat(e._id,"-").concat(a.sceneNumber)]||"",onChange:t=>S(i=>({...i,["".concat(e._id,"-").concat(a.sceneNumber)]:t.target.value}))}),(0,i.jsx)("button",{className:r().generateButton,disabled:A["".concat(e._id,"-").concat(a.sceneNumber)],onClick:()=>D(e._id,a.sceneNumber),children:A["".concat(e._id,"-").concat(a.sceneNumber)]?"Generating...":"Generate Video"})]},a.sceneNumber))]},e._id))})]})]})]})}},31801:e=>{e.exports={container:"OwlVideos_container__x4Hj0",header:"OwlVideos_header__NAM_3",title:"OwlVideos_title__Z_0X3",main:"OwlVideos_main__PMN_7",createSection:"OwlVideos_createSection__M9uLk",sectionTitle:"OwlVideos_sectionTitle__6YcJQ",formRow:"OwlVideos_formRow__yRGmp",input:"OwlVideos_input__fl_66",select:"OwlVideos_select__wdKDG",textarea:"OwlVideos_textarea__R3G9W",sceneGrid:"OwlVideos_sceneGrid__r7C5r",sceneCard:"OwlVideos_sceneCard__q9Bk5",fileLabel:"OwlVideos_fileLabel__jJrf3",promptInput:"OwlVideos_promptInput__r1oSX",listSection:"OwlVideos_listSection__ISu9L",videoGrid:"OwlVideos_videoGrid__kUXXI",videoCard:"OwlVideos_videoCard__u1JII",cardHeader:"OwlVideos_cardHeader__j9_26",deleteButton:"OwlVideos_deleteButton__GrR__",previewImage:"OwlVideos_previewImage__lTLGa",mediaRow:"OwlVideos_mediaRow__SbgZc",mediaBox:"OwlVideos_mediaBox__tHpOS",audioPlayer:"OwlVideos_audioPlayer__RymaL",videoPlayer:"OwlVideos_videoPlayer__mn3pF",patchLabel:"OwlVideos_patchLabel__NJP44",generateButton:"OwlVideos_generateButton__fRshA",description:"OwlVideos_description__8C7bQ",fileBtn:"OwlVideos_fileBtn__T42z1",fileBtnLight:"OwlVideos_fileBtnLight__QwqM2",fileBtnSmall:"OwlVideos_fileBtnSmall__gB87p",addScene:"OwlVideos_addScene__Wc6H7",plus:"OwlVideos_plus__Bj9mP",buttonPrimary:"OwlVideos_buttonPrimary__X5EQr",editInfo:"OwlVideos_editInfo__ZsAkD"}},89760:(e,a,t)=>{"use strict";t.d(a,{s:()=>m,U:()=>p});var i=t(95155),n=t(12115),s=t(49509);function l(e){switch(e.trim().toUpperCase()){case"BETA":return"https://beta.fcde.app";case"DEVELOPMENT":return"https://dev.fcde.app";case"CA":case"CANADA":return"https://ca.fcde.app";case"AU":case"AUSTRALIA":return"https://au.fcde.app";case"GB":case"UK":return"https://uk.fcde.app";case"KR":case"KOREA":return"https://kr.fcde.app";default:return"https://fcde.app"}}function o(){return"https://fcde.app"}async function r(e){try{return(await fetch("".concat(e,"/health"),{method:"GET"})).ok}catch(e){return!1}}async function c(){let e=null;try{let a=localStorage.getItem("selectedServer");a&&(e=a)}catch(e){}for(let a of(!e&&s.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER&&(e=s.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER),e||(e=function(){try{let e=localStorage.getItem("region");if(e)return e}catch(e){}if("undefined"!=typeof navigator&&navigator.language){let e=navigator.language.split("-");if(e.length>1)return e[1]}return"KR"}()),[e,"Beta","Development"])){let e=l(a);if(await r(e))return e}return l(e)}let d={SERVER_URL:o(),APP_VERSION:s.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:s.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:s.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(s.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(s.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},u=(0,n.createContext)(null),m=e=>{let{children:a}=e,[t,s]=(0,n.useState)(o());(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await c();e&&s(a)}catch(e){}})(),()=>{e=!1}},[]);let l={SERVER_URL:t,APP_VERSION:d.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:d.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:d.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:d.FEATURE_UNDER_DEV,TEST_AD_MODE:d.TEST_AD_MODE};return(0,i.jsx)(u.Provider,{value:l,children:a})},p=()=>{let e=(0,n.useContext)(u);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[7218,3464,8441,1684,7358],()=>a(22903)),_N_E=e.O()}]);