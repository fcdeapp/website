(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4350],{22903:(e,a,i)=>{Promise.resolve().then(i.bind(i,27440))},27440:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>r});var n=i(95155),t=i(12115),l=i(23464),s=i(61065),o=i(31801),d=i.n(o);function r(){let{SERVER_URL:e}=(0,s.U)(),a="ap-northeast-2",[i,o]=(0,t.useState)([]),[r,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[p,v]=(0,t.useState)(""),[h,_]=(0,t.useState)([{image:null,audio:null,video:null,prompt:""}]),[g,x]=(0,t.useState)(null),[N,j]=(0,t.useState)(""),[f,w]=(0,t.useState)(""),[C,b]=(0,t.useState)([]),[S,y]=(0,t.useState)({}),[O,V]=(0,t.useState)({});async function B(){try{let i=await l.A.get("".concat(e,"/owl-videos?region=").concat(a),{withCredentials:!0});o(i.data)}catch(e){console.error(e),alert("Failed to fetch videos")}}function I(e,a,i){_(n=>n.map((n,t)=>t===e?{...n,[a]:i}:n))}async function A(){if(!r||!u){alert("User ID, country required.");return}let i=new FormData;i.append("userId",r),i.append("country",u),i.append("description",p),i.append("region",a),h.forEach(e=>{e.image&&i.append("images",e.image,e.image.name),e.audio&&i.append("audios",e.audio,e.audio.name),e.video&&i.append("videos",e.video,e.video.name),i.append("prompts",e.prompt)});try{await l.A.post("".concat(e,"/owl-videos"),i,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),m(""),v(""),_([{image:null,audio:null,video:null,prompt:""}]),B()}catch(e){console.error(e),alert("Failed to create video")}}function E(){x(null)}function R(){b(e=>[...e,{image:null,audio:null,video:null,prompt:""}])}function P(e,a,i){b(n=>n.map((n,t)=>t===e?{...n,[a]:i}:n))}async function L(i){if(!N){alert("Country required.");return}let n=new FormData;n.append("country",N),n.append("description",f),n.append("region",a),C.forEach(e=>{e.image&&n.append("images",e.image,e.image.name),e.audio&&n.append("audios",e.audio,e.audio.name),e.video&&n.append("videos",e.video,e.video.name),n.append("prompts",e.prompt)});try{await l.A.put("".concat(e,"/owl-videos/").concat(i._id),n,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),E(),B()}catch(e){console.error(e),alert("Failed to save edits")}}async function k(i,n,t,s){let o=new FormData;o.append("region",a),o.append(t,s);try{await l.A.patch("".concat(e,"/owl-videos/").concat(i,"/scenes/").concat(n,"/").concat(t),o,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),B()}catch(e){console.error(e),alert("Failed to update ".concat(t))}}async function U(i,n){let t="".concat(i,"-").concat(n);V(e=>({...e,[t]:!0}));try{let s=S[t]||"";await l.A.post("".concat(e,"/owl-videos/").concat(i,"/scenes/").concat(n,"/generate-video"),{region:a,prompt:s},{withCredentials:!0}),alert("Video generation started.")}catch(e){console.error(e),alert("Failed to start video generation")}finally{V(e=>({...e,[t]:!1}))}}async function T(i){if(confirm("진짜 삭제하시겠습니까?"))try{await l.A.delete("".concat(e,"/owl-videos/").concat(i,"?region=").concat(a),{withCredentials:!0}),B()}catch(e){console.error(e),alert("Failed to delete video")}}return(0,t.useEffect)(()=>{B();let e=localStorage.getItem("userId");e&&c(e)},[]),(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsx)("header",{className:d().header,children:(0,n.jsx)("h1",{className:d().title,children:"Owl Videos Management"})}),(0,n.jsxs)("main",{className:d().main,children:[(0,n.jsxs)("section",{className:d().createSection,children:[(0,n.jsx)("h2",{className:d().sectionTitle,children:"Create New Owl Video"}),(0,n.jsxs)("div",{className:d().formRow,children:[(0,n.jsx)("input",{className:d().input,type:"text",placeholder:"User ID",value:r,readOnly:!0}),(0,n.jsxs)("select",{className:d().select,value:u,onChange:e=>m(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Select country"}),(0,n.jsx)("option",{value:"Canada",children:"Canada"}),(0,n.jsx)("option",{value:"Australia",children:"Australia"}),(0,n.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,n.jsx)("option",{value:"South Korea",children:"South Korea"})]})]}),(0,n.jsx)("div",{className:d().formRow,children:(0,n.jsx)("textarea",{className:d().textarea,placeholder:"Description",value:p,onChange:e=>v(e.target.value)})}),(0,n.jsx)("div",{className:d().sceneGrid,children:h.map((e,a)=>{var i,t,l;return(0,n.jsxs)("div",{className:d().sceneCard,children:[(0,n.jsxs)("h3",{children:["Scene ",a+1]}),(0,n.jsxs)("div",{className:d().mediaRow,children:[(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsxs)("button",{className:d().fileBtn,children:[(null===(i=e.image)||void 0===i?void 0:i.name)||"Select Image",(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var i;return I(a,"image",(null===(i=e.target.files)||void 0===i?void 0:i[0])||null)}})]})}),(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsxs)("button",{className:d().fileBtnLight,children:[(null===(t=e.audio)||void 0===t?void 0:t.name)||"Select Audio",(0,n.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var i;return I(a,"audio",(null===(i=e.target.files)||void 0===i?void 0:i[0])||null)}})]})}),(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsxs)("button",{className:d().fileBtn,children:[(null===(l=e.video)||void 0===l?void 0:l.name)||"Select Video",(0,n.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var i;return I(a,"video",(null===(i=e.target.files)||void 0===i?void 0:i[0])||null)}})]})})]}),(0,n.jsx)("input",{className:d().promptInput,type:"text",placeholder:"Scene prompt",value:e.prompt,onChange:e=>I(a,"prompt",e.target.value)}),h.length>1&&(0,n.jsx)("button",{className:d().removeScene,onClick:()=>{_(e=>e.filter((e,i)=>i!==a))},children:"Remove Scene"})]},a)})}),(0,n.jsxs)("button",{className:d().addScene,onClick:function(){_(e=>[...e,{image:null,audio:null,video:null,prompt:""}])},children:[(0,n.jsx)("span",{className:d().plus,children:"＋"})," Add Scene"]}),(0,n.jsx)("button",{className:d().buttonPrimary,onClick:A,children:"Create Owl Video"})]}),(0,n.jsxs)("section",{className:d().listSection,children:[(0,n.jsx)("h2",{className:d().sectionTitle,children:"Existing Owl Videos"}),0===i.length&&(0,n.jsx)("p",{children:"No videos found."}),(0,n.jsx)("div",{className:d().videoGrid,children:i.map(e=>(0,n.jsxs)("div",{className:d().videoCard,children:[g!==e._id?(0,n.jsx)("button",{className:d().buttonPrimary,onClick:()=>{x(e._id),j(e.country),w(e.description),b(e.scenes.map(a=>({image:null,audio:null,video:null,prompt:S["".concat(e._id,"-").concat(a.sceneNumber)]||""})))},children:"Edit"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:d().removeScene,onClick:E,children:"Cancel"}),(0,n.jsx)("button",{className:d().buttonPrimary,onClick:()=>L(e),children:"Save"})]}),g===e._id?(0,n.jsxs)("div",{className:d().formRow,children:[(0,n.jsx)("input",{className:d().input,value:N,onChange:e=>j(e.target.value)}),(0,n.jsx)("textarea",{className:d().textarea,value:f,onChange:e=>w(e.target.value)})]}):(0,n.jsxs)("div",{className:d().cardHeader,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Country:"})," ",e.country," \xa0|\xa0",(0,n.jsx)("strong",{children:"Uploaded:"})," ",new Date(e.uploadedAt).toLocaleString()]}),(0,n.jsx)("button",{className:d().deleteButton,onClick:()=>T(e._id),children:"Delete Video"})]}),g!==e._id&&(0,n.jsx)("p",{className:d().description,children:e.description}),(0,n.jsx)("div",{className:d().sceneGrid,children:g===e._id?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:d().editInfo,children:(0,n.jsxs)("p",{children:["Original scenes: ",e.scenes.length]})}),C.map((a,i)=>{var t,l,s;let o=e.scenes[i],r=o?o.sceneNumber:i+1;return(0,n.jsxs)("div",{className:d().sceneCard,children:[(0,n.jsxs)("h3",{children:["Scene ",r]}),o&&(0,n.jsxs)("div",{className:d().mediaRow,children:[(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsx)("img",{src:o.imageUrl,alt:"scene ".concat(r),className:d().previewImage})}),(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsx)("audio",{controls:!0,src:o.audioUrl,className:d().audioPlayer})}),(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsx)("video",{controls:!0,src:o.videoUrl,className:d().videoPlayer})})]}),(0,n.jsxs)("div",{className:d().mediaRow,children:[(0,n.jsxs)("button",{className:d().fileBtn,children:[(null===(t=a.image)||void 0===t?void 0:t.name)||((null==o?void 0:o.imageUrl)?"Existing Image":"Change Image"),(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return P(i,"image",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,n.jsxs)("button",{className:d().fileBtnLight,children:[(null===(l=a.audio)||void 0===l?void 0:l.name)||((null==o?void 0:o.audioUrl)?"Existing Audio":"Change Audio"),(0,n.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var a;return P(i,"audio",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,n.jsxs)("button",{className:d().fileBtn,children:[(null===(s=a.video)||void 0===s?void 0:s.name)||((null==o?void 0:o.videoUrl)?"Existing Video":"Change Video"),(0,n.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var a;return P(i,"video",(null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]})]}),(0,n.jsx)("input",{className:d().promptInput,value:a.prompt,onChange:e=>P(i,"prompt",e.target.value)}),C.length>1&&(0,n.jsx)("button",{className:d().removeScene,onClick:()=>{b(e=>e.filter((e,a)=>a!==i))},children:"Remove Scene"})]},i)})]}):e.scenes.map(a=>(0,n.jsxs)("div",{className:d().sceneCard,children:[(0,n.jsxs)("h3",{children:["Scene ",a.sceneNumber]}),(0,n.jsx)("img",{className:d().previewImage,src:a.imageUrl,alt:"scene ".concat(a.sceneNumber)}),(0,n.jsxs)("div",{className:d().mediaRow,children:[(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsx)("audio",{className:d().audioPlayer,controls:!0,src:a.audioUrl})}),(0,n.jsx)("div",{className:d().mediaBox,children:(0,n.jsx)("video",{className:d().videoPlayer,controls:!0,src:a.videoUrl})})]}),(0,n.jsxs)("label",{className:d().patchLabel,children:["Change Image",(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:i=>{var n;return(null===(n=i.target.files)||void 0===n?void 0:n[0])&&k(e._id,a.sceneNumber,"image",i.target.files[0])}})]}),(0,n.jsxs)("label",{className:d().patchLabel,children:["Change Audio",(0,n.jsx)("input",{type:"file",accept:"audio/*",onChange:i=>{var n;return(null===(n=i.target.files)||void 0===n?void 0:n[0])&&k(e._id,a.sceneNumber,"audio",i.target.files[0])}})]}),(0,n.jsxs)("label",{className:d().patchLabel,children:["Change Video",(0,n.jsx)("input",{type:"file",accept:"video/*",onChange:i=>{var n;return(null===(n=i.target.files)||void 0===n?void 0:n[0])&&k(e._id,a.sceneNumber,"video",i.target.files[0])}})]})]},a.sceneNumber))}),g===e._id&&(0,n.jsxs)("button",{className:d().addScene,onClick:R,children:[(0,n.jsx)("span",{className:d().plus,children:"＋"})," Add Scene"]}),e.scenes.map(a=>(0,n.jsxs)("div",{className:d().sceneCard,children:[(0,n.jsx)("input",{className:d().input,type:"text",placeholder:"Enter generation prompt",value:S["".concat(e._id,"-").concat(a.sceneNumber)]||"",onChange:i=>y(n=>({...n,["".concat(e._id,"-").concat(a.sceneNumber)]:i.target.value}))}),(0,n.jsx)("button",{className:d().generateButton,disabled:O["".concat(e._id,"-").concat(a.sceneNumber)],onClick:()=>U(e._id,a.sceneNumber),children:O["".concat(e._id,"-").concat(a.sceneNumber)]?"Generating...":"Generate Video"})]},a.sceneNumber))]},e._id))})]})]})]})}},31801:e=>{e.exports={container:"OwlVideos_container__x4Hj0",header:"OwlVideos_header__NAM_3",title:"OwlVideos_title__Z_0X3",main:"OwlVideos_main__PMN_7",createSection:"OwlVideos_createSection__M9uLk",sectionTitle:"OwlVideos_sectionTitle__6YcJQ",formRow:"OwlVideos_formRow__yRGmp",input:"OwlVideos_input__fl_66",select:"OwlVideos_select__wdKDG",textarea:"OwlVideos_textarea__R3G9W",sceneGrid:"OwlVideos_sceneGrid__r7C5r",sceneCard:"OwlVideos_sceneCard__q9Bk5",fileLabel:"OwlVideos_fileLabel__jJrf3",promptInput:"OwlVideos_promptInput__r1oSX",listSection:"OwlVideos_listSection__ISu9L",videoGrid:"OwlVideos_videoGrid__kUXXI",videoCard:"OwlVideos_videoCard__u1JII",cardHeader:"OwlVideos_cardHeader__j9_26",deleteButton:"OwlVideos_deleteButton__GrR__",previewImage:"OwlVideos_previewImage__lTLGa",mediaRow:"OwlVideos_mediaRow__SbgZc",mediaBox:"OwlVideos_mediaBox__tHpOS",audioPlayer:"OwlVideos_audioPlayer__RymaL",videoPlayer:"OwlVideos_videoPlayer__mn3pF",patchLabel:"OwlVideos_patchLabel__NJP44",generateButton:"OwlVideos_generateButton__fRshA",description:"OwlVideos_description__8C7bQ",fileBtn:"OwlVideos_fileBtn__T42z1",fileBtnLight:"OwlVideos_fileBtnLight__QwqM2",fileBtnSmall:"OwlVideos_fileBtnSmall__gB87p",addScene:"OwlVideos_addScene__Wc6H7",plus:"OwlVideos_plus__Bj9mP",buttonPrimary:"OwlVideos_buttonPrimary__X5EQr",editInfo:"OwlVideos_editInfo__ZsAkD"}},61065:(e,a,i)=>{"use strict";i.d(a,{s:()=>d,U:()=>r});var n=i(95155),t=i(12115);let l=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),s={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let a=navigator.language.split("-");a.length>1&&(e=a[1])}let a="";switch(e.toUpperCase()){case"CA":a="ca.";break;case"AU":a="au.";break;case"GB":a="uk.";break;default:a=""}return console.log("domainPrefix: ",a),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:l.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:l.SC,FACEBOOK_BANNER_PLACEMENT_ID:l.O8},o=(0,t.createContext)(null),d=e=>{let{children:a}=e;return(0,n.jsx)(o.Provider,{value:s,children:a})},r=()=>{let e=(0,t.useContext)(o);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[7218,3464,8441,1684,7358],()=>a(22903)),_N_E=e.O()}]);