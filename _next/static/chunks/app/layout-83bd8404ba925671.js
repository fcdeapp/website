(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1065:(e,t,a)=>{"use strict";a.d(t,{s:()=>i,U:()=>c});var r=a(5155),n=a(2115);let o=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),s={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let t=navigator.language.split("-");t.length>1&&(e=t[1])}let t="";switch(e.toUpperCase()){case"CA":t="ca.";break;case"AU":t="au.";break;case"GB":t="uk.";break;default:t=""}return console.log("domainPrefix: ",t),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:o.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:o.SC,FACEBOOK_BANNER_PLACEMENT_ID:o.O8},l=(0,n.createContext)(null),i=e=>{let{children:t}=e;return(0,r.jsx)(l.Provider,{value:s,children:t})},c=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},2066:e=>{e.exports={overlay:"PasswordExpiredModal_overlay__uqqzV",modalContainer:"PasswordExpiredModal_modalContainer__EMm5b",title:"PasswordExpiredModal_title__RQIQd",message:"PasswordExpiredModal_message__4wptN",buttonContainer:"PasswordExpiredModal_buttonContainer__zWDo_",button:"PasswordExpiredModal_button__cbXxj",buttonText:"PasswordExpiredModal_buttonText__L4gMg",closeButton:"PasswordExpiredModal_closeButton__YRj8a",closeText:"PasswordExpiredModal_closeText__7UocI"}},2234:e=>{e.exports={container:"ErrorBoundaryWrapper_container__whHWH",text:"ErrorBoundaryWrapper_text__ZQSpk"}},2554:(e,t,a)=>{Promise.resolve().then(a.bind(a,3392))},3392:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var r=a(5155),n=a(2115),o=a(1065),s=a(1218),l=a(2533),i=a(3464),c=a(2234),d=a.n(c);let u=e=>{let{children:t}=e,{SERVER_URL:a}=(0,o.U)();class s extends n.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){if(console.error("Captured Error:",e),!this.errorLogSent){var r;this.errorLogSent=!0,i.A.post("".concat(a,"/api/logs/error"),{errorDetails:{message:e.toString(),stack:null===(r=t.componentStack)||void 0===r?void 0:r.slice(0,150),source:"React Component",timestamp:new Date().toISOString()}}).catch(e=>{console.error("Failed to send error log:",e)})}}render(){return this.state.hasError?(0,r.jsx)("div",{className:d().container,children:(0,r.jsx)("span",{className:d().text,children:"Something went wrong."})}):this.props.children}constructor(e){super(e),this.errorLogSent=!1,this.state={hasError:!1}}}return(0,r.jsx)(s,{children:t})};var h=a(5185),p=a.n(h);let _=e=>{let{visible:t,onRetry:a}=e,{t:n}=(0,s.Bd)();return t?(0,r.jsx)("div",{className:p().overlay,children:(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)("h2",{className:p().title,children:n("maintenance.title")}),(0,r.jsx)("p",{className:p().message,children:n("maintenance.message")}),(0,r.jsx)("p",{className:p().support,children:n("maintenance.support_contact",{email:"support@fcde.app"})}),(0,r.jsx)("button",{className:p().button,onClick:a,children:(0,r.jsx)("span",{className:p().buttonText,children:n("maintenance.retry")})})]})}):null};var m=a(2066),g=a.n(m);let x=e=>{let{visible:t,onPressChange:a,onClose:n}=e,{t:o}=(0,s.Bd)();return t?(0,r.jsx)("div",{className:g().overlay,children:(0,r.jsxs)("div",{className:g().modalContainer,children:[(0,r.jsx)("h2",{className:g().title,children:o("password_expired_title")}),(0,r.jsx)("p",{className:g().message,children:o("password_expired_message")}),(0,r.jsx)("div",{className:g().buttonContainer,children:(0,r.jsx)("button",{className:g().button,onClick:a,children:(0,r.jsx)("span",{className:g().buttonText,children:o("change_now")})})}),n&&(0,r.jsx)("button",{className:g().closeButton,onClick:n,children:(0,r.jsx)("span",{className:g().closeText,children:o("close")})})]})}):null};var v=a(7768),w=a(5695),E=a(6874),f=a.n(E);function N(){return(0,r.jsx)("header",{className:"header",children:(0,r.jsxs)("nav",{className:"header-nav",children:[(0,r.jsx)(f(),{href:"/",children:(0,r.jsx)("img",{src:"/FacadeWebLogo.png",alt:"Facade Logo",className:"logo"})}),(0,r.jsxs)("div",{className:"nav-links",children:[(0,r.jsx)(f(),{href:"/about",children:"About"}),(0,r.jsx)(f(),{href:"/posts",children:"Posts"}),(0,r.jsx)(f(),{href:"/terms",children:"Terms"})]}),(0,r.jsxs)("div",{className:"action-buttons",children:[(0,r.jsx)(f(),{href:"/login",children:(0,r.jsx)("a",{className:"login-button",children:"Login"})}),(0,r.jsx)(f(),{href:"/signup",children:(0,r.jsx)("a",{className:"signup-button",children:"Sign Up"})})]})]})})}a(347);var j=a(3768),C=a.n(j),b=a(9509);let I=e=>{let{children:t}=e;(0,w.useRouter)();let[a,c]=(0,n.useState)(!0),[d,h]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),[g,E]=(0,n.useState)(!1),f=(0,n.useRef)(null);(0,n.useRef)(null);let j="https://fcde.app",I=async()=>{try{await fetch("".concat(j,"/health")),h(!1)}catch(e){h(!0)}},S=async()=>{try{let e=b.env.NEXT_PUBLIC_APP_BUILD||"1.0.0",t=localStorage.getItem("userId")||"anonymous",a=await i.A.post("".concat(j,"/api/version/check"),{buildNumber:e,userId:t});if(a.data.deactivationInfo&&a.data.deactivationInfo.isDeactivated){window.location.href="/deactivatedUser";return}a.data.passwordExpired&&(m(!0),E(!0))}catch(e){console.error("Version check error:",e)}},y=async()=>{let e=localStorage.getItem("currentCountry")||"Unknown",t=(()=>{switch(e){case"Canada":return"ca-central-1";case"Australia":return"ap-southeast-2";case"United Kingdom":return"eu-west-2";default:return"ap-northeast-2"}})();return{userId:localStorage.getItem("userId")||"anonymous",deviceInfo:{deviceType:navigator.userAgent,os:navigator.platform,appVersion:b.env.NEXT_PUBLIC_APP_VERSION||"1.0.0"},networkStatus:{isConnected:navigator.onLine,networkType:"Unknown"},locationData:{country:e,region:t},additionalContext:{sessionId:localStorage.getItem("sessionId")||"Unknown"}}},M=async e=>{try{let t=await y();await i.A.post("".concat(j,"/api/logs/error"),{...t,errorDetails:e})}catch(e){console.error("Failed to send error log:",e)}};return(0,n.useEffect)(()=>{let e=e=>{var t;M({message:e.message,stack:e.error?null===(t=e.error.stack)||void 0===t?void 0:t.slice(0,200):"No stack trace",source:"Global",timestamp:new Date().toISOString(),isFatal:!1})};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("region");if(!e)try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async t=>{let{latitude:a,longitude:r}=t.coords,n=await (0,v.LF)(a,r,j),o=n?n.country:"Unknown";e="Canada"===o?"ca-central-1":"Australia"===o?"ap-southeast-2":"United Kingdom"===o?"eu-west-2":"ap-northeast-2",localStorage.setItem("region",e)},t=>{console.error("Geolocation error:",t),e="ap-northeast-2",localStorage.setItem("region",e)}):(e="ap-northeast-2",localStorage.setItem("region",e))}catch(t){console.error("Error determining region:",t),e="ap-northeast-2",localStorage.setItem("region",e)}i.A.interceptors.request.use(t=>(t.headers["x-region"]=e,t))})()},[]),(0,n.useEffect)(()=>{(async()=>{try{await Promise.all([I(),S()])}catch(e){console.error("Initialization error:",e)}finally{c(!1)}})()},[]),(0,n.useEffect)(()=>{let e=()=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{I(),f.current=null},5e3)};return window.addEventListener("online",e),window.addEventListener("offline",()=>h(!0)),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",()=>h(!0))}},[]),(0,r.jsx)("html",{lang:"en",className:C().className,children:(0,r.jsx)("body",{children:(0,r.jsx)(o.s,{children:(0,r.jsx)(u,{children:(0,r.jsxs)(s.xC,{i18n:l.Ay,children:[d&&(0,r.jsx)(_,{visible:d,onRetry:()=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{I(),f.current=null},5e3)}}),g&&(0,r.jsx)(x,{visible:g,onPressChange:()=>{E(!1),window.location.href="/signInLogIn?showChangePasswordModal=true"},onClose:()=>E(!1)}),(0,r.jsx)(N,{}),(0,r.jsx)("main",{children:t})]})})})})})}},3768:e=>{e.exports={style:{fontFamily:"'pretendard', 'pretendard Fallback'"},className:"__className_a7a14f",variable:"__variable_a7a14f"}},5185:e=>{e.exports={overlay:"MaintenanceModal_overlay__mpQUQ",container:"MaintenanceModal_container__JRIx_",title:"MaintenanceModal_title__Cxtzd",message:"MaintenanceModal_message__9gh38",support:"MaintenanceModal_support__UIsl5",button:"MaintenanceModal_button__STWON",buttonText:"MaintenanceModal_buttonText__TMEvk"}}},e=>{var t=t=>e(e.s=t);e.O(0,[504,935,218,794,874,452,533,768,441,684,358],()=>t(2554)),_N_E=e.O()}]);