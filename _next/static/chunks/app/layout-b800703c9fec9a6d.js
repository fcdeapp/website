(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{2066:e=>{e.exports={overlay:"PasswordExpiredModal_overlay__uqqzV",modalContainer:"PasswordExpiredModal_modalContainer__EMm5b",title:"PasswordExpiredModal_title__RQIQd",message:"PasswordExpiredModal_message__4wptN",buttonContainer:"PasswordExpiredModal_buttonContainer__zWDo_",button:"PasswordExpiredModal_button__cbXxj",buttonText:"PasswordExpiredModal_buttonText__L4gMg",closeButton:"PasswordExpiredModal_closeButton__YRj8a",closeText:"PasswordExpiredModal_closeText__7UocI"}},3392:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(95155),s=a(12115),o=a(63554),n=a(61065),i=a(91218),l=a(72533),c=a(23464),d=a(94283),g=a.n(d);let u=e=>{let{children:t}=e,{SERVER_URL:a}=(0,n.U)();class o extends s.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){if(console.error("Captured Error:",e),!this.errorLogSent){var r;this.errorLogSent=!0,c.A.post("".concat(a,"/api/logs/error"),{errorDetails:{message:e.toString(),stack:null===(r=t.componentStack)||void 0===r?void 0:r.slice(0,150),source:"React Component",timestamp:new Date().toISOString()}}).catch(e=>{console.error("Failed to send error log:",e)})}}render(){return this.state.hasError?(0,r.jsx)("div",{className:g().container,children:(0,r.jsx)("span",{className:g().text,children:"Something went wrong."})}):this.props.children}constructor(e){super(e),this.errorLogSent=!1,this.state={hasError:!1}}}return(0,r.jsx)(o,{children:t})};var x=a(55185),p=a.n(x);let h=e=>{let{visible:t,onRetry:a}=e,{t:s}=(0,i.Bd)();return t?(0,r.jsx)("div",{className:p().overlay,children:(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)("h2",{className:p().title,children:s("maintenance.title")}),(0,r.jsx)("p",{className:p().message,children:s("maintenance.message")}),(0,r.jsx)("p",{className:p().support,children:s("maintenance.support_contact",{email:"support@fcde.app"})}),(0,r.jsx)("button",{className:p().button,onClick:a,children:(0,r.jsx)("span",{className:p().buttonText,children:s("maintenance.retry")})})]})}):null};var m=a(2066),b=a.n(m);let f=e=>{let{visible:t,onPressChange:a,onClose:s}=e,{t:o}=(0,i.Bd)();return t?(0,r.jsx)("div",{className:b().overlay,children:(0,r.jsxs)("div",{className:b().modalContainer,children:[(0,r.jsx)("h2",{className:b().title,children:o("password_expired_title")}),(0,r.jsx)("p",{className:b().message,children:o("password_expired_message")}),(0,r.jsx)("div",{className:b().buttonContainer,children:(0,r.jsx)("button",{className:b().button,onClick:a,children:(0,r.jsx)("span",{className:b().buttonText,children:o("change_now")})})}),s&&(0,r.jsx)("button",{className:b().closeButton,onClick:s,children:(0,r.jsx)("span",{className:b().closeText,children:o("close")})})]})}):null};var j=a(7768),w=a(35695),y=a(11518),_=a.n(y),v=a(6874),k=a.n(v),I=a(32649);function S(){let e=(0,w.useRouter)(),[t,a]=(0,s.useState)(!1),[o,n]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[d,g]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{let e=await c.A.get("".concat("https://fcde.app","/authStatus/status"),{withCredentials:!0});a(e.data.loggedIn),localStorage.setItem("isLoggedIn",e.data.loggedIn?"true":"false")}catch(e){console.error("Failed to check login status",e),a(!1)}})()},[]),(0,s.useEffect)(()=>{let e=async()=>{try{let e=await c.A.get("".concat("https://fcde.app","/users/me"),{withCredentials:!0}),t=e.data.userId||"";n(t),localStorage.setItem("userId",t),l(e.data.profileImage||""),g(e.data.profileThumbnail||"")}catch(e){console.error("Error fetching user details in header",e)}};t&&e()},[t]);let u=async()=>{try{await c.A.post("".concat("https://fcde.app","/authStatus/logout"),{},{withCredentials:!0}),a(!1),localStorage.setItem("isLoggedIn","false"),e.push("/")}catch(e){console.error("Logout failed",e)}};return(0,r.jsxs)("header",{className:"jsx-87cd0699f055b44e header",children:[(0,r.jsxs)("nav",{className:"jsx-87cd0699f055b44e header-nav",children:[(0,r.jsx)(k(),{href:"/",children:(0,r.jsx)("img",{src:"/FacadeWebLogo.png",alt:"Facade Logo",className:"jsx-87cd0699f055b44e logo"})}),(0,r.jsxs)("div",{className:"jsx-87cd0699f055b44e nav-links",children:[(0,r.jsx)(k(),{href:"/about",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e nav-link",children:"About"})}),(0,r.jsx)(k(),{href:"/posts",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e nav-link",children:"Posts"})}),(0,r.jsx)(k(),{href:"/terms",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e nav-link",children:"Terms"})}),(0,r.jsx)(k(),{href:"/searchPage",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e nav-link",children:"Search"})})]}),(0,r.jsx)("div",{className:"jsx-87cd0699f055b44e action-buttons",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:u,className:"jsx-87cd0699f055b44e logout-button",children:"Logout"}),(0,r.jsx)("div",{style:{marginLeft:"10px"},className:"jsx-87cd0699f055b44e",children:(0,r.jsx)(I.A,{userId:o,profileImage:i||void 0,profileThumbnail:d||void 0,size:48})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k(),{href:"/login",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e login-button",children:"Login"})}),(0,r.jsx)(k(),{href:"/signUpForm",children:(0,r.jsx)("a",{className:"jsx-87cd0699f055b44e signup-button",children:"Sign Up"})})]})})]}),(0,r.jsx)(_(),{id:"87cd0699f055b44e",children:".header-nav.jsx-87cd0699f055b44e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 20px}.logo.jsx-87cd0699f055b44e{width:50px;height:auto;margin:10px 0;-webkit-transition:-webkit-transform.3s ease;-moz-transition:-moz-transform.3s ease;-o-transition:-o-transform.3s ease;transition:-webkit-transform.3s ease;transition:-moz-transform.3s ease;transition:-o-transform.3s ease;transition:transform.3s ease}.logo.jsx-87cd0699f055b44e:hover{-webkit-transform:scale(1.333);-moz-transform:scale(1.333);-ms-transform:scale(1.333);-o-transform:scale(1.333);transform:scale(1.333)}.nav-links.jsx-87cd0699f055b44e{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:20px}.nav-link.jsx-87cd0699f055b44e{text-decoration:none;color:rgba(216,49,91,.75);padding:5px 10px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-transition:background-color.3s ease;-moz-transition:background-color.3s ease;-o-transition:background-color.3s ease;transition:background-color.3s ease}.nav-link.jsx-87cd0699f055b44e:hover{background-color:rgba(216,49,91,.15);color:rgba(216,49,91,.9)}.action-buttons.jsx-87cd0699f055b44e a.jsx-87cd0699f055b44e,.logout-button.jsx-87cd0699f055b44e,.login-button.jsx-87cd0699f055b44e,.signup-button.jsx-87cd0699f055b44e{text-decoration:none;margin-left:15px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;height:36px;padding:0 16px;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;font-weight:bold;-webkit-transition:-webkit-transform.2s ease,box-shadow.2s ease;-moz-transition:-moz-transform.2s ease,box-shadow.2s ease;-o-transition:-o-transform.2s ease,box-shadow.2s ease;transition:-webkit-transform.2s ease,box-shadow.2s ease;transition:-moz-transform.2s ease,box-shadow.2s ease;transition:-o-transform.2s ease,box-shadow.2s ease;transition:transform.2s ease,box-shadow.2s ease;cursor:pointer;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.action-buttons.jsx-87cd0699f055b44e a.jsx-87cd0699f055b44e:hover,.logout-button.jsx-87cd0699f055b44e:hover,.login-button.jsx-87cd0699f055b44e:hover,.signup-button.jsx-87cd0699f055b44e:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1)}.login-button.jsx-87cd0699f055b44e{background-color:rgba(216,49,91,.1);color:#D8315B;border:1px solid rgba(216,49,91,.65)}.login-button.jsx-87cd0699f055b44e:hover{background-color:rgba(216,49,91,.15);opacity:.9}.signup-button.jsx-87cd0699f055b44e{background-color:#fff;color:rgba(216,49,91,.65);border:1px solid rgba(216,49,91,.65)}.signup-button.jsx-87cd0699f055b44e:hover{background-color:#f7f7f7}.logout-button.jsx-87cd0699f055b44e{background-color:#fff;color:rgba(216,49,91,.65);border:1px solid rgba(216,49,91,.65);margin-top:4px}.logout-button.jsx-87cd0699f055b44e:hover{background-color:#f7f7f7}"})]})}a(30347),a(72130);var N=a(13768),C=a.n(N),E=a(49509);let P=e=>{let{children:t}=e;(0,w.useRouter)();let a=(0,w.usePathname)(),[d,g]=(0,s.useState)(!0),[x,p]=(0,s.useState)(!1),[m,b]=(0,s.useState)(!1),[y,_]=(0,s.useState)(!1),v=(0,s.useRef)(null);(0,s.useRef)(null);let k="https://fcde.app",I=async()=>{try{await fetch("".concat(k,"/healthWeb")),p(!1)}catch(e){p(!0)}},N=async()=>{try{let e=E.env.NEXT_PUBLIC_APP_BUILD||"1.0.0",t=localStorage.getItem("userId")||"anonymous",a=await c.A.post("".concat(k,"/api/version/check"),{buildNumber:e,userId:t});if(a.data.deactivationInfo&&a.data.deactivationInfo.isDeactivated){window.location.href="/deactivatedUser";return}a.data.passwordExpired&&(b(!0),_(!0))}catch(e){console.error("Version check error:",e)}},P=async()=>{let e=localStorage.getItem("currentCountry")||"Unknown",t=(()=>{switch(e){case"Canada":return"ca-central-1";case"Australia":return"ap-southeast-2";case"United Kingdom":return"eu-west-2";default:return"ap-northeast-2"}})();return{userId:localStorage.getItem("userId")||"anonymous",deviceInfo:{deviceType:navigator.userAgent,os:navigator.platform,appVersion:E.env.NEXT_PUBLIC_APP_VERSION||"1.0.0"},networkStatus:{isConnected:navigator.onLine,networkType:"Unknown"},locationData:{country:e,region:t},additionalContext:{sessionId:localStorage.getItem("sessionId")||"Unknown"}}},L=async e=>{try{let t=await P();await c.A.post("".concat(k,"/api/logs/error"),{...t,errorDetails:e})}catch(e){console.error("Failed to send error log:",e)}};return(0,s.useEffect)(()=>{let e=e=>{var t;L({message:e.message,stack:e.error?null===(t=e.error.stack)||void 0===t?void 0:t.slice(0,200):"No stack trace",source:"Global",timestamp:new Date().toISOString(),isFatal:!1})};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("region");if(!e)try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async t=>{let{latitude:a,longitude:r}=t.coords,s=await (0,j.LF)(a,r,k),o=s?s.country:"Unknown";e="Canada"===o?"ca-central-1":"Australia"===o?"ap-southeast-2":"United Kingdom"===o?"eu-west-2":"ap-northeast-2",localStorage.setItem("region",e)},t=>{console.error("Geolocation error:",t),e="ap-northeast-2",localStorage.setItem("region",e)}):(e="ap-northeast-2",localStorage.setItem("region",e))}catch(t){console.error("Error determining region:",t),e="ap-northeast-2",localStorage.setItem("region",e)}c.A.interceptors.request.use(t=>(t.withCredentials=!0,t.headers["x-region"]=e,t))})()},[]),(0,s.useEffect)(()=>{(async()=>{try{await Promise.all([I(),N()])}catch(e){console.error("Initialization error:",e)}finally{g(!1)}})()},[]),(0,s.useEffect)(()=>{let e=()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{I(),v.current=null},5e3)};return window.addEventListener("online",e),window.addEventListener("offline",()=>p(!0)),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",()=>p(!0))}},[]),(0,r.jsxs)("html",{lang:"en",className:C().className,children:[(0,r.jsx)(o.default,{src:"https://www.googletagmanager.com/gtag/js?id=AW-17197212587",strategy:"afterInteractive"}),(0,r.jsx)(o.default,{id:"gtag-init",strategy:"afterInteractive",children:"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){dataLayer.push(arguments);}\n          gtag('js', new Date());\n\n          gtag('config', 'AW-17197212587');\n        "}),(0,r.jsx)("body",{children:(0,r.jsx)(n.s,{children:(0,r.jsx)(u,{children:(0,r.jsxs)(i.xC,{i18n:l.Ay,children:[x&&(0,r.jsx)(h,{visible:x,onRetry:()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{I(),v.current=null},5e3)}}),y&&(0,r.jsx)(f,{visible:y,onPressChange:()=>{_(!1),window.location.href="/signInLogIn?showChangePasswordModal=true"},onClose:()=>_(!1)}),"/posts"!==a&&(0,r.jsx)(S,{}),(0,r.jsx)("main",{children:t})]})})})})]})}},11772:e=>{e.exports={container:"ProfileWithFlag_container__fXJUY",profileImage:"ProfileWithFlag_profileImage__kvu3h",gradientBorder:"ProfileWithFlag_gradientBorder__c_Y4a",flagWrapper:"ProfileWithFlag_flagWrapper__C0EJW",flagImage:"ProfileWithFlag_flagImage__mZNJt",spinner:"ProfileWithFlag_spinner__j6Bkl",spin:"ProfileWithFlag_spin__7po5D",modal:"ProfileWithFlag_modal__KzG8T"}},12554:(e,t,a)=>{Promise.resolve().then(a.bind(a,3392))},30347:()=>{},32649:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(95155),s=a(12115),o=a(23464),n=a(61065),i=a(35695),l=a(50802),c=a(7926),d=a(11772),g=a.n(d);let u=e=>"string"==typeof e&&""!==e.trim()?e.startsWith("http")||e.startsWith("/assets/")?e:"/assets/".concat(e):"/assets/Annonymous.png",x=e=>{let{userId:t,nickname:a,profileImage:d,profileThumbnail:x,countryName:p,size:h,trustBadge:m}=e,{SERVER_URL:b}=(0,n.U)(),f=(0,i.useRouter)(),[j,w]=(0,s.useState)(x||d||null),[y,_]=(0,s.useState)(p||null),[v,k]=(0,s.useState)(m||!1),[I,S]=(0,s.useState)(!1),[N,C]=(0,s.useState)(null),[E,P]=(0,s.useState)(!1),[L,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{C(localStorage.getItem("userId"))},[]),(0,s.useEffect)(()=>{let e="true"===localStorage.getItem("isLoggedIn");P(e),p&&(x||d)&&void 0!==m||!t||(async()=>{try{if(S(!0),!e){S(!1);return}let a=await o.A.get("".concat(b,"/users/country?userId=").concat(t));if(200===a.status){let e=a.data;_(e.originCountry),"string"!=typeof e.profileThumbnail&&(e.profileThumbnail=""),"string"!=typeof e.profileImage&&(e.profileImage=""),w(e.profileThumbnail||e.profileImage||""),k(e.trustBadge||!1)}else console.log("Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e)}finally{S(!1)}})()},[p,x,d,m,t,b]);let T=c.X.find(e=>e.name===y),A=T?T.flag:null,M=u(j);return I?(0,r.jsx)("div",{className:g().container,style:{width:h,height:h},children:(0,r.jsx)("div",{className:g().spinner})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{onClick:()=>{if(!E){z(!0);return}let e={userId:t,nickname:a,profileImage:d||null,profileThumbnail:x||null};t===N?f.push("/myProfile?".concat(new URLSearchParams(e).toString())):f.push("/profile?".concat(new URLSearchParams(e).toString()))},className:g().container,style:{width:h,height:h},children:[v?(0,r.jsx)("div",{className:g().gradientBorder,style:{width:h,height:h,borderRadius:h/2},children:(0,r.jsx)("img",{src:M,alt:"Profile",className:g().profileImage,style:{width:h-4,height:h-4,borderRadius:(h-4)/2}})}):(0,r.jsx)("img",{src:M,alt:"Profile",className:g().profileImage,style:{width:h,height:h,borderRadius:h/2}}),A&&(0,r.jsx)("div",{className:g().flagWrapper,style:{width:h/3+4,height:h/3+4,borderRadius:h/6+2},children:(0,r.jsx)("img",{src:A,alt:"Flag",className:g().flagImage,style:{width:h/3,height:h/3,borderRadius:h/6}})})]}),L&&(0,r.jsx)("div",{className:g().modal,children:(0,r.jsx)(l.A,{visible:!0,onLogin:()=>{z(!1),f.push("/signInLogIn")},onBrowse:()=>z(!1)})})]})}},50802:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(95155);a(12115);let s=e=>{let{visible:t,onLogin:a,onBrowse:s}=e;if(!t)return null;let o={backgroundColor:"transparent",padding:"12px 20px",border:"2px solid #0A1045",borderRadius:"30px",cursor:"pointer"},n={...o,borderColor:"#355C7D"},i={color:"#0A1045",fontSize:"16px",fontWeight:700,margin:0};return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, rgba(0, 0, 0, 0.7), rgba(50, 50, 50, 0.7))",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)("div",{style:{width:"90%",maxWidth:"500px",borderRadius:"30px",overflow:"hidden",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:(0,r.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.85)",borderRadius:"30px",padding:"30px 25px",textAlign:"center",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.35)"},children:[(0,r.jsx)("h2",{style:{fontSize:"28px",fontWeight:800,color:"#0A1045",marginBottom:"15px"},children:"Welcome to Abrody"}),(0,r.jsx)("p",{style:{fontSize:"16px",color:"#333",marginBottom:"30px",lineHeight:"24px"},children:"To see announcements and recommendations, please log in."}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[(0,r.jsx)("button",{style:o,onClick:a,children:(0,r.jsx)("span",{style:i,children:"Log In"})}),(0,r.jsx)("button",{style:n,onClick:s,children:(0,r.jsx)("span",{style:i,children:"Continue as Guest"})})]})]})})})})}},55185:e=>{e.exports={overlay:"MaintenanceModal_overlay__mpQUQ",container:"MaintenanceModal_container__JRIx_",title:"MaintenanceModal_title__Cxtzd",message:"MaintenanceModal_message__9gh38",support:"MaintenanceModal_support__UIsl5",button:"MaintenanceModal_button__STWON",buttonText:"MaintenanceModal_buttonText__TMEvk"}},72130:()=>{},94283:e=>{e.exports={container:"ErrorBoundary_container__bkBqW",text:"ErrorBoundary_text__nbkLF"}}},e=>{var t=t=>e(e.s=t);e.O(0,[6743,2521,4935,3464,6874,1218,2452,2614,8082,2533,7768,8441,1684,7358],()=>t(12554)),_N_E=e.O()}]);