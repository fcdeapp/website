(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{70:(e,t,a)=>{"use strict";a.d(t,{F:()=>n,S:()=>s});let s=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=Math.floor((Date.now()-a)/6e4),n=Math.floor(s/60),o=Math.floor(n/24);return s<1?t("just_now"):s<60?t("minutes_ago",{count:s}):n<24?t("hours_ago",{count:n}):t("days_ago",{count:o})},n=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=a-Date.now(),n=Math.floor(Math.abs(s)/6e4),o=Math.floor(n/60);return s>0?o<1?t("minutes_remaining",{count:n}):o<24?t("hours_remaining",{count:o}):t("days_remaining",{count:Math.floor(o/24)}):t("meeting_passed")}},802:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155);a(2115);let n=e=>{let{visible:t,onLogin:a,onBrowse:n}=e;if(!t)return null;let o={backgroundColor:"transparent",padding:"12px 20px",border:"2px solid #0A1045",borderRadius:"30px",cursor:"pointer"},l={...o,borderColor:"#355C7D"},r={color:"#0A1045",fontSize:"16px",fontWeight:700,margin:0};return(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, rgba(0, 0, 0, 0.7), rgba(50, 50, 50, 0.7))",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"90%",maxWidth:"500px",borderRadius:"30px",overflow:"hidden",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:(0,s.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.85)",borderRadius:"30px",padding:"30px 25px",textAlign:"center",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.35)"},children:[(0,s.jsx)("h2",{style:{fontSize:"28px",fontWeight:800,color:"#0A1045",marginBottom:"15px"},children:"Welcome to Facade"}),(0,s.jsx)("p",{style:{fontSize:"16px",color:"#333",marginBottom:"30px",lineHeight:"24px"},children:"To see announcements and recommendations, please log in."}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[(0,s.jsx)("button",{style:o,onClick:a,children:(0,s.jsx)("span",{style:r,children:"Log In"})}),(0,s.jsx)("button",{style:l,onClick:n,children:(0,s.jsx)("span",{style:r,children:"Continue as Guest"})})]})]})})})})}},833:(e,t,a)=>{Promise.resolve().then(a.bind(a,3673))},1772:e=>{e.exports={container:"ProfileWithFlag_container__fXJUY",profileImage:"ProfileWithFlag_profileImage__kvu3h",gradientBorder:"ProfileWithFlag_gradientBorder__c_Y4a",flagWrapper:"ProfileWithFlag_flagWrapper__C0EJW",flagImage:"ProfileWithFlag_flagImage__mZNJt",spinner:"ProfileWithFlag_spinner__j6Bkl",spin:"ProfileWithFlag_spin__7po5D",modal:"ProfileWithFlag_modal__KzG8T"}},2278:e=>{e.exports={chattingFormFrame:"MessageInputForm_chattingFormFrame__KQv0J",chatInput:"MessageInputForm_chatInput__ay52K",chatIcon:"MessageInputForm_chatIcon__XskHJ",photoButton:"MessageInputForm_photoButton__5Fzte",placeholderIconSpace:"MessageInputForm_placeholderIconSpace__C2Km_",sendButton:"MessageInputForm_sendButton__bOLQs",previewContainer:"MessageInputForm_previewContainer__mZrS2",previewContent:"MessageInputForm_previewContent__XawSE",previewImage:"MessageInputForm_previewImage__sQDkS",closePreviewButton:"MessageInputForm_closePreviewButton__gOVp_",closeIcon:"MessageInputForm_closeIcon___IBIO",loginOverlay:"MessageInputForm_loginOverlay__8q7XO",loginOverlayContent:"MessageInputForm_loginOverlayContent__eNRT5",loginOverlayButtons:"MessageInputForm_loginOverlayButtons__H_uSi"}},2649:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var s=a(5155),n=a(2115),o=a(3464),l=a(1065),r=a(5695),i=a(802),c=a(7926),u=a(1772),m=a.n(u);let d=e=>"string"==typeof e&&""!==e.trim()?e.startsWith("http")||e.startsWith("/assets/")?e:"/assets/".concat(e):"/assets/Annonymous.png",p=e=>{let{userId:t,nickname:a,profileImage:u,profileThumbnail:p,countryName:_,size:h,trustBadge:g}=e,{SERVER_URL:x}=(0,l.U)(),f=(0,r.useRouter)(),[j,b]=(0,n.useState)(p||u||null),[v,I]=(0,n.useState)(_||null),[y,N]=(0,n.useState)(g||!1),[C,B]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),[F,S]=(0,n.useState)(!1),[T,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{k(localStorage.getItem("userId"))},[]),(0,n.useEffect)(()=>{_&&(p||u)&&void 0!==g||!t||(async()=>{try{B(!0);let e=localStorage.getItem("token");if(!e){B(!1);return}let a=await o.A.get("".concat(x,"/users/country?userId=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(200===a.status){let e=a.data;I(e.originCountry),"string"!=typeof e.profileThumbnail&&(e.profileThumbnail=""),"string"!=typeof e.profileImage&&(e.profileImage=""),b(e.profileThumbnail||e.profileImage||""),N(e.trustBadge||!1)}else console.log("Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e)}finally{B(!1)}})()},[_,p,u,g,t,x]);let P=c.X.find(e=>e.name===v),A=P?P.flag:null,O=d(j);return((0,n.useEffect)(()=>{S(!!localStorage.getItem("token"))},[]),C)?(0,s.jsx)("div",{className:m().container,style:{width:h,height:h},children:(0,s.jsx)("div",{className:m().spinner})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{onClick:()=>{if(!F){M(!0);return}let e={userId:t,nickname:a,profileImage:u||null,profileThumbnail:p||null};t===w?f.push("/myProfile?".concat(new URLSearchParams(e).toString())):f.push("/profile?".concat(new URLSearchParams(e).toString()))},className:m().container,style:{width:h,height:h},children:[y?(0,s.jsx)("div",{className:m().gradientBorder,style:{width:h,height:h,borderRadius:h/2},children:(0,s.jsx)("img",{src:O,alt:"Profile",className:m().profileImage,style:{width:h-4,height:h-4,borderRadius:(h-4)/2}})}):(0,s.jsx)("img",{src:O,alt:"Profile",className:m().profileImage,style:{width:h,height:h,borderRadius:h/2}}),A&&(0,s.jsx)("div",{className:m().flagWrapper,style:{width:h/3+4,height:h/3+4,borderRadius:h/6+2},children:(0,s.jsx)("img",{src:A,alt:"Flag",className:m().flagImage,style:{width:h/3,height:h/3,borderRadius:h/6}})})]}),T&&(0,s.jsx)("div",{className:m().modal,children:(0,s.jsx)(i.A,{visible:!0,onLogin:()=>{M(!1),f.push("/signInLogIn")},onBrowse:()=>M(!1)})})]})}},3673:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w,dynamic:()=>B});var s=a(5155),n=a(2115),o=a(1065),l=a(1218),r=a(3464),i=a(54),c=a.n(i),u=a(5695),m=a(2278),d=a.n(m);let p=e=>{let{onSendMessage:t,showPhotoIcon:a=!0}=e,{t:r}=(0,l.Bd)(),{SERVER_URL:i}=(0,o.U)(),c=(0,u.useRouter)(),[m,p]=(0,n.useState)(""),[_,h]=(0,n.useState)(null),[g,x]=(0,n.useState)(!1),[f,j]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[I,y]=(0,n.useState)(!1),N=(0,n.useRef)(null);(0,n.useEffect)(()=>{v(!!localStorage.getItem("token"))},[]);let C=()=>{b?(m.trim()||_)&&(t({text:m.trim(),imageUri:_}),p(""),h(null),x(!1)):y(!0)},B=async()=>{N.current&&N.current.click()},w=async e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];h(URL.createObjectURL(t)),x(!0)}};return(0,s.jsxs)(s.Fragment,{children:[I&&(0,s.jsx)("div",{className:d().loginOverlay,children:(0,s.jsxs)("div",{className:d().loginOverlayContent,children:[(0,s.jsx)("p",{children:r("login_required")}),(0,s.jsxs)("div",{className:d().loginOverlayButtons,children:[(0,s.jsx)("button",{onClick:()=>{y(!1),c.push("/signInLogIn")},children:r("login")}),(0,s.jsx)("button",{onClick:()=>y(!1),children:r("browse")})]})]})}),g&&_&&(0,s.jsx)("div",{className:d().previewContainer,children:(0,s.jsxs)("div",{className:d().previewContent,children:[(0,s.jsx)("img",{src:_,alt:"Preview",className:d().previewImage}),(0,s.jsx)("button",{className:d().closePreviewButton,onClick:()=>h(null),children:(0,s.jsx)("img",{src:"/assets/delete-icon-big.png",alt:"Close Preview",className:d().closeIcon})})]})}),(0,s.jsxs)("div",{className:d().chattingFormFrame,children:[a?(0,s.jsx)("button",{className:d().photoButton,onClick:B,children:(0,s.jsx)("img",{src:"/assets/message-photo-icon.png",alt:"Select Photo",className:d().chatIcon})}):(0,s.jsx)("div",{className:d().placeholderIconSpace}),(0,s.jsx)("input",{className:d().chatInput,placeholder:r(b?"messageInput.placeholder":"messageInput.login_required"),value:m,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),(0,s.jsx)("button",{className:d().sendButton,onClick:C,children:(0,s.jsx)("img",{src:"/assets/message-send-icon.png",alt:"Send",className:d().chatIcon})})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",ref:N,style:{display:"none"},onChange:w})]})};var _=a(2649),h=a(5362),g=a.n(h),x=a(70);function f(e){return!!(e&&(e.startsWith("http")||e.startsWith("https")))}let j=e=>{let{content:t,nickname:a,isMine:i,timestamp:c,profileImage:m,profileThumbnail:d,userId:p,imageUrl:h,thumbnailUrl:j,containerStyle:b,isImageUploading:v=!1,messageType:I,_id:y,chatContextId:N,onDelete:C}=e,{t:B}=(0,l.Bd)(),{SERVER_URL:w}=(0,o.U)();(0,u.useRouter)();let[k,F]=(0,n.useState)(!1),[S,T]=(0,n.useState)(!1),[M,P]=(0,n.useState)(t),[A,O]=(0,n.useState)(!1),[E,R]=(0,n.useState)(!1),[L,W]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f(j||h)?O(!0):O(!1),R(!1)},[j,h]);let z=async()=>{if(!N||!y||!I)return;let e="";"normal"===I?e="".concat(w,"/chats/").concat(N,"/message/").concat(y):"buddy"===I?e="".concat(w,"/buddy-chat/").concat(N,"/message/").concat(y):"regional"===I&&(e="".concat(w,"/district-chat/").concat(N,"/message/").concat(y));try{let t=localStorage.getItem("token"),a=await r.A.patch(e,{message:M},{headers:{Authorization:"Bearer ".concat(t)}});200===a.status&&T(!1)}catch(e){console.error("Error updating message:",e)}},D=async()=>{if(!N||!y||!I)return;let e="";"normal"===I?e="".concat(w,"/chats/").concat(N,"/message/").concat(y):"buddy"===I?e="".concat(w,"/buddy-chat/").concat(N,"/message/").concat(y):"regional"===I&&(e="".concat(w,"/district-chat/").concat(N,"/message/").concat(y));try{let t=localStorage.getItem("token"),a=await r.A.delete(e,{headers:{Authorization:"Bearer ".concat(t)}});200===a.status&&C&&y&&C(y)}catch(e){console.error("Error deleting message:",e)}};return(0,s.jsxs)("div",{className:"".concat(i?g().myContainer:g().friendContainer),style:b,onContextMenu:e=>{e.preventDefault(),i&&F(e=>!e)},onClick:()=>{k&&F(!1)},children:[!i&&(0,s.jsx)(_.A,{userId:p||"",nickname:a,profileImage:m||void 0,profileThumbnail:d||void 0,countryName:"",size:40}),(0,s.jsx)("div",{className:i?g().myBubble:g().friendBubble,children:S?(0,s.jsx)("input",{className:g().editTextInput,value:M,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z()},autoFocus:!0}):v?(0,s.jsx)("div",{className:g().loadingWrapper,children:(0,s.jsx)("div",{className:g().spinner})}):f(j||h)?(0,s.jsxs)("div",{className:g().imageWrapper,onClick:()=>{W(!0),k&&F(!1)},onContextMenu:e=>{e.preventDefault(),F(e=>!e)},children:[(0,s.jsx)("img",{src:j||h||"",alt:"Chat",className:g().chatImage,onLoad:()=>O(!1),onError:()=>{O(!1),R(!0)}}),A&&(0,s.jsx)("div",{className:g().overlay,children:(0,s.jsx)("div",{className:g().spinner})}),E&&(0,s.jsx)("p",{className:g().loadErrorText,children:B("image_load_failed")})]}):(0,s.jsx)("p",{className:i?g().myMessageText:g().friendMessageText,children:t||B("no_content")})}),!k&&(0,s.jsx)("span",{className:i?g().messageTimeRight:g().messageTimeLeft,children:(0,x.S)(c,B)}),i&&k&&(0,s.jsxs)("div",{className:g().optionsContainer,children:[!f(j||h)&&(0,s.jsx)("button",{className:g().optionButton,onClick:()=>{T(!0),F(!1)},children:B("message_edit")}),(0,s.jsx)("button",{className:g().optionButton,onClick:D,children:B("message_delete")})]}),L&&(0,s.jsx)("div",{className:g().modalOverlay,onClick:()=>W(!1),children:(0,s.jsxs)("div",{className:g().imageViewer,children:[(0,s.jsx)("button",{className:g().closeButton,onClick:()=>W(!1),children:B("close")}),(0,s.jsx)("img",{src:h||j||"",alt:"Zoomed Chat",className:g().zoomedImage})]})})]})};var b=a(802),v=a(9953),I=a.n(v);let y=e=>{let{visible:t,onClose:a,onSubmit:o,postId:r,targetUserId:i}=e,{t:c}=(0,l.Bd)(),[u,m]=(0,n.useState)(""),d=e=>e.length<=4?e:e.slice(0,e.length-4)+"****";return t?(0,s.jsx)("div",{className:I().modalOverlay,onClick:a,children:(0,s.jsxs)("div",{className:I().modalContainer,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h2",{className:I().modalHeader,children:c("report_reason","Report Reason")}),r&&(0,s.jsxs)("div",{className:I().infoContainer,children:[(0,s.jsxs)("span",{className:I().infoLabel,children:[c("post_id","Post ID"),": "]}),(0,s.jsx)("span",{className:I().infoText,children:d(r)})]}),i&&(0,s.jsxs)("div",{className:I().infoContainer,children:[(0,s.jsxs)("span",{className:I().infoLabel,children:[c("target_user_id","Reported User ID"),": "]}),(0,s.jsx)("span",{className:I().infoText,children:d(i)})]}),(0,s.jsx)("textarea",{className:I().modalInput,placeholder:c("enter_report_reason","Type your report reason here..."),value:u,onChange:e=>m(e.target.value),rows:4}),(0,s.jsxs)("div",{className:I().modalButtonContainer,children:[(0,s.jsx)("button",{className:I().primaryButton,onClick:()=>{if(!u.trim()){window.alert(c("error")+": "+c("report_reason_required"));return}o(u),m("")},children:(0,s.jsx)("span",{className:I().buttonText,children:c("submit","Submit")})}),(0,s.jsx)("button",{className:I().cancelButton,onClick:a,children:(0,s.jsx)("span",{className:I().buttonText,children:c("cancel","Cancel")})})]})]})}):null};var N=a(4914),C=a.n(N);let B="force-dynamic",w=()=>{let{SERVER_URL:e}=(0,o.U)(),{t}=(0,l.Bd)(),a=(0,u.useRouter)(),[i,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{m(Object.fromEntries(new URLSearchParams(window.location.search).entries()))},[]);let d=null!==i,{id:h="",author:g="Anonymous",time:x="",meetingTime:f="",category:v="",title:I="",content:N="",likes:B="0",comments:w="0",visitors:k="0",recruitmentCount:F="0",applicantsCount:S="0",profileImage:T="",profileThumbnail:M="",image:P="",thumbnail:A="",nicknameOption:O="",meetingPlace:E="",meetingCity:R="",meetingCountry:L="",mapboxImage:W="",isBuddyPost:z="false",applicants:D="0"}=i||{};if(!h)return(0,s.jsx)("div",{children:"Loading..."});let H=Number(B),U=Number(w),J=Number(k),q=Number(F),G=Number(S),K=D?Number(D):G,[X,Q]=(0,n.useState)(null),[Y,V]=(0,n.useState)(K),[Z,$]=(0,n.useState)(!1),[ee,et]=(0,n.useState)(!1),[ea,es]=(0,n.useState)(""),[en,eo]=(0,n.useState)(""),[el,er]=(0,n.useState)(""),[ei,ec]=(0,n.useState)([]),[eu,em]=(0,n.useState)(!1),[ed,ep]=(0,n.useState)(!1),[e_,eh]=(0,n.useState)(""),[eg,ex]=(0,n.useState)(!1),[ef,ej]=(0,n.useState)(H),[eb,ev]=(0,n.useState)(J),[eI,ey]=(0,n.useState)(U),[eN,eC]=(0,n.useState)(!1),[eB,ew]=(0,n.useState)(!1),[ek,eF]=(0,n.useState)(g),[eS,eT]=(0,n.useState)(O),[eM,eP]=(0,n.useState)(T),[eA,eO]=(0,n.useState)(M),[eE,eR]=(0,n.useState)(P),[eL,eW]=(0,n.useState)(A),[ez,eD]=(0,n.useState)([]),[eH,eU]=(0,n.useState)(!1),eJ="true"===z,eq=eJ?"".concat(e,"/buddy-post"):"".concat(e,"/posts"),[eG,eK]=(0,n.useState)(!1),[eX,eQ]=(0,n.useState)(null),[eY,eV]=(0,n.useState)(null),[eZ,e$]=(0,n.useState)(null),[e0,e1]=(0,n.useState)(null),[e2,e5]=(0,n.useState)(!1),[e3,e4]=(0,n.useState)(!1),[e6,e8]=(0,n.useState)(eL||""),[e7,e9]=(0,n.useState)(!1),[te,tt]=(0,n.useState)(!1),[ta,ts]=(0,n.useState)(!1),[tn,to]=(0,n.useState)(0),tl=()=>localStorage.getItem("token"),tr=Math.min(1,tn/120);(0,n.useEffect)(()=>{{let e=new URLSearchParams(window.location.search).get("ref");e&&Q(e)}},[]);let ti=()=>{let t="".concat(e,"/posts/").concat(h,"?ref=").concat(ea),a="".concat(window.location.origin,"/post/").concat(h,"?ref=").concat(ea);return console.log("web link:",t),console.log("app link:",a),{postLink:t,appLink:a}},tc=async()=>{let{postLink:e}=ti();try{await navigator.clipboard.writeText(e),window.alert("Link copied! Share with your friends."),navigator.share&&await navigator.share({url:e})}catch(e){console.error("Error sharing post:",e)}};(0,n.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{e$(e.coords.latitude),e1(e.coords.longitude)},e=>{console.error("Error fetching current location:",e)},{enableHighAccuracy:!0,timeout:2e4})},[]);let tu=()=>{let e;if(null===eX||null===eY||null===eZ||null===e0)return"";let t=eZ*Math.PI/180,a=eX*Math.PI/180,s=Math.sin((eX-eZ)*Math.PI/180/2)**2+Math.cos(t)*Math.cos(a)*Math.sin((eY-e0)*Math.PI/180/2)**2,n=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371e3,o=navigator.language;if(!o.includes("en-US")&&!o.includes("en-GB"))return(e=n/1e3)>=10?"".concat(Math.round(e),"km"):e>=1?"".concat(e.toFixed(1),"km"):"".concat(Math.round(n),"m");if((e=n/1609.34)>=6.214)return"".concat(Math.round(e),"mi");if(e>=.6214)return"".concat(e.toFixed(1),"mi");{let t=1609.34*e;return"".concat(Math.round(t),"m")}};(0,n.useEffect)(()=>{(async()=>{let t=tl();if(t)try{let{data:a,status:s}=await r.A.get("".concat(e,"/users/me"),{headers:{Authorization:"Bearer ".concat(t)}});s>=200&&s<300&&(es(a.userId),a&&a.userId&&D&&$(String(D).includes(a.userId)))}catch(e){console.error("Error fetching user data:",e)}})()},[D,e]),(0,n.useEffect)(()=>{(async()=>{let t=tl();if(t&&D)try{let a=String(D).split(","),{data:s,status:n}=await r.A.post("".concat(e,"/users/profiles"),{userIds:a},{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});n>=200&&n<300?eD(s.users):console.error("Failed to fetch applicants profiles:",n)}catch(e){console.error("Error fetching applicants profiles:",e)}})()},[D,e]);let tm=async()=>{if(!h){console.error("Error: Missing post ID. Cannot fetch post data."),window.alert(t("error")+": Missing post ID");return}let e=tl();try{let{data:t,status:a}=await r.A.get("".concat(eq,"/").concat(h),{headers:{Authorization:e?"Bearer ".concat(e):""}});ec(t.commentList),ej(t.likes),ev(t.visitors),ey(t.comments),ex(t.likedByUser),eF(t.author),eo(t.userId),eT(t.nicknameOption),eP(t.profileImage),eO(t.profileThumbnail),eU(t.isRecruitmentComplete),eR(t.image),t.meetingLatitude&&eQ(t.meetingLatitude),t.meetingLongitude&&eV(t.meetingLongitude)}catch(e){console.error("Error fetching post data:",e.message),window.alert(t("error")+": "+t("fetch_post_error"))}},td=async()=>{let e=tl();if(e)try{let{data:t,status:a}=await r.A.post("".concat(eq,"/").concat(h,"/visit"),null,{headers:{Authorization:"Bearer ".concat(e)}});if(a>=200&&a<300)ev(t.visitors);else throw Error("Failed to update visitors")}catch(e){console.error("Error updating visitors:",e)}};(0,n.useEffect)(()=>{i&&i.id&&(tm(),td())},[i]);let tp=async()=>{let e=tl();if(e&&!ee){et(!0),$(!Z),V(Z?Y-1:Y+1),Z?eD(ez.filter(e=>e.userId!==ea)):eD([...ez,{userId:ea,profileImage:eM,profileThumbnail:eA}]);try{let t=await (0,r.A)({url:"".concat(eq,"/").concat(h,"/").concat(Z?"removeApplicant":"addApplicant"),method:Z?"DELETE":"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},data:{userId:ea}});if(t.status>=200&&t.status<300)V(t.data.applicantsCount),$(!Z),tm();else throw Error("Application update failed")}catch(e){$(!Z),V(Z?Y+1:Y-1),eD(Z?[...ez,{userId:ea,profileImage:eM,profileThumbnail:eA}]:ez.filter(e=>e.userId!==ea)),console.error("Error ".concat(Z?"removing":"adding"," applicant:"),e),window.alert(t("error")+": "+t("application_error"))}finally{et(!1)}}},t_="AI"===eS?q>0?Y/q:0:(Y+1)/(q+1);(0,n.useEffect)(()=>{tt(!!tl())},[]),(0,n.useCallback)(()=>{ew(!0),tm().finally(()=>ew(!1))},[]);let th=async()=>{if(!te){ts(!0);return}let e=tl();if(e)try{let{data:t,status:a}=await r.A.post("".concat(eq,"/").concat(h,"/like"),null,{headers:{Authorization:"Bearer ".concat(e)}});if(a>=200&&a<300)ej(t.likes),ex(!eg),tm();else throw Error("Failed to update likes")}catch(e){console.error("Error liking post:",e)}},tg=async a=>{if(a.trim()){let s=tl();if(s)try{let{data:n,status:o}=await r.A.get("".concat(e,"/users/me"),{headers:{Authorization:"Bearer ".concat(s)}});if(o<200||o>=300)throw Error("Error fetching user information.");let l={author:n.nickname,userId:n.userId,time:new Date().toISOString(),content:a,profileImage:n.profileImage,profileThumbnail:n.profileThumbnail},{status:i}=await r.A.post("".concat(eq,"/").concat(h,"/comment"),l,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});i>=200&&i<300?(ec([...ei,l]),er(""),ey(eI+1),eC(!0),tm()):window.alert(t("error")+": "+t("add_comment_error"))}catch(e){console.error("Error adding comment:",e),window.alert(t("error")+": "+t("add_comment_error"))}}},tx=async()=>{try{let e=tl();if(!e)return;let{status:s}=await r.A.delete("".concat(eq,"/").concat(h,"/delete"),{headers:{Authorization:"Bearer ".concat(e)}});s>=200&&s<300?(window.alert(t("delete_success")+": "+t("delete_success_message")),a.back()):window.alert(t("error")+": "+t("delete_error"))}catch(e){console.error("Error deleting post:",e.message)}},tf=()=>{em(!eu)},tj=(e,t)=>(0,s.jsx)(j,{content:e.content,isMine:e.userId===ea,timestamp:e.time,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,userId:e.userId},t),tb=async()=>{if(!e_.trim()){window.alert(t("error")+": "+t("report_reason_required"));return}try{let a=tl();if(!a){window.alert(t("error")+": "+t("login_required"));return}let s={reason:e_,...h&&{postId:h},...en&&{targetUserId:en}},{status:n}=await r.A.post("".concat(e,"/report/post"),s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});n>=200&&n<300?(window.alert(t("report_success")+": "+t("report_success_message")),ep(!1),eh(""),tm()):window.alert(t("error")+": "+t("report_error"))}catch(e){console.error("Error reporting post:",e.message),window.alert(t("error")+": "+t("report_error"))}},tv=async()=>{let e={postId:h,author:ek,userId:en,time:x,meetingTime:f,meetingPlace:E,meetingCity:R,meetingCountry:L,category:v,title:I,content:N,likes:ef,comments:eI,visitors:eb,profileImage:eM,profileThumbnail:eA,image:eE,mapboxImage:W,recruitmentCount:q,applicantsCount:Y,applicants:Y,visitedUsers:ez.map(e=>e.userId),likedUsers:eg?[ea]:[],commentList:ei,nicknameOption:eS,isBuddyPost:eJ};try{let a=localStorage.getItem("bookmarkedPosts"),s=a?JSON.parse(a):[],n=[e,...s];localStorage.setItem("bookmarkedPosts",JSON.stringify(n)),tm(),window.alert(t("bookmark_success")+": "+t("bookmark_success_message"))}catch(e){console.error("Failed to bookmark the post",e.message),window.alert(t("error")+": "+t("bookmark_error"))}},tI=()=>{e5(!e2)},ty=async()=>{let e=tl();try{let{data:a,status:s}=await r.A.post("".concat(eq,"/").concat(h,"/completeRecruitment"),null,{headers:{Authorization:"Bearer ".concat(e)}});s>=200&&s<300?(window.alert(t("recruitment_complete")+": "+t("recruitment_complete_message")),eU(!0),tm()):window.alert(t("error")+": "+t("recruitment_error"))}catch(e){console.error("Error marking recruitment as complete:",e)}},tN=(0,n.useCallback)(c().debounce(()=>{tp()},1e3,{leading:!0,trailing:!1}),[]),tC=(0,n.useCallback)(c().debounce(()=>{ty()},1e3,{leading:!0,trailing:!1}),[]);return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:d?(0,s.jsxs)("div",{className:C().fullpost,children:[(0,s.jsx)("div",{className:C().fullPostHeaderArea,style:{opacity:tr,transform:"translateY(".concat(30-tn/120*30,"px)")},children:(0,s.jsxs)("div",{className:C().fullPostHeader,children:[(0,s.jsx)("button",{className:C().iconWrapper,onClick:()=>a.back(),children:(0,s.jsx)("img",{className:C().iconWrapper,src:"/assets/BackIcon.png",alt:"Back"})}),(0,s.jsx)("img",{className:C().logoImage,src:"/assets/Owl-icon-pink.png",alt:"Logo"}),(0,s.jsx)("button",{className:C().iconWrapper,onClick:()=>{te?tf():ts(!0)},children:(0,s.jsx)("img",{src:"/assets/full-post-menu-icon.png",className:C().menuIcon,alt:"Menu"})})]})}),(0,s.jsx)("div",{className:C().scrollContainer,onScroll:e=>{to(e.currentTarget.scrollTop)},children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:C().heroContainer,children:[(0,s.jsx)("img",{src:e6||"/assets/leire-cavia-S93RK176PuA-unsplash.jpg",className:C().heroImage,alt:"Hero",onLoad:()=>{e4(!0),e8(eE||"")},onError:e=>console.error("Failed to load image:",e)}),(0,s.jsx)("div",{className:C().heroGradient}),(0,s.jsx)("button",{className:C().backButton,onClick:()=>a.back(),children:(0,s.jsx)("img",{src:"/assets/back-light.png",className:C().backButtonIcon,alt:"Back"})}),(0,s.jsx)("button",{className:C().menuButton,onClick:tf,children:(0,s.jsx)("img",{src:"/assets/menu-light.png",className:C().menuButtonIcon,alt:"Menu"})}),(0,s.jsxs)("div",{className:C().heroTextOverlay,children:[(0,s.jsx)("button",{onClick:()=>e9(!e7),children:(0,s.jsx)("h1",{className:C().heroTitle,style:{display:"-webkit-box",WebkitLineClamp:e7?"none":2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:I})}),(0,s.jsx)("p",{className:C().heroCategory,children:t("topics.".concat(v))})]})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsx)("div",{className:C().recruitmentInfoContainer,children:(0,s.jsxs)("div",{className:C().recruitmentInfo,children:[(0,s.jsx)("p",{className:C().recruitmentText,children:"AI"===eS?"".concat(Y," out of ").concat(q," applied"):"".concat(Y+1," out of ").concat(q+1," applied")}),eH||Y>=q?(0,s.jsx)("p",{className:C().recruitmentCompleteText,children:t("recruitment_status_complete")}):(0,s.jsx)("div",{className:C().circleContainer,children:(0,s.jsx)("div",{className:C().circle,children:(0,s.jsxs)("span",{children:[Math.round(100*t_),"%"]})})})]})}),eH?(0,s.jsx)("button",{className:C().applyButtonComplete,disabled:!0,children:t("recruitment_status_complete")}):ea===en?(0,s.jsx)("button",{className:C().applyButton,onClick:tC,children:t("complete_recruitment")}):(0,s.jsx)("button",{className:"".concat(C().applyButton," ").concat(Z||Y>=q?C().disabledButton:""),onClick:tN,disabled:ee||Y>=q,children:ee?t("processing"):Z?t("cancel_application"):Y>=q?t("recruitment_status_complete"):t("apply")})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsxs)("div",{className:C().authorInformation,children:["AI"===eS?(0,s.jsx)("img",{className:C().friendProfileImage,src:"/assets/AI.png",alt:"AI"}):(0,s.jsx)(_.A,{userId:en,profileImage:eM,profileThumbnail:eA,size:48}),(0,s.jsxs)("div",{className:C().author,children:[(0,s.jsx)("p",{className:C().authorText,children:ek}),(0,s.jsxs)("p",{className:C().timeCategoryText,children:[t("time"),": ",x," \xb7 ",t("topics.".concat(v))]})]})]}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsx)("p",{className:C().textContent,children:N})}),(0,s.jsxs)("div",{className:C().postInformation,children:[(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:"/assets/eye-colored.png",className:C().icon,alt:"Views"}),(0,s.jsx)("p",{className:C().iconText,children:eb})]}),(0,s.jsx)("button",{onClick:th,className:C().iconButton,children:(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:eg?"/assets/like-colored.png":"/assets/like-icon.png",className:C().icon,alt:"Like"}),(0,s.jsx)("p",{className:C().iconText,children:ef})]})}),(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:eN?"/assets/comment-colored.png":"/assets/comment-icon.png",className:C().icon,alt:"Comment"}),(0,s.jsx)("p",{className:C().iconText,children:eI})]})]})]}),(0,s.jsxs)("div",{className:C().fullApplicantsProfile,children:[(0,s.jsx)("div",{className:C().fullApplicants,children:(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/participants-title-icon.png",className:C().mapIcon,alt:"Applicants"}),(0,s.jsxs)("p",{className:C().fullCommentsTitle,children:[t("applicants_profile")," ",ez.length]})]})}),ez.length>0&&(0,s.jsx)("div",{className:C().applicantsContainer,children:ez.map((e,t)=>(0,s.jsx)(_.A,{userId:e.userId,nickname:e.nickname,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,size:50},t))})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/map-colored.png",className:C().mapIcon,alt:"Map"}),(0,s.jsx)("p",{className:C().fullPostTitle,children:E})]}),eX&&eY?(0,s.jsx)("div",{className:C().fullImage,children:(0,s.jsxs)("button",{className:C().mapPreviewContainer,onClick:tI,children:[(0,s.jsx)("img",{src:"/assets/mapComponent.png",className:C().mapImage,alt:"Map Preview"}),(0,s.jsxs)("div",{className:C().mapOverlay,children:[(0,s.jsxs)("p",{className:C().overlayCityCountry,children:[R,", ",L]}),(0,s.jsxs)("p",{className:C().overlayDistance,children:[t("distance"),": ",tu()]})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().fullPostTitle,children:[R,", ",L]})}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().distanceText,children:[t("distance"),": ",tu()]})})]}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().fullPostTitle,children:[R,", ",L]})}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().distanceText,children:[t("distance"),": ",tu()]})})]}),e2&&(0,s.jsxs)("div",{className:C().fullScreenMapContainer,children:[(0,s.jsx)("div",{className:C().fullScreenMap,children:(0,s.jsx)("iframe",{title:"Full Screen Map",src:"https://www.google.com/maps?q=".concat(eX,",").concat(eY,"&z=15&output=embed"),width:"100%",height:"100%",style:{border:0}})}),(0,s.jsx)("button",{className:C().mapBackButton,onClick:tI,children:(0,s.jsx)("img",{src:"/assets/back-light.png",className:C().mapBackButtonIcon,alt:"Back"})}),(0,s.jsxs)("div",{className:C().mapInfoOverlay,children:[eE&&(0,s.jsx)("img",{src:eE,className:C().mapPostImage,alt:"Post"}),(0,s.jsx)("p",{className:C().mapInfoPlace,children:E}),(0,s.jsxs)("p",{className:C().mapInfoLocation,children:[R,", ",L]}),(0,s.jsxs)("p",{className:C().mapInfoDistance,children:[t("distance"),": ",tu()]})]}),(0,s.jsx)("button",{className:C().reduceButton,onClick:tI,children:(0,s.jsx)("p",{className:C().reduceButtonText,children:t("reduce")})})]}),(0,s.jsxs)("div",{className:C().fullComments,children:[(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/comment-title-icon.png",className:C().mapIcon,alt:"Comments"}),(0,s.jsxs)("p",{className:C().fullCommentsTitle,children:[t("comments")," ",eI]})]}),eI>0&&(0,s.jsx)("div",{className:C().commentList,children:ei.map((e,t)=>tj(e,t))})]})]})}),(0,s.jsx)("div",{className:C().messageInputForm,children:(0,s.jsx)(p,{onSendMessage:e=>{tg(e.text)},showPhotoIcon:!1})}),(0,s.jsx)(y,{visible:ed,onClose:()=>ep(!1),onSubmit:tb,postId:h,targetUserId:en}),eu&&(0,s.jsx)("div",{className:C().menuOverlay,onClick:tf,children:(0,s.jsxs)("div",{className:C().menuContainer,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:C().menuItem,onClick:tf,children:(0,s.jsx)("img",{src:"/assets/delete-icon-big.png",className:C().menuIcon,alt:"Close"})}),ea===en&&(0,s.jsx)("button",{className:C().menuItem,onClick:tx,children:(0,s.jsx)("span",{className:C().menuText,children:t("delete")})}),ea!==en&&(0,s.jsx)("button",{className:C().menuItem,onClick:()=>{em(!1),ep(!ed)},children:(0,s.jsx)("span",{className:C().menuText,children:t("report")})}),(0,s.jsx)("button",{className:C().menuItem,onClick:tc,children:(0,s.jsx)("span",{className:C().menuText,children:t("share")})}),(0,s.jsx)("button",{className:C().menuItem,onClick:tv,children:(0,s.jsx)("span",{className:C().menuText,children:t("bookmark")})})]})}),ta&&(0,s.jsx)("div",{className:C().modalOverlay,children:(0,s.jsx)(b.A,{visible:!0,onLogin:()=>{ts(!1),a.push("/signin")},onBrowse:()=>{ts(!1)}})})]}):(0,s.jsx)("div",{children:"Loading..."})})}},4914:e=>{e.exports={fullpost:"Fullpost_fullpost__RAWXY",fullPostHeaderArea:"Fullpost_fullPostHeaderArea__IZ_ww",fullPostHeader:"Fullpost_fullPostHeader__oMDDi",iconWrapper:"Fullpost_iconWrapper__jQlsF",mapIcon:"Fullpost_mapIcon__vjSzy",mainLogo:"Fullpost_mainLogo__MRieQ",logoImage:"Fullpost_logoImage__HlTw9",menuIcon:"Fullpost_menuIcon__rtQ8M",scrollContainer:"Fullpost_scrollContainer__CTDOm",heroContainer:"Fullpost_heroContainer__TWV0G",heroImage:"Fullpost_heroImage__qiHfb",heroGradient:"Fullpost_heroGradient__f4Jls",backButton:"Fullpost_backButton__SLaDd",backButtonIcon:"Fullpost_backButtonIcon__PmKiX",menuButton:"Fullpost_menuButton____Sow",menuButtonIcon:"Fullpost_menuButtonIcon__EdOR5",heroTextOverlay:"Fullpost_heroTextOverlay__ENo_q",heroTitle:"Fullpost_heroTitle__LqI2K",heroCategory:"Fullpost_heroCategory__M1rd_",fullPostMainFrame:"Fullpost_fullPostMainFrame__vt_x4",recruitmentInfoContainer:"Fullpost_recruitmentInfoContainer___9XAd",recruitmentInfo:"Fullpost_recruitmentInfo__IrrGr",recruitmentText:"Fullpost_recruitmentText__2GnwQ",recruitmentCompleteText:"Fullpost_recruitmentCompleteText__x8_6D",circleContainer:"Fullpost_circleContainer__UYcWK",circle:"Fullpost_circle__wxhKc",applyButton:"Fullpost_applyButton__jFyGm",applyButtonComplete:"Fullpost_applyButtonComplete__r4n5d",applyButtonText:"Fullpost_applyButtonText__98pkZ",disabledButton:"Fullpost_disabledButton__aCYAR",loadingContainer:"Fullpost_loadingContainer__FDqqL",authorInformation:"Fullpost_authorInformation__kQDGf",friendProfileImage:"Fullpost_friendProfileImage__8w6Vv",authorText:"Fullpost_authorText__Mz7Je",author:"Fullpost_author__cN6DB",timeCategoryText:"Fullpost_timeCategoryText__9_kgz",fullPostContents:"Fullpost_fullPostContents__4iWG1",textContent:"Fullpost_textContent__CzA6w",postInformation:"Fullpost_postInformation__tTDEQ",iconInfo:"Fullpost_iconInfo__h23UF",iconText:"Fullpost_iconText__jaA93",icon:"Fullpost_icon__nKk5M",fullApplicantsProfile:"Fullpost_fullApplicantsProfile__Bjgoo",fullMapContents:"Fullpost_fullMapContents__hREfS",fullCommentsTitle:"Fullpost_fullCommentsTitle__a83Td",distanceText:"Fullpost_distanceText__vCh3n",messageInputForm:"Fullpost_messageInputForm__bHhBm",mapPreviewContainer:"Fullpost_mapPreviewContainer__5vbgz",mapImage:"Fullpost_mapImage__WtK34",mapOverlay:"Fullpost_mapOverlay__YWT6b",overlayCityCountry:"Fullpost_overlayCityCountry__Xf53D",overlayDistance:"Fullpost_overlayDistance__5IzJ4",fullPostTitle:"Fullpost_fullPostTitle__lrRoX",fullComments:"Fullpost_fullComments__gSY91",applicantsContainer:"Fullpost_applicantsContainer__POVa1",menuOverlay:"Fullpost_menuOverlay___7zJy",menuContainer:"Fullpost_menuContainer__hyohv",menuItem:"Fullpost_menuItem__u4sER",menuText:"Fullpost_menuText__2GP_J",modalOverlay:"Fullpost_modalOverlay__3V46b",fullScreenMapContainer:"Fullpost_fullScreenMapContainer__jat5k",fullScreenMap:"Fullpost_fullScreenMap__NH45Q",mapBackButton:"Fullpost_mapBackButton__BR0oi",mapBackButtonIcon:"Fullpost_mapBackButtonIcon__QTENc",mapInfoOverlay:"Fullpost_mapInfoOverlay__HS5x9",mapInfoPlace:"Fullpost_mapInfoPlace__agmu6",mapInfoLocation:"Fullpost_mapInfoLocation__zLtch",mapInfoDistance:"Fullpost_mapInfoDistance__Ar1qp",reduceButton:"Fullpost_reduceButton__O_nta",reduceButtonText:"Fullpost_reduceButtonText__BdSrU",commentList:"Fullpost_commentList__iMerQ",iconButton:"Fullpost_iconButton__usLr1"}},5362:e=>{e.exports={myContainer:"MessageBubble_myContainer__YONHp",friendContainer:"MessageBubble_friendContainer__ZiduA",myBubble:"MessageBubble_myBubble__UhB3M",friendBubble:"MessageBubble_friendBubble__lVCA7",myMessageText:"MessageBubble_myMessageText__v0XGx",friendMessageText:"MessageBubble_friendMessageText__IErow",messageTimeRight:"MessageBubble_messageTimeRight__h7joM",messageTimeLeft:"MessageBubble_messageTimeLeft__hKMXY",optionsContainer:"MessageBubble_optionsContainer__jmvS6",optionButton:"MessageBubble_optionButton__HC0_J",editTextInput:"MessageBubble_editTextInput___Nw_q",imageWrapper:"MessageBubble_imageWrapper__FYXm2",overlay:"MessageBubble_overlay__4_UHa",loadErrorText:"MessageBubble_loadErrorText__4_obs",chatImage:"MessageBubble_chatImage__Osjwf",loadingWrapper:"MessageBubble_loadingWrapper__MMliA",buttonRow:"MessageBubble_buttonRow__AZmeW",modalOverlay:"MessageBubble_modalOverlay__lVG2u",imageViewer:"MessageBubble_imageViewer__M7erh",closeButton:"MessageBubble_closeButton__F_ttY",closeButtonText:"MessageBubble_closeButtonText__gE0er",zoomedImage:"MessageBubble_zoomedImage__ZbdIt"}},9953:e=>{e.exports={modalOverlay:"ReportOverlay_modalOverlay__M8vP_",modalContainer:"ReportOverlay_modalContainer__pWJHe",modalHeader:"ReportOverlay_modalHeader__yl8pw",infoContainer:"ReportOverlay_infoContainer__IJi59",infoLabel:"ReportOverlay_infoLabel__vRJyv",infoText:"ReportOverlay_infoText__5kMti",modalInput:"ReportOverlay_modalInput__h5dhH",modalButtonContainer:"ReportOverlay_modalButtonContainer__B47tu",primaryButton:"ReportOverlay_primaryButton__12taJ",cancelButton:"ReportOverlay_cancelButton__6n_XM",buttonText:"ReportOverlay_buttonText__73ko4"}}},e=>{var t=t=>e(e.s=t);e.O(0,[577,195,935,218,794,82,441,684,358],()=>t(833)),_N_E=e.O()}]);