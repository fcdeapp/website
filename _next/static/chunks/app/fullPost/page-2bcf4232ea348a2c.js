(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{70:(e,t,a)=>{"use strict";a.d(t,{F:()=>o,S:()=>s});let s=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=Math.floor((Date.now()-a)/6e4),o=Math.floor(s/60),n=Math.floor(o/24);return s<1?t("just_now"):s<60?t("minutes_ago",{count:s}):o<24?t("hours_ago",{count:o}):t("days_ago",{count:n})},o=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=a-Date.now(),o=Math.floor(Math.abs(s)/6e4),n=Math.floor(o/60);return s>0?n<1?t("minutes_remaining",{count:o}):n<24?t("hours_remaining",{count:n}):t("days_remaining",{count:Math.floor(n/24)}):t("meeting_passed")}},802:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(5155);a(2115);let o=e=>{let{visible:t,onLogin:a,onBrowse:o}=e;if(!t)return null;let n={backgroundColor:"transparent",padding:"12px 20px",border:"2px solid #0A1045",borderRadius:"30px",cursor:"pointer"},l={...n,borderColor:"#355C7D"},r={color:"#0A1045",fontSize:"16px",fontWeight:700,margin:0};return(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, rgba(0, 0, 0, 0.7), rgba(50, 50, 50, 0.7))",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"90%",maxWidth:"500px",borderRadius:"30px",overflow:"hidden",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:(0,s.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.85)",borderRadius:"30px",padding:"30px 25px",textAlign:"center",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.35)"},children:[(0,s.jsx)("h2",{style:{fontSize:"28px",fontWeight:800,color:"#0A1045",marginBottom:"15px"},children:"Welcome to Facade"}),(0,s.jsx)("p",{style:{fontSize:"16px",color:"#333",marginBottom:"30px",lineHeight:"24px"},children:"To see announcements and recommendations, please log in."}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[(0,s.jsx)("button",{style:n,onClick:a,children:(0,s.jsx)("span",{style:r,children:"Log In"})}),(0,s.jsx)("button",{style:l,onClick:o,children:(0,s.jsx)("span",{style:r,children:"Continue as Guest"})})]})]})})})})}},833:(e,t,a)=>{Promise.resolve().then(a.bind(a,3673))},1772:e=>{e.exports={container:"ProfileWithFlag_container__fXJUY",profileImage:"ProfileWithFlag_profileImage__kvu3h",gradientBorder:"ProfileWithFlag_gradientBorder__c_Y4a",flagWrapper:"ProfileWithFlag_flagWrapper__C0EJW",flagImage:"ProfileWithFlag_flagImage__mZNJt",spinner:"ProfileWithFlag_spinner__j6Bkl",spin:"ProfileWithFlag_spin__7po5D",modal:"ProfileWithFlag_modal__KzG8T"}},2278:e=>{e.exports={chattingFormFrame:"MessageInputForm_chattingFormFrame__KQv0J",chatInput:"MessageInputForm_chatInput__ay52K",chatIcon:"MessageInputForm_chatIcon__XskHJ",photoButton:"MessageInputForm_photoButton__5Fzte",placeholderIconSpace:"MessageInputForm_placeholderIconSpace__C2Km_",sendButton:"MessageInputForm_sendButton__bOLQs",previewContainer:"MessageInputForm_previewContainer__mZrS2",previewContent:"MessageInputForm_previewContent__XawSE",previewImage:"MessageInputForm_previewImage__sQDkS",closePreviewButton:"MessageInputForm_closePreviewButton__gOVp_",closeIcon:"MessageInputForm_closeIcon___IBIO",loginOverlay:"MessageInputForm_loginOverlay__8q7XO",loginOverlayContent:"MessageInputForm_loginOverlayContent__eNRT5",loginOverlayButtons:"MessageInputForm_loginOverlayButtons__H_uSi"}},2649:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var s=a(5155),o=a(2115),n=a(3464),l=a(1065),r=a(5695),i=a(802),c=a(7926),u=a(1772),m=a.n(u);let d=e=>"string"==typeof e&&""!==e.trim()?e.startsWith("http")||e.startsWith("/assets/")?e:"/assets/".concat(e):"/assets/Annonymous.png",p=e=>{let{userId:t,nickname:a,profileImage:u,profileThumbnail:p,countryName:_,size:g,trustBadge:h}=e,{SERVER_URL:x}=(0,l.U)(),f=(0,r.useRouter)(),[I,j]=(0,o.useState)(p||u||null),[b,v]=(0,o.useState)(_||null),[y,N]=(0,o.useState)(h||!1),[C,B]=(0,o.useState)(!1),[k,w]=(0,o.useState)(null),[F,S]=(0,o.useState)(!1),[T,M]=(0,o.useState)(!1);(0,o.useEffect)(()=>{w(localStorage.getItem("userId"))},[]),(0,o.useEffect)(()=>{_&&(p||u)&&void 0!==h||!t||(async()=>{try{B(!0);let e=localStorage.getItem("token");if(!e){B(!1);return}let a=await n.A.get("".concat(x,"/users/country?userId=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(200===a.status){let e=a.data;v(e.originCountry),"string"!=typeof e.profileThumbnail&&(e.profileThumbnail=""),"string"!=typeof e.profileImage&&(e.profileImage=""),j(e.profileThumbnail||e.profileImage||""),N(e.trustBadge||!1)}else console.log("Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e)}finally{B(!1)}})()},[_,p,u,h,t,x]);let P=c.X.find(e=>e.name===b),A=P?P.flag:null,O=d(I);return((0,o.useEffect)(()=>{S(!!localStorage.getItem("token"))},[]),C)?(0,s.jsx)("div",{className:m().container,style:{width:g,height:g},children:(0,s.jsx)("div",{className:m().spinner})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{onClick:()=>{if(!F){M(!0);return}let e={userId:t,nickname:a,profileImage:u||null,profileThumbnail:p||null};t===k?f.push("/myProfile?".concat(new URLSearchParams(e).toString())):f.push("/profile?".concat(new URLSearchParams(e).toString()))},className:m().container,style:{width:g,height:g},children:[y?(0,s.jsx)("div",{className:m().gradientBorder,style:{width:g,height:g,borderRadius:g/2},children:(0,s.jsx)("img",{src:O,alt:"Profile",className:m().profileImage,style:{width:g-4,height:g-4,borderRadius:(g-4)/2}})}):(0,s.jsx)("img",{src:O,alt:"Profile",className:m().profileImage,style:{width:g,height:g,borderRadius:g/2}}),A&&(0,s.jsx)("div",{className:m().flagWrapper,style:{width:g/3+4,height:g/3+4,borderRadius:g/6+2},children:(0,s.jsx)("img",{src:A,alt:"Flag",className:m().flagImage,style:{width:g/3,height:g/3,borderRadius:g/6}})})]}),T&&(0,s.jsx)("div",{className:m().modal,children:(0,s.jsx)(i.A,{visible:!0,onLogin:()=>{M(!1),f.push("/signInLogIn")},onBrowse:()=>M(!1)})})]})}},3673:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var s=a(5155),o=a(2115),n=a(1065),l=a(1218),r=a(3464),i=a(54),c=a.n(i),u=a(5695),m=a(2278),d=a.n(m);let p=e=>{let{onSendMessage:t,showPhotoIcon:a=!0}=e,{t:r}=(0,l.Bd)(),{SERVER_URL:i}=(0,n.U)(),c=(0,u.useRouter)(),[m,p]=(0,o.useState)(""),[_,g]=(0,o.useState)(null),[h,x]=(0,o.useState)(!1),[f,I]=(0,o.useState)(!1),[j,b]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),N=(0,o.useRef)(null);(0,o.useEffect)(()=>{b(!!localStorage.getItem("token"))},[]);let C=()=>{j?(m.trim()||_)&&(t({text:m.trim(),imageUri:_}),p(""),g(null),x(!1)):y(!0)},B=async()=>{N.current&&N.current.click()},k=async e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];g(URL.createObjectURL(t)),x(!0)}};return(0,s.jsxs)(s.Fragment,{children:[v&&(0,s.jsx)("div",{className:d().loginOverlay,children:(0,s.jsxs)("div",{className:d().loginOverlayContent,children:[(0,s.jsx)("p",{children:r("login_required")}),(0,s.jsxs)("div",{className:d().loginOverlayButtons,children:[(0,s.jsx)("button",{onClick:()=>{y(!1),c.push("/signInLogIn")},children:r("login")}),(0,s.jsx)("button",{onClick:()=>y(!1),children:r("browse")})]})]})}),h&&_&&(0,s.jsx)("div",{className:d().previewContainer,children:(0,s.jsxs)("div",{className:d().previewContent,children:[(0,s.jsx)("img",{src:_,alt:"Preview",className:d().previewImage}),(0,s.jsx)("button",{className:d().closePreviewButton,onClick:()=>g(null),children:(0,s.jsx)("img",{src:"/assets/delete-icon-big.png",alt:"Close Preview",className:d().closeIcon})})]})}),(0,s.jsxs)("div",{className:d().chattingFormFrame,children:[a?(0,s.jsx)("button",{className:d().photoButton,onClick:B,children:(0,s.jsx)("img",{src:"/assets/message-photo-icon.png",alt:"Select Photo",className:d().chatIcon})}):(0,s.jsx)("div",{className:d().placeholderIconSpace}),(0,s.jsx)("input",{className:d().chatInput,placeholder:r(j?"messageInput.placeholder":"messageInput.login_required"),value:m,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),(0,s.jsx)("button",{className:d().sendButton,onClick:C,children:(0,s.jsx)("img",{src:"/assets/message-send-icon.png",alt:"Send",className:d().chatIcon})})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",ref:N,style:{display:"none"},onChange:k})]})};var _=a(2649),g=a(5362),h=a.n(g),x=a(70);function f(e){return!!(e&&(e.startsWith("http")||e.startsWith("https")))}let I=e=>{let{content:t,nickname:a,isMine:i,timestamp:c,profileImage:m,profileThumbnail:d,userId:p,imageUrl:g,thumbnailUrl:I,containerStyle:j,isImageUploading:b=!1,messageType:v,_id:y,chatContextId:N,onDelete:C}=e,{t:B}=(0,l.Bd)(),{SERVER_URL:k}=(0,n.U)();(0,u.useRouter)();let[w,F]=(0,o.useState)(!1),[S,T]=(0,o.useState)(!1),[M,P]=(0,o.useState)(t),[A,O]=(0,o.useState)(!1),[E,R]=(0,o.useState)(!1),[L,W]=(0,o.useState)(!1);(0,o.useEffect)(()=>{f(I||g)?O(!0):O(!1),R(!1)},[I,g]);let z=async()=>{if(!N||!y||!v)return;let e="";"normal"===v?e="".concat(k,"/chats/").concat(N,"/message/").concat(y):"buddy"===v?e="".concat(k,"/buddy-chat/").concat(N,"/message/").concat(y):"regional"===v&&(e="".concat(k,"/district-chat/").concat(N,"/message/").concat(y));try{let t=localStorage.getItem("token"),a=await r.A.patch(e,{message:M},{headers:{Authorization:"Bearer ".concat(t)}});200===a.status&&T(!1)}catch(e){console.error("Error updating message:",e)}},D=async()=>{if(!N||!y||!v)return;let e="";"normal"===v?e="".concat(k,"/chats/").concat(N,"/message/").concat(y):"buddy"===v?e="".concat(k,"/buddy-chat/").concat(N,"/message/").concat(y):"regional"===v&&(e="".concat(k,"/district-chat/").concat(N,"/message/").concat(y));try{let t=localStorage.getItem("token"),a=await r.A.delete(e,{headers:{Authorization:"Bearer ".concat(t)}});200===a.status&&C&&y&&C(y)}catch(e){console.error("Error deleting message:",e)}};return(0,s.jsxs)("div",{className:"".concat(i?h().myContainer:h().friendContainer),style:j,onContextMenu:e=>{e.preventDefault(),i&&F(e=>!e)},onClick:()=>{w&&F(!1)},children:[!i&&(0,s.jsx)(_.A,{userId:p||"",nickname:a,profileImage:m||void 0,profileThumbnail:d||void 0,countryName:"",size:40}),(0,s.jsx)("div",{className:i?h().myBubble:h().friendBubble,children:S?(0,s.jsx)("input",{className:h().editTextInput,value:M,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z()},autoFocus:!0}):b?(0,s.jsx)("div",{className:h().loadingWrapper,children:(0,s.jsx)("div",{className:h().spinner})}):f(I||g)?(0,s.jsxs)("div",{className:h().imageWrapper,onClick:()=>{W(!0),w&&F(!1)},onContextMenu:e=>{e.preventDefault(),F(e=>!e)},children:[(0,s.jsx)("img",{src:I||g||"",alt:"Chat",className:h().chatImage,onLoad:()=>O(!1),onError:()=>{O(!1),R(!0)}}),A&&(0,s.jsx)("div",{className:h().overlay,children:(0,s.jsx)("div",{className:h().spinner})}),E&&(0,s.jsx)("p",{className:h().loadErrorText,children:B("image_load_failed")})]}):(0,s.jsx)("p",{className:i?h().myMessageText:h().friendMessageText,children:t||B("no_content")})}),!w&&(0,s.jsx)("span",{className:i?h().messageTimeRight:h().messageTimeLeft,children:(0,x.S)(c,B)}),i&&w&&(0,s.jsxs)("div",{className:h().optionsContainer,children:[!f(I||g)&&(0,s.jsx)("button",{className:h().optionButton,onClick:()=>{T(!0),F(!1)},children:B("message_edit")}),(0,s.jsx)("button",{className:h().optionButton,onClick:D,children:B("message_delete")})]}),L&&(0,s.jsx)("div",{className:h().modalOverlay,onClick:()=>W(!1),children:(0,s.jsxs)("div",{className:h().imageViewer,children:[(0,s.jsx)("button",{className:h().closeButton,onClick:()=>W(!1),children:B("close")}),(0,s.jsx)("img",{src:g||I||"",alt:"Zoomed Chat",className:h().zoomedImage})]})})]})};var j=a(802),b=a(9953),v=a.n(b);let y=e=>{let{visible:t,onClose:a,onSubmit:n,postId:r,targetUserId:i}=e,{t:c}=(0,l.Bd)(),[u,m]=(0,o.useState)(""),d=e=>e.length<=4?e:e.slice(0,e.length-4)+"****";return t?(0,s.jsx)("div",{className:v().modalOverlay,onClick:a,children:(0,s.jsxs)("div",{className:v().modalContainer,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h2",{className:v().modalHeader,children:c("report_reason","Report Reason")}),r&&(0,s.jsxs)("div",{className:v().infoContainer,children:[(0,s.jsxs)("span",{className:v().infoLabel,children:[c("post_id","Post ID"),": "]}),(0,s.jsx)("span",{className:v().infoText,children:d(r)})]}),i&&(0,s.jsxs)("div",{className:v().infoContainer,children:[(0,s.jsxs)("span",{className:v().infoLabel,children:[c("target_user_id","Reported User ID"),": "]}),(0,s.jsx)("span",{className:v().infoText,children:d(i)})]}),(0,s.jsx)("textarea",{className:v().modalInput,placeholder:c("enter_report_reason","Type your report reason here..."),value:u,onChange:e=>m(e.target.value),rows:4}),(0,s.jsxs)("div",{className:v().modalButtonContainer,children:[(0,s.jsx)("button",{className:v().primaryButton,onClick:()=>{if(!u.trim()){window.alert(c("error")+": "+c("report_reason_required"));return}n(u),m("")},children:(0,s.jsx)("span",{className:v().buttonText,children:c("submit","Submit")})}),(0,s.jsx)("button",{className:v().cancelButton,onClick:a,children:(0,s.jsx)("span",{className:v().buttonText,children:c("cancel","Cancel")})})]})]})}):null};var N=a(4914),C=a.n(N);let B=()=>{let{SERVER_URL:e}=(0,n.U)(),{t}=(0,l.Bd)(),a=(0,u.useRouter)(),{id:i,author:m,time:d,meetingTime:g,category:h,title:x,content:f,likes:b,comments:v,visitors:N,recruitmentCount:B,applicantsCount:k,profileImage:w,profileThumbnail:F,image:S,thumbnail:T,nicknameOption:M,meetingPlace:P,meetingCity:A,meetingCountry:O,mapboxImage:E,isBuddyPost:R,applicants:L}=(0,u.useParams)(),W=Number(b),z=Number(v),D=Number(N),H=Number(B),U=Number(k),J=L?Number(L):U,[q,G]=(0,o.useState)(null),[K,X]=(0,o.useState)(J),[Q,Y]=(0,o.useState)(!1),[V,Z]=(0,o.useState)(!1),[$,ee]=(0,o.useState)(""),[et,ea]=(0,o.useState)(""),[es,eo]=(0,o.useState)(""),[en,el]=(0,o.useState)([]),[er,ei]=(0,o.useState)(!1),[ec,eu]=(0,o.useState)(!1),[em,ed]=(0,o.useState)(""),[ep,e_]=(0,o.useState)(!1),[eg,eh]=(0,o.useState)(W),[ex,ef]=(0,o.useState)(D),[eI,ej]=(0,o.useState)(z),[eb,ev]=(0,o.useState)(!1),[ey,eN]=(0,o.useState)(!1),[eC,eB]=(0,o.useState)(m),[ek,ew]=(0,o.useState)(M),[eF,eS]=(0,o.useState)(w),[eT,eM]=(0,o.useState)(F),[eP,eA]=(0,o.useState)(S),[eO,eE]=(0,o.useState)(T),[eR,eL]=(0,o.useState)([]),[eW,ez]=(0,o.useState)(!1),eD="true"===R,eH=eD?"".concat(e,"/buddy-post"):"".concat(e,"/posts"),[eU,eJ]=(0,o.useState)(!1),[eq,eG]=(0,o.useState)(null),[eK,eX]=(0,o.useState)(null),[eQ,eY]=(0,o.useState)(null),[eV,eZ]=(0,o.useState)(null),[e$,e0]=(0,o.useState)(!1),[e1,e2]=(0,o.useState)(!1),[e5,e3]=(0,o.useState)(eO||""),[e4,e6]=(0,o.useState)(!1),[e8,e9]=(0,o.useState)(!1),[e7,te]=(0,o.useState)(!1),[tt,ta]=(0,o.useState)(0),ts=Math.min(1,tt/120);(0,o.useEffect)(()=>{{let e=new URLSearchParams(window.location.search).get("ref");e&&G(e)}},[]);let to=()=>{let t="".concat(e,"/posts/").concat(i,"?ref=").concat($),a="".concat(window.location.origin,"/post/").concat(i,"?ref=").concat($);return console.log("web link:",t),console.log("app link:",a),{postLink:t,appLink:a}},tn=async()=>{let{postLink:e}=to();try{await navigator.clipboard.writeText(e),window.alert("Link copied! Share with your friends."),navigator.share&&await navigator.share({url:e})}catch(e){console.error("Error sharing post:",e)}};(0,o.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{eY(e.coords.latitude),eZ(e.coords.longitude)},e=>{console.error("Error fetching current location:",e)},{enableHighAccuracy:!0,timeout:2e4})},[]);let tl=()=>{let e;if(null===eq||null===eK||null===eQ||null===eV)return"";let t=eQ*Math.PI/180,a=eq*Math.PI/180,s=Math.sin((eq-eQ)*Math.PI/180/2)**2+Math.cos(t)*Math.cos(a)*Math.sin((eK-eV)*Math.PI/180/2)**2,o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371e3,n=navigator.language;if(!n.includes("en-US")&&!n.includes("en-GB"))return(e=o/1e3)>=10?"".concat(Math.round(e),"km"):e>=1?"".concat(e.toFixed(1),"km"):"".concat(Math.round(o),"m");if((e=o/1609.34)>=6.214)return"".concat(Math.round(e),"mi");if(e>=.6214)return"".concat(e.toFixed(1),"mi");{let t=1609.34*e;return"".concat(Math.round(t),"m")}};(0,o.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");if(t)try{let{data:a,status:s}=await r.A.get("".concat(e,"/users/me"),{headers:{Authorization:"Bearer ".concat(t)}});s>=200&&s<300&&(ee(a.userId),a&&a.userId&&L&&Y(String(L).includes(a.userId)))}catch(e){console.error("Error fetching user data:",e)}})()},[L,e]),(0,o.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");if(t&&L)try{let a=String(L).split(","),{data:s,status:o}=await r.A.post("".concat(e,"/users/profiles"),{userIds:a},{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});o>=200&&o<300?eL(s.users):console.error("Failed to fetch applicants profiles:",o)}catch(e){console.error("Error fetching applicants profiles:",e)}})()},[L,e]);let tr=async()=>{let e=localStorage.getItem("token");try{let{data:t,status:a}=await r.A.get("".concat(eH,"/").concat(i),{headers:{Authorization:e?"Bearer ".concat(e):""}});el(t.commentList),eh(t.likes),ef(t.visitors),ej(t.comments),e_(t.likedByUser),eB(t.author),ea(t.userId),ew(t.nicknameOption),eS(t.profileImage),eM(t.profileThumbnail),ez(t.isRecruitmentComplete),eA(t.image),t.meetingLatitude&&eG(t.meetingLatitude),t.meetingLongitude&&eX(t.meetingLongitude)}catch(e){console.error("Error fetching post data:",e.message),window.alert(t("error")+": "+t("fetch_post_error"))}},ti=async()=>{let e=localStorage.getItem("token");if(e)try{let{data:t,status:a}=await r.A.post("".concat(eH,"/").concat(i,"/visit"),null,{headers:{Authorization:"Bearer ".concat(e)}});if(a>=200&&a<300)ef(t.visitors);else throw Error("Failed to update visitors")}catch(e){console.error("Error updating visitors:",e)}};(0,o.useEffect)(()=>{tr(),ti()},[]);let tc=async()=>{let e=localStorage.getItem("token");if(e&&!V){Z(!0),Y(!Q),X(Q?K-1:K+1),Q?eL(eR.filter(e=>e.userId!==$)):eL([...eR,{userId:$,profileImage:eF,profileThumbnail:eT}]);try{let t=await (0,r.A)({url:"".concat(eH,"/").concat(i,"/").concat(Q?"removeApplicant":"addApplicant"),method:Q?"DELETE":"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},data:{userId:$}});if(t.status>=200&&t.status<300)X(t.data.applicantsCount),Y(!Q),tr();else throw Error("Application update failed")}catch(e){Y(!Q),X(Q?K+1:K-1),eL(Q?[...eR,{userId:$,profileImage:eF,profileThumbnail:eT}]:eR.filter(e=>e.userId!==$)),console.error("Error ".concat(Q?"removing":"adding"," applicant:"),e),window.alert(t("error")+": "+t("application_error"))}finally{Z(!1)}}},tu="AI"===ek?H>0?K/H:0:(K+1)/(H+1);(0,o.useEffect)(()=>{e9(!!localStorage.getItem("token"))},[]),(0,o.useCallback)(()=>{eN(!0),tr().finally(()=>eN(!1))},[]);let tm=async()=>{if(!e8){te(!0);return}let e=localStorage.getItem("token");if(e)try{let{data:t,status:a}=await r.A.post("".concat(eH,"/").concat(i,"/like"),null,{headers:{Authorization:"Bearer ".concat(e)}});if(a>=200&&a<300)eh(t.likes),e_(!ep),tr();else throw Error("Failed to update likes")}catch(e){console.error("Error liking post:",e)}},td=async a=>{if(a.trim()){let s=localStorage.getItem("token");if(s)try{let{data:o,status:n}=await r.A.get("".concat(e,"/users/me"),{headers:{Authorization:"Bearer ".concat(s)}});if(n<200||n>=300)throw Error("Error fetching user information.");let l={author:o.nickname,userId:o.userId,time:new Date().toISOString(),content:a,profileImage:o.profileImage,profileThumbnail:o.profileThumbnail},{status:c}=await r.A.post("".concat(eH,"/").concat(i,"/comment"),l,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});c>=200&&c<300?(el([...en,l]),eo(""),ej(eI+1),ev(!0),tr()):window.alert(t("error")+": "+t("add_comment_error"))}catch(e){console.error("Error adding comment:",e),window.alert(t("error")+": "+t("add_comment_error"))}}},tp=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let{status:s}=await r.A.delete("".concat(eH,"/").concat(i,"/delete"),{headers:{Authorization:"Bearer ".concat(e)}});s>=200&&s<300?(window.alert(t("delete_success")+": "+t("delete_success_message")),a.back()):window.alert(t("error")+": "+t("delete_error"))}catch(e){console.error("Error deleting post:",e.message)}},t_=()=>{ei(!er)},tg=(e,t)=>(0,s.jsx)(I,{content:e.content,isMine:e.userId===$,timestamp:e.time,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,userId:e.userId},t),th=async()=>{if(!em.trim()){window.alert(t("error")+": "+t("report_reason_required"));return}try{let a=localStorage.getItem("token");if(!a){window.alert(t("error")+": "+t("login_required"));return}let s={reason:em,...i&&{postId:i},...et&&{targetUserId:et}},{status:o}=await r.A.post("".concat(e,"/report/post"),s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});o>=200&&o<300?(window.alert(t("report_success")+": "+t("report_success_message")),eu(!1),ed(""),tr()):window.alert(t("error")+": "+t("report_error"))}catch(e){console.error("Error reporting post:",e.message),window.alert(t("error")+": "+t("report_error"))}},tx=async()=>{let e={postId:i,author:eC,userId:et,time:d,meetingTime:g,meetingPlace:P,meetingCity:A,meetingCountry:O,category:h,title:x,content:f,likes:eg,comments:eI,visitors:ex,profileImage:eF,profileThumbnail:eT,image:eP,mapboxImage:E,recruitmentCount:H,applicantsCount:K,applicants:K,visitedUsers:eR.map(e=>e.userId),likedUsers:ep?[$]:[],commentList:en,nicknameOption:ek,isBuddyPost:eD};try{let a=localStorage.getItem("bookmarkedPosts"),s=a?JSON.parse(a):[],o=[e,...s];localStorage.setItem("bookmarkedPosts",JSON.stringify(o)),tr(),window.alert(t("bookmark_success")+": "+t("bookmark_success_message"))}catch(e){console.error("Failed to bookmark the post",e.message),window.alert(t("error")+": "+t("bookmark_error"))}},tf=()=>{e0(!e$)},tI=async()=>{let e=localStorage.getItem("token");try{let{data:a,status:s}=await r.A.post("".concat(eH,"/").concat(i,"/completeRecruitment"),null,{headers:{Authorization:"Bearer ".concat(e)}});s>=200&&s<300?(window.alert(t("recruitment_complete")+": "+t("recruitment_complete_message")),ez(!0),tr()):window.alert(t("error")+": "+t("recruitment_error"))}catch(e){console.error("Error marking recruitment as complete:",e)}},tj=(0,o.useCallback)(c().debounce(()=>{tc()},1e3,{leading:!0,trailing:!1}),[]),tb=(0,o.useCallback)(c().debounce(()=>{tI()},1e3,{leading:!0,trailing:!1}),[]);return(0,s.jsxs)("div",{className:C().fullpost,children:[(0,s.jsx)("div",{className:C().fullPostHeaderArea,style:{opacity:ts,transform:"translateY(".concat(30-tt/120*30,"px)")},children:(0,s.jsxs)("div",{className:C().fullPostHeader,children:[(0,s.jsx)("button",{className:C().iconWrapper,onClick:()=>a.back(),children:(0,s.jsx)("img",{className:C().iconWrapper,src:"/assets/BackIcon.png",alt:"Back"})}),(0,s.jsx)("img",{className:C().logoImage,src:"/assets/Owl-icon-pink.png",alt:"Logo"}),(0,s.jsx)("button",{className:C().iconWrapper,onClick:()=>{e8?t_():te(!0)},children:(0,s.jsx)("img",{src:"/assets/full-post-menu-icon.png",className:C().menuIcon,alt:"Menu"})})]})}),(0,s.jsx)("div",{className:C().scrollContainer,onScroll:e=>{ta(e.currentTarget.scrollTop)},children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:C().heroContainer,children:[(0,s.jsx)("img",{src:e5||"/assets/leire-cavia-S93RK176PuA-unsplash.jpg",className:C().heroImage,alt:"Hero",onLoad:()=>{e2(!0),e3(eP||"")},onError:e=>console.error("Failed to load image:",e)}),(0,s.jsx)("div",{className:C().heroGradient}),(0,s.jsx)("button",{className:C().backButton,onClick:()=>a.back(),children:(0,s.jsx)("img",{src:"/assets/back-light.png",className:C().backButtonIcon,alt:"Back"})}),(0,s.jsx)("button",{className:C().menuButton,onClick:t_,children:(0,s.jsx)("img",{src:"/assets/menu-light.png",className:C().menuButtonIcon,alt:"Menu"})}),(0,s.jsxs)("div",{className:C().heroTextOverlay,children:[(0,s.jsx)("button",{onClick:()=>e6(!e4),children:(0,s.jsx)("h1",{className:C().heroTitle,style:{display:"-webkit-box",WebkitLineClamp:e4?"none":2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:x})}),(0,s.jsx)("p",{className:C().heroCategory,children:t("topics.".concat(h))})]})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsx)("div",{className:C().recruitmentInfoContainer,children:(0,s.jsxs)("div",{className:C().recruitmentInfo,children:[(0,s.jsx)("p",{className:C().recruitmentText,children:"AI"===ek?"".concat(K," out of ").concat(H," applied"):"".concat(K+1," out of ").concat(H+1," applied")}),eW||K>=H?(0,s.jsx)("p",{className:C().recruitmentCompleteText,children:t("recruitment_status_complete")}):(0,s.jsx)("div",{className:C().circleContainer,children:(0,s.jsx)("div",{className:C().circle,children:(0,s.jsxs)("span",{children:[Math.round(100*tu),"%"]})})})]})}),eW?(0,s.jsx)("button",{className:C().applyButtonComplete,disabled:!0,children:t("recruitment_status_complete")}):$===et?(0,s.jsx)("button",{className:C().applyButton,onClick:tb,children:t("complete_recruitment")}):(0,s.jsx)("button",{className:"".concat(C().applyButton," ").concat(Q||K>=H?C().disabledButton:""),onClick:tj,disabled:V||K>=H,children:V?t("processing"):Q?t("cancel_application"):K>=H?t("recruitment_status_complete"):t("apply")})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsxs)("div",{className:C().authorInformation,children:["AI"===ek?(0,s.jsx)("img",{className:C().friendProfileImage,src:"/assets/AI.png",alt:"AI"}):(0,s.jsx)(_.A,{userId:et,profileImage:eF,profileThumbnail:eT,size:48}),(0,s.jsxs)("div",{className:C().author,children:[(0,s.jsx)("p",{className:C().authorText,children:eC}),(0,s.jsxs)("p",{className:C().timeCategoryText,children:[t("time"),": ",d," \xb7 ",t("topics.".concat(h))]})]})]}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsx)("p",{className:C().textContent,children:f})}),(0,s.jsxs)("div",{className:C().postInformation,children:[(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:"/assets/eye-colored.png",className:C().icon,alt:"Views"}),(0,s.jsx)("p",{className:C().iconText,children:ex})]}),(0,s.jsx)("button",{onClick:tm,className:C().iconButton,children:(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:ep?"/assets/like-colored.png":"/assets/like-icon.png",className:C().icon,alt:"Like"}),(0,s.jsx)("p",{className:C().iconText,children:eg})]})}),(0,s.jsxs)("div",{className:C().iconInfo,children:[(0,s.jsx)("img",{src:eb?"/assets/comment-colored.png":"/assets/comment-icon.png",className:C().icon,alt:"Comment"}),(0,s.jsx)("p",{className:C().iconText,children:eI})]})]})]}),(0,s.jsxs)("div",{className:C().fullApplicantsProfile,children:[(0,s.jsx)("div",{className:C().fullApplicants,children:(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/participants-title-icon.png",className:C().mapIcon,alt:"Applicants"}),(0,s.jsxs)("p",{className:C().fullCommentsTitle,children:[t("applicants_profile")," ",eR.length]})]})}),eR.length>0&&(0,s.jsx)("div",{className:C().applicantsContainer,children:eR.map((e,t)=>(0,s.jsx)(_.A,{userId:e.userId,nickname:e.nickname,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,size:50},t))})]}),(0,s.jsxs)("div",{className:C().fullPostMainFrame,children:[(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/map-colored.png",className:C().mapIcon,alt:"Map"}),(0,s.jsx)("p",{className:C().fullPostTitle,children:P})]}),eq&&eK?(0,s.jsx)("div",{className:C().fullImage,children:(0,s.jsxs)("button",{className:C().mapPreviewContainer,onClick:tf,children:[(0,s.jsx)("img",{src:"/assets/mapComponent.png",className:C().mapImage,alt:"Map Preview"}),(0,s.jsxs)("div",{className:C().mapOverlay,children:[(0,s.jsxs)("p",{className:C().overlayCityCountry,children:[A,", ",O]}),(0,s.jsxs)("p",{className:C().overlayDistance,children:[t("distance"),": ",tl()]})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().fullPostTitle,children:[A,", ",O]})}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().distanceText,children:[t("distance"),": ",tl()]})})]}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().fullPostTitle,children:[A,", ",O]})}),(0,s.jsx)("div",{className:C().fullPostContents,children:(0,s.jsxs)("p",{className:C().distanceText,children:[t("distance"),": ",tl()]})})]}),e$&&(0,s.jsxs)("div",{className:C().fullScreenMapContainer,children:[(0,s.jsx)("div",{className:C().fullScreenMap,children:(0,s.jsx)("iframe",{title:"Full Screen Map",src:"https://www.google.com/maps?q=".concat(eq,",").concat(eK,"&z=15&output=embed"),width:"100%",height:"100%",style:{border:0}})}),(0,s.jsx)("button",{className:C().mapBackButton,onClick:tf,children:(0,s.jsx)("img",{src:"/assets/back-light.png",className:C().mapBackButtonIcon,alt:"Back"})}),(0,s.jsxs)("div",{className:C().mapInfoOverlay,children:[eP&&(0,s.jsx)("img",{src:eP,className:C().mapPostImage,alt:"Post"}),(0,s.jsx)("p",{className:C().mapInfoPlace,children:P}),(0,s.jsxs)("p",{className:C().mapInfoLocation,children:[A,", ",O]}),(0,s.jsxs)("p",{className:C().mapInfoDistance,children:[t("distance"),": ",tl()]})]}),(0,s.jsx)("button",{className:C().reduceButton,onClick:tf,children:(0,s.jsx)("p",{className:C().reduceButtonText,children:t("reduce")})})]}),(0,s.jsxs)("div",{className:C().fullComments,children:[(0,s.jsxs)("div",{className:C().fullMapContents,children:[(0,s.jsx)("img",{src:"/assets/comment-title-icon.png",className:C().mapIcon,alt:"Comments"}),(0,s.jsxs)("p",{className:C().fullCommentsTitle,children:[t("comments")," ",eI]})]}),eI>0&&(0,s.jsx)("div",{className:C().commentList,children:en.map((e,t)=>tg(e,t))})]})]})}),(0,s.jsx)("div",{className:C().messageInputForm,children:(0,s.jsx)(p,{onSendMessage:e=>{td(e.text)},showPhotoIcon:!1})}),(0,s.jsx)(y,{visible:ec,onClose:()=>eu(!1),onSubmit:th,postId:i,targetUserId:et}),er&&(0,s.jsx)("div",{className:C().menuOverlay,onClick:t_,children:(0,s.jsxs)("div",{className:C().menuContainer,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{className:C().menuItem,onClick:t_,children:(0,s.jsx)("img",{src:"/assets/delete-icon-big.png",className:C().menuIcon,alt:"Close"})}),$===et&&(0,s.jsx)("button",{className:C().menuItem,onClick:tp,children:(0,s.jsx)("span",{className:C().menuText,children:t("delete")})}),$!==et&&(0,s.jsx)("button",{className:C().menuItem,onClick:()=>{ei(!1),eu(!ec)},children:(0,s.jsx)("span",{className:C().menuText,children:t("report")})}),(0,s.jsx)("button",{className:C().menuItem,onClick:tn,children:(0,s.jsx)("span",{className:C().menuText,children:t("share")})}),(0,s.jsx)("button",{className:C().menuItem,onClick:tx,children:(0,s.jsx)("span",{className:C().menuText,children:t("bookmark")})})]})}),e7&&(0,s.jsx)("div",{className:C().modalOverlay,children:(0,s.jsx)(j.A,{visible:!0,onLogin:()=>{te(!1),a.push("/signin")},onBrowse:()=>{te(!1)}})})]})}},4914:e=>{e.exports={fullpost:"Fullpost_fullpost__RAWXY",fullPostHeaderArea:"Fullpost_fullPostHeaderArea__IZ_ww",fullPostHeader:"Fullpost_fullPostHeader__oMDDi",iconWrapper:"Fullpost_iconWrapper__jQlsF",mapIcon:"Fullpost_mapIcon__vjSzy",mainLogo:"Fullpost_mainLogo__MRieQ",logoImage:"Fullpost_logoImage__HlTw9",menuIcon:"Fullpost_menuIcon__rtQ8M",scrollContainer:"Fullpost_scrollContainer__CTDOm",heroContainer:"Fullpost_heroContainer__TWV0G",heroImage:"Fullpost_heroImage__qiHfb",heroGradient:"Fullpost_heroGradient__f4Jls",backButton:"Fullpost_backButton__SLaDd",backButtonIcon:"Fullpost_backButtonIcon__PmKiX",menuButton:"Fullpost_menuButton____Sow",menuButtonIcon:"Fullpost_menuButtonIcon__EdOR5",heroTextOverlay:"Fullpost_heroTextOverlay__ENo_q",heroTitle:"Fullpost_heroTitle__LqI2K",heroCategory:"Fullpost_heroCategory__M1rd_",fullPostMainFrame:"Fullpost_fullPostMainFrame__vt_x4",recruitmentInfoContainer:"Fullpost_recruitmentInfoContainer___9XAd",recruitmentInfo:"Fullpost_recruitmentInfo__IrrGr",recruitmentText:"Fullpost_recruitmentText__2GnwQ",recruitmentCompleteText:"Fullpost_recruitmentCompleteText__x8_6D",circleContainer:"Fullpost_circleContainer__UYcWK",circle:"Fullpost_circle__wxhKc",applyButton:"Fullpost_applyButton__jFyGm",applyButtonComplete:"Fullpost_applyButtonComplete__r4n5d",applyButtonText:"Fullpost_applyButtonText__98pkZ",disabledButton:"Fullpost_disabledButton__aCYAR",loadingContainer:"Fullpost_loadingContainer__FDqqL",authorInformation:"Fullpost_authorInformation__kQDGf",friendProfileImage:"Fullpost_friendProfileImage__8w6Vv",authorText:"Fullpost_authorText__Mz7Je",author:"Fullpost_author__cN6DB",timeCategoryText:"Fullpost_timeCategoryText__9_kgz",fullPostContents:"Fullpost_fullPostContents__4iWG1",textContent:"Fullpost_textContent__CzA6w",postInformation:"Fullpost_postInformation__tTDEQ",iconInfo:"Fullpost_iconInfo__h23UF",iconText:"Fullpost_iconText__jaA93",icon:"Fullpost_icon__nKk5M",fullApplicantsProfile:"Fullpost_fullApplicantsProfile__Bjgoo",fullMapContents:"Fullpost_fullMapContents__hREfS",fullCommentsTitle:"Fullpost_fullCommentsTitle__a83Td",distanceText:"Fullpost_distanceText__vCh3n",messageInputForm:"Fullpost_messageInputForm__bHhBm",mapPreviewContainer:"Fullpost_mapPreviewContainer__5vbgz",mapImage:"Fullpost_mapImage__WtK34",mapOverlay:"Fullpost_mapOverlay__YWT6b",overlayCityCountry:"Fullpost_overlayCityCountry__Xf53D",overlayDistance:"Fullpost_overlayDistance__5IzJ4",fullPostTitle:"Fullpost_fullPostTitle__lrRoX",fullComments:"Fullpost_fullComments__gSY91",applicantsContainer:"Fullpost_applicantsContainer__POVa1",menuOverlay:"Fullpost_menuOverlay___7zJy",menuContainer:"Fullpost_menuContainer__hyohv",menuItem:"Fullpost_menuItem__u4sER",menuText:"Fullpost_menuText__2GP_J",modalOverlay:"Fullpost_modalOverlay__3V46b",fullScreenMapContainer:"Fullpost_fullScreenMapContainer__jat5k",fullScreenMap:"Fullpost_fullScreenMap__NH45Q",mapBackButton:"Fullpost_mapBackButton__BR0oi",mapBackButtonIcon:"Fullpost_mapBackButtonIcon__QTENc",mapInfoOverlay:"Fullpost_mapInfoOverlay__HS5x9",mapInfoPlace:"Fullpost_mapInfoPlace__agmu6",mapInfoLocation:"Fullpost_mapInfoLocation__zLtch",mapInfoDistance:"Fullpost_mapInfoDistance__Ar1qp",reduceButton:"Fullpost_reduceButton__O_nta",reduceButtonText:"Fullpost_reduceButtonText__BdSrU",commentList:"Fullpost_commentList__iMerQ",iconButton:"Fullpost_iconButton__usLr1"}},5362:e=>{e.exports={myContainer:"MessageBubble_myContainer__YONHp",friendContainer:"MessageBubble_friendContainer__ZiduA",myBubble:"MessageBubble_myBubble__UhB3M",friendBubble:"MessageBubble_friendBubble__lVCA7",myMessageText:"MessageBubble_myMessageText__v0XGx",friendMessageText:"MessageBubble_friendMessageText__IErow",messageTimeRight:"MessageBubble_messageTimeRight__h7joM",messageTimeLeft:"MessageBubble_messageTimeLeft__hKMXY",optionsContainer:"MessageBubble_optionsContainer__jmvS6",optionButton:"MessageBubble_optionButton__HC0_J",editTextInput:"MessageBubble_editTextInput___Nw_q",imageWrapper:"MessageBubble_imageWrapper__FYXm2",overlay:"MessageBubble_overlay__4_UHa",loadErrorText:"MessageBubble_loadErrorText__4_obs",chatImage:"MessageBubble_chatImage__Osjwf",loadingWrapper:"MessageBubble_loadingWrapper__MMliA",buttonRow:"MessageBubble_buttonRow__AZmeW",modalOverlay:"MessageBubble_modalOverlay__lVG2u",imageViewer:"MessageBubble_imageViewer__M7erh",closeButton:"MessageBubble_closeButton__F_ttY",closeButtonText:"MessageBubble_closeButtonText__gE0er",zoomedImage:"MessageBubble_zoomedImage__ZbdIt"}},9953:e=>{e.exports={modalOverlay:"ReportOverlay_modalOverlay__M8vP_",modalContainer:"ReportOverlay_modalContainer__pWJHe",modalHeader:"ReportOverlay_modalHeader__yl8pw",infoContainer:"ReportOverlay_infoContainer__IJi59",infoLabel:"ReportOverlay_infoLabel__vRJyv",infoText:"ReportOverlay_infoText__5kMti",modalInput:"ReportOverlay_modalInput__h5dhH",modalButtonContainer:"ReportOverlay_modalButtonContainer__B47tu",primaryButton:"ReportOverlay_primaryButton__12taJ",cancelButton:"ReportOverlay_cancelButton__6n_XM",buttonText:"ReportOverlay_buttonText__73ko4"}}},e=>{var t=t=>e(e.s=t);e.O(0,[230,935,218,794,82,441,684,358],()=>t(833)),_N_E=e.O()}]);