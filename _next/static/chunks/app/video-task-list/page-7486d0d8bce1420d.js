(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9543],{35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},45153:e=>{e.exports={container:"VideoTaskList_container__lkWOB",headerContainer:"VideoTaskList_headerContainer__c3QjD",header:"VideoTaskList_header__MJ9X2",toggleButton:"VideoTaskList_toggleButton__y1vNn",toggleText:"VideoTaskList_toggleText__8qIeW",list:"VideoTaskList_list__a__iT",loader:"VideoTaskList_loader__GJsaQ",spinner:"VideoTaskList_spinner__0cYwD",spin:"VideoTaskList_spin__PolEe",card:"VideoTaskList_card__776Z7",taskTitle:"VideoTaskList_taskTitle__8z4pQ",metaRow:"VideoTaskList_metaRow__HP5F6",status:"VideoTaskList_status__ePPu8",step:"VideoTaskList_step__0Pw24",error:"VideoTaskList_error__2kmLd",fab:"VideoTaskList_fab__vIg1F",fabText:"VideoTaskList_fabText__Uewgj",footer:"VideoTaskList_footer__kuwOX",modalOverlay:"VideoTaskList_modalOverlay__2if4U",modalContent:"VideoTaskList_modalContent__pUEEg",modalTitle:"VideoTaskList_modalTitle__qrx8L",modalSubTitle:"VideoTaskList_modalSubTitle__Dm53o",optionRow:"VideoTaskList_optionRow__sIGEs",optionButton:"VideoTaskList_optionButton__wHTbv",optionButtonSelected:"VideoTaskList_optionButtonSelected__KbWCZ",optionButtonText:"VideoTaskList_optionButtonText__Zx03s",timeText:"VideoTaskList_timeText__qaJIv",modalButton:"VideoTaskList_modalButton__wVO9B",modalButtonText:"VideoTaskList_modalButtonText__9w_LW",modalCancel:"VideoTaskList_modalCancel__4xYY_",modalCancelText:"VideoTaskList_modalCancelText__ZoRMH"}},89760:(e,t,a)=>{"use strict";a.d(t,{s:()=>m,U:()=>h});var s=a(95155),l=a(12115),n=a(49509);function o(e){switch(e.trim().toUpperCase()){case"BETA":return"https://beta.fcde.app";case"DEVELOPMENT":return"https://dev.fcde.app";case"CA":case"CANADA":return"https://ca.fcde.app";case"AU":case"AUSTRALIA":return"https://au.fcde.app";case"GB":case"UK":return"https://uk.fcde.app";case"KR":case"KOREA":return"https://kr.fcde.app";default:return"https://fcde.app"}}function c(){return"https://fcde.app"}async function i(e){try{return(await fetch("".concat(e,"/health"),{method:"GET"})).ok}catch(e){return!1}}async function d(){let e=null;try{let t=localStorage.getItem("selectedServer");t&&(e=t)}catch(e){}for(let t of(!e&&n.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER&&(e=n.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER),e||(e=function(){try{let e=localStorage.getItem("region");if(e)return e}catch(e){}if("undefined"!=typeof navigator&&navigator.language){let e=navigator.language.split("-");if(e.length>1)return e[1]}return"KR"}()),[e,"Beta","Development"])){let e=o(t);if(await i(e))return e}return o(e)}let r={SERVER_URL:c(),APP_VERSION:n.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:n.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:n.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(n.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(n.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},u=(0,l.createContext)(null),m=e=>{let{children:t}=e,[a,n]=(0,l.useState)(c());(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await d();e&&n(t)}catch(e){}})(),()=>{e=!1}},[]);let o={SERVER_URL:a,APP_VERSION:r.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:r.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:r.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:r.FEATURE_UNDER_DEV,TEST_AD_MODE:r.TEST_AD_MODE};return(0,s.jsx)(u.Provider,{value:o,children:t})},h=()=>{let e=(0,l.useContext)(u);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},95381:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),l=a(12115),n=a(35695),o=a(23464),c=a(45153),i=a.n(c),d=a(89760);let r=e=>{let t=new Date(e.getTime()-468e5);return{canadaTime:t,australiaTime:new Date(e.getTime()+36e5),ukTime:new Date(e.getTime()-324e5)}},u=()=>{let{SERVER_URL:e}=(0,d.U)(),t=(0,n.useRouter)(),[a,c]=(0,l.useState)([]),[u,m]=(0,l.useState)([]),[h,_]=(0,l.useState)(!1),[T,p]=(0,l.useState)(""),[x,N]=(0,l.useState)("tasks"),[k,E]=(0,l.useState)(null),[C,j]=(0,l.useState)("Daily"),[S,L]=(0,l.useState)(12),[B,g]=(0,l.useState)("Monday"),[A,f]=(0,l.useState)(new Date),[y,v]=(0,l.useState)(null),w=async()=>{_(!0);try{let t=await o.A.get("".concat(e,"/api/video-tasks"),{withCredentials:!0});c(t.data.tasks)}catch(e){p(e.message)}finally{_(!1)}},D=async()=>{_(!0);try{let t=await o.A.get("".concat(e,"/api/task-schedules"),{withCredentials:!0});m(t.data.schedules)}catch(e){p(e.message)}finally{_(!1)}};(0,l.useEffect)(()=>{w()},[]),(0,l.useEffect)(()=>{"tasks"===x?w():D()},[x]);let R=async()=>{try{let t={type:"auto",auto:{mode:C.toLowerCase(),hour:S,..."Weekly"===C&&{weekday:B}}};await o.A.post("".concat(e,"/api/task-schedules"),t,{withCredentials:!0}),alert("Auto Pilot schedule saved successfully."),E("main"),"schedules"===x&&D()}catch(e){alert("Failed to save auto schedule: ".concat(e.message))}},P=async()=>{try{let t={type:"scheduled",scheduledFor:A.toISOString()};await o.A.post("".concat(e,"/api/task-schedules"),t,{withCredentials:!0}),alert("Scheduled task saved successfully."),E("main"),"schedules"===x&&D()}catch(e){alert("Failed to save scheduled task: ".concat(e.message))}},V=async t=>{if(confirm("Are you sure you want to stop this schedule?"))try{await o.A.put("".concat(e,"/api/task-schedules/").concat(t,"/stop"),{},{withCredentials:!0}),alert("Schedule stopped successfully."),E(null),D()}catch(e){alert("Failed to stop schedule: ".concat(e.message))}},b=async t=>{if(confirm("Are you sure you want to delete this schedule?"))try{await o.A.delete("".concat(e,"/api/task-schedules/").concat(t),{withCredentials:!0}),alert("Schedule deleted successfully."),E(null),D()}catch(e){alert("Failed to delete schedule: ".concat(e.message))}},{canadaTime:I,australiaTime:O,ukTime:F}=r(A);return(0,s.jsxs)("div",{className:i().container,children:[(0,s.jsxs)("div",{className:i().headerContainer,children:[(0,s.jsx)("h1",{className:i().header,children:"tasks"===x?"Existing Video Tasks":"Existing Schedules"}),(0,s.jsx)("button",{className:i().toggleButton,onClick:()=>{N(e=>"tasks"===e?"schedules":"tasks")},children:(0,s.jsx)("span",{className:i().toggleText,children:"tasks"===x?"Show Schedules":"Show Tasks"})})]}),h?(0,s.jsx)("div",{className:i().loader,children:(0,s.jsx)("div",{className:i().spinner})}):"tasks"===x?(0,s.jsx)("div",{className:i().list,children:a.map(e=>(0,s.jsxs)("div",{className:i().card,onClick:()=>t.push("/video-production?taskId=".concat(e._id)),children:[(0,s.jsxs)("h2",{className:i().taskTitle,children:["Task #",e._id.slice(-6)]}),(0,s.jsxs)("div",{className:i().metaRow,children:[(0,s.jsx)("span",{className:i().status,children:e.status.toUpperCase()}),(0,s.jsxs)("span",{className:i().step,children:["Step: ",e.currentStep]})]})]},e._id))}):(0,s.jsx)("div",{className:i().list,children:u.map(e=>{let t=e.scheduledFor?new Date(e.scheduledFor):null;return(0,s.jsxs)("div",{className:i().card,onClick:()=>{v(e),E("scheduleDetail")},children:[(0,s.jsxs)("h2",{className:i().taskTitle,children:["Schedule #",e._id.slice(-6)]}),(0,s.jsxs)("div",{className:i().metaRow,children:[(0,s.jsxs)("span",{className:i().status,children:[e.type.toUpperCase()," ",!e.active&&"(STOPPED)"]}),t&&(0,s.jsx)("span",{className:i().step,children:t.toLocaleString()}),e.auto&&(0,s.jsxs)("span",{className:i().step,children:["Mode: ",e.auto.mode]})]})]},e._id)})}),T&&(0,s.jsx)("div",{className:i().error,children:T}),(0,s.jsx)("button",{className:i().fab,onClick:()=>E("main"),children:(0,s.jsx)("span",{className:i().fabText,children:"+"})}),k&&(0,s.jsx)("div",{className:i().modalOverlay,onClick:()=>E(null),children:(0,s.jsxs)("div",{className:i().modalContent,onClick:e=>e.stopPropagation(),children:["main"===k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:i().modalTitle,children:"Choose an Option"}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>E("auto"),children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Auto Pilot Mode"})}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>E("schedule"),children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Schedule Task"})}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>{E(null),t.push("/video-production")},children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Create Manually"})}),(0,s.jsx)("button",{className:i().modalCancel,onClick:()=>E(null),children:(0,s.jsx)("span",{className:i().modalCancelText,children:"Cancel"})})]}),"auto"===k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:i().modalTitle,children:"Auto Pilot Mode"}),(0,s.jsx)("p",{className:i().modalSubTitle,children:"Select mode:"}),(0,s.jsx)("div",{className:i().optionRow,children:["Daily","Weekly"].map(e=>(0,s.jsx)("button",{className:"".concat(i().optionButton," ").concat(C===e?i().optionButtonSelected:""),onClick:()=>j(e),children:(0,s.jsx)("span",{className:i().optionButtonText,children:e})},e))}),"Weekly"===C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:i().modalSubTitle,children:"Select weekday:"}),(0,s.jsx)("div",{className:i().optionRow,children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,s.jsx)("button",{className:"".concat(i().optionButton," ").concat(B===e?i().optionButtonSelected:""),onClick:()=>g(e),children:(0,s.jsx)("span",{className:i().optionButtonText,children:e})},e))})]}),(0,s.jsx)("p",{className:i().modalSubTitle,children:"Select Hour (KST):"}),(0,s.jsx)("div",{className:i().optionRow,children:Array.from({length:24},(e,t)=>t).map(e=>(0,s.jsx)("button",{className:"".concat(i().optionButton," ").concat(S===e?i().optionButtonSelected:""),onClick:()=>L(e),children:(0,s.jsx)("span",{className:i().optionButtonText,children:e})},e))}),(0,s.jsx)("p",{className:i().modalSubTitle,children:"Time Conversion:"}),(0,s.jsxs)("p",{className:i().timeText,children:["KST: ",new Date().setHours(S,0,0,0)&&new Date().toLocaleTimeString()]}),(0,s.jsxs)("p",{className:i().timeText,children:["Canada: ",I.toLocaleTimeString()]}),(0,s.jsxs)("p",{className:i().timeText,children:["Australia: ",O.toLocaleTimeString()]}),(0,s.jsxs)("p",{className:i().timeText,children:["UK: ",F.toLocaleTimeString()]}),(0,s.jsx)("button",{className:i().modalButton,onClick:R,children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Save"})}),(0,s.jsx)("button",{className:i().modalCancel,onClick:()=>E("main"),children:(0,s.jsx)("span",{className:i().modalCancelText,children:"Back"})})]}),"schedule"===k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:i().modalTitle,children:"Schedule Task"}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>f(new Date),children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Set to Now"})}),(0,s.jsx)("p",{className:i().modalSubTitle,children:"Selected (KST):"}),(0,s.jsx)("p",{className:i().timeText,children:A.toLocaleString()}),(0,s.jsx)("p",{className:i().modalSubTitle,children:"Time Conversion:"}),(0,s.jsxs)("p",{className:i().timeText,children:["Canada: ",I.toLocaleTimeString()]}),(0,s.jsxs)("p",{className:i().timeText,children:["Australia: ",O.toLocaleTimeString()]}),(0,s.jsxs)("p",{className:i().timeText,children:["UK: ",F.toLocaleTimeString()]}),(0,s.jsx)("button",{className:i().modalButton,onClick:P,children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Save"})}),(0,s.jsx)("button",{className:i().modalCancel,onClick:()=>E("main"),children:(0,s.jsx)("span",{className:i().modalCancelText,children:"Back"})})]}),"scheduleDetail"===k&&y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:i().modalTitle,children:"Schedule Detail"}),(0,s.jsxs)("p",{className:i().modalSubTitle,children:[y.type.toUpperCase(),!y.active&&" (STOPPED)",y.auto&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),"Mode: ",y.auto.mode,(0,s.jsx)("br",{}),"Hour: ",y.auto.hour,y.auto.weekday&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),"Weekday: ",y.auto.weekday]})]})]}),y.scheduledFor&&(0,s.jsxs)("p",{className:i().timeText,children:["Scheduled For: ",new Date(y.scheduledFor).toLocaleString()]}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>V(y._id),children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Stop"})}),(0,s.jsx)("button",{className:i().modalButton,onClick:()=>b(y._id),children:(0,s.jsx)("span",{className:i().modalButtonText,children:"Delete"})}),(0,s.jsx)("button",{className:i().modalCancel,onClick:()=>E("main"),children:(0,s.jsx)("span",{className:i().modalCancelText,children:"Back"})})]})]})}),(0,s.jsx)("div",{className:i().footer,children:"\xa9 2025 Abrody"})]})}},98142:(e,t,a)=>{Promise.resolve().then(a.bind(a,95381))}},e=>{var t=t=>e(e.s=t);e.O(0,[986,3464,8441,1684,7358],()=>t(98142)),_N_E=e.O()}]);