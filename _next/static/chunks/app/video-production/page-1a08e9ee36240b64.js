(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3226],{5984:e=>{e.exports={container:"VideoProductionPage_container__0p1bN",scrollContent:"VideoProductionPage_scrollContent__tLjEv",pageTitle:"VideoProductionPage_pageTitle__qyqHo",formContainer:"VideoProductionPage_formContainer__pXf2G",stepContainer:"VideoProductionPage_stepContainer__83zX0",formLabel:"VideoProductionPage_formLabel__ms0no",subLabel:"VideoProductionPage_subLabel__W2ap0",textInput:"VideoProductionPage_textInput__oUJxa",picker:"VideoProductionPage_picker__JkZZD",button:"VideoProductionPage_button__JG0S0",buttonWide:"VideoProductionPage_buttonWide__xCWoB",buttonContainer:"VideoProductionPage_buttonContainer__YN7NB",buttonContainerImages:"VideoProductionPage_buttonContainerImages__475dP",buttonContainerVertical:"VideoProductionPage_buttonContainerVertical__ad6FX",editButtonContainer:"VideoProductionPage_editButtonContainer__ewJzT",stepTitle:"VideoProductionPage_stepTitle__gWl8_",resultContainer:"VideoProductionPage_resultContainer__jmaY_",resultText:"VideoProductionPage_resultText__TQcV9",infoText:"VideoProductionPage_infoText__IEN_K",errorText:"VideoProductionPage_errorText__7B2TI",sceneContainer:"VideoProductionPage_sceneContainer__3XCwg",sceneHeader:"VideoProductionPage_sceneHeader__1SDMe",imagePreview:"VideoProductionPage_imagePreview__ShWmk",loader:"VideoProductionPage_loader__J10Vw",spinner:"VideoProductionPage_spinner__6ZCZ9",spin:"VideoProductionPage_spin__W6bwL"}},32229:(e,a,t)=>{"use strict";t.d(a,{default:()=>d});var s=t(95155),n=t(12115),i=t(35695),o=t(23464),l=t(61065),r=t(5984),c=t.n(r);let d=e=>{let{taskId:a}=e,t=(0,i.useRouter)(),r=(0,i.useSearchParams)(),{SERVER_URL:d}=(0,l.U)(),[u,m]=(0,n.useState)(a||null),[h,p]=(0,n.useState)(0),[x,g]=(0,n.useState)(!1),[N,v]=(0,n.useState)(""),[_,j]=(0,n.useState)("Canada"),[C,b]=(0,n.useState)("Custom"),[P,f]=(0,n.useState)(""),[T,S]=(0,n.useState)(3),[w,k]=(0,n.useState)("DREAMSTUDIO"),[y,V]=(0,n.useState)(null),[E,A]=(0,n.useState)(null),[I,L]=(0,n.useState)(!1),[R,U]=(0,n.useState)([]),[D,O]=(0,n.useState)([]),[B,M]=(0,n.useState)([]),[F,K]=(0,n.useState)(""),W=()=>v("");(0,n.useEffect)(()=>{let e=r.get("taskId");e&&m(e)},[r]),(0,n.useEffect)(()=>{u||(async()=>{g(!0);try{let e=await o.A.post("".concat(d,"/api/video-tasks"),null,{withCredentials:!0});m(e.data.task._id)}catch(e){v(e.message)}finally{g(!1)}})()},[d,u]),(0,n.useEffect)(()=>{u&&(async()=>{g(!0);try{let e=(await o.A.get("".concat(d,"/api/video-tasks/").concat(u),{withCredentials:!0})).data.task;e.scenario&&(V(e.scenario),A(e.scenario)),U(e.audioUrls||[]),O(e.sceneImages||[]),M(e.videoUrls||[]),K(e.finalVideoUrl||""),p(e.currentStep||0)}catch(e){v(e.message)}finally{g(!1)}})()},[d,u]);let G=async()=>{W(),g(!0);try{let{scenario:e,newsArticles:a=[]}=(await o.A.post("".concat(d,"/api/video-production"),{action:"generate-scenario",country:_,conceptMode:C,concept:"Custom"===C?P:"",sceneCount:T,taskId:u},{withCredentials:!0})).data;V({...e,newsArticles:a}),A({...e,newsArticles:a}),p(1)}catch(e){v(e.message||"Failed to generate scenario.")}finally{g(!1)}},H=async()=>{W(),g(!0);try{if(!E)throw Error("No scenario.");let e=await Promise.all(E.scenes.map(async e=>(await o.A.post("".concat(d,"/api/video-production"),{action:"generate-tts",text:e.dialogues[0],taskId:u},{withCredentials:!0})).data.audio_url));U(e),p(2)}catch(e){v(e.message||"TTS failed.")}finally{g(!1)}},J=async()=>{W(),g(!0);try{if(!y)throw Error("No scenario.");let e=await Promise.all(y.scenes.map(async e=>(await o.A.post("".concat(d,"/api/video-production"),{action:"generate-image",prompt:"".concat(e.scenePrompt," in 9:16 aspect ratio for a reel video"),source:w,taskId:u},{withCredentials:!0})).data.image_url));O(e),p(3)}catch(e){v(e.message||"Image gen failed.")}finally{g(!1)}},Y=async()=>{W(),g(!0);try{if(!y)throw Error("No scenario.");let e=await Promise.all(y.scenes.map(async(e,a)=>{let t="SKIP"===w?{action:"generate-video",videoMode:"text",prompt:y.scenes[a].scenePrompt,duration:"5",ratio:"9:16",model:"kling-video/v1.6/standard/text-to-video",taskId:u}:{action:"generate-video",videoMode:"image",image:D[a],prompt:y.scenes[a].scenePrompt,duration:"5",ratio:"9:16",model:"kling-video/v1.6/standard/image-to-video",taskId:u};return(await o.A.post("".concat(d,"/api/video-production"),t,{withCredentials:!0})).data.video_url}));M(e),p(4)}catch(e){v(e.message||"Video clip gen failed.")}finally{g(!1)}},X=async()=>{W(),g(!0);try{if(R.length!==B.length)throw Error("Mismatch clips.");let e=await o.A.post("".concat(d,"/api/video-production"),{action:"merge-video",videoUrls:B,audioUrls:R,taskId:u},{withCredentials:!0});K(e.data.mergedVideoUrl),p(5)}catch(e){v(e.message||"Merge failed.")}finally{g(!1)}},Z=async e=>{W(),g(!0);try{await o.A.post("".concat(d,"/api/video-production"),{action:"upload-final-video",taskId:u,platform:e},{withCredentials:!0}),alert("Uploaded to ".concat(e,"!")),p(6)}catch(e){alert(e.message)}finally{g(!1)}},q=async()=>{if(!F)return alert("No video.");if(navigator.share)try{await navigator.share({title:"Final Video",url:F})}catch(e){alert(e.message)}else{let e=document.createElement("a");e.href=F,e.download="video.mp4",document.body.appendChild(e),e.click(),document.body.removeChild(e)}};return(0,s.jsx)("div",{className:c().container,children:(0,s.jsxs)("div",{className:c().scrollContent,children:[(0,s.jsx)("h1",{className:c().pageTitle,children:"Video Production Workflow"}),(()=>{switch(h){case 0:return(0,s.jsxs)("div",{className:c().formContainer,children:[(0,s.jsx)("label",{className:c().formLabel,children:"Select Country:"}),(0,s.jsxs)("select",{value:_,onChange:e=>j(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"",children:"None"}),(0,s.jsx)("option",{value:"Canada",children:"Canada"}),(0,s.jsx)("option",{value:"Australia",children:"Australia"}),(0,s.jsx)("option",{value:"United Kingdom",children:"United Kingdom"})]}),(0,s.jsx)("label",{className:c().formLabel,children:"Select Concept Mode:"}),(0,s.jsxs)("select",{value:C,onChange:e=>b(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"News",children:"News"}),(0,s.jsx)("option",{value:"Custom",children:"Custom"})]}),"Custom"===C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:c().formLabel,children:"Concept (opt.):"}),(0,s.jsx)("textarea",{className:c().textInput,placeholder:"e.g., funny, surprising",maxLength:100,value:P,onChange:e=>f(e.target.value)})]}),(0,s.jsx)("label",{className:c().formLabel,children:"Number of Scenes:"}),(0,s.jsx)("select",{value:T,onChange:e=>S(Number(e.target.value)),className:c().picker,children:Array.from({length:10},(e,a)=>a+1).map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("button",{className:c().button,onClick:G,children:(0,s.jsx)("span",{className:c().buttonText,children:"Generate Scenario"})})]});case 1:var e;return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Scenario Result"}),E?(0,s.jsxs)("div",{className:c().resultContainer,children:[(0,s.jsxs)("p",{className:c().resultText,children:["Overall: ",E.scenario]}),E.scenes.map((e,a)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",e.sceneNumber]}),(0,s.jsx)("label",{className:c().subLabel,children:"Dialogues:"}),I?e.dialogues.map((e,t)=>(0,s.jsx)("textarea",{className:c().textInput,maxLength:1e3,value:E.scenes[a].dialogues[t],onChange:e=>{let s={...E};s.scenes[a].dialogues[t]=e.target.value,A(s)}},t)):e.dialogues.map((e,a)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},a)),(0,s.jsx)("label",{className:c().subLabel,children:"Prompt:"}),I?(0,s.jsx)("textarea",{className:c().textInput,maxLength:1e3,value:E.scenes[a].scenePrompt,onChange:e=>{let t={...E};t.scenes[a].scenePrompt=e.target.value,A(t)}}):(0,s.jsx)("p",{className:c().resultText,children:e.scenePrompt})]},a)),(null==y?void 0:null===(e=y.newsArticles)||void 0===e?void 0:e.length)>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:c().stepTitle,children:"Source Articles"}),y.newsArticles.map((e,a)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsx)("p",{className:c().subLabel,children:e.title}),(0,s.jsx)("p",{className:c().resultText,children:e.source.name}),(0,s.jsx)("a",{className:c().resultText,style:{color:"blue"},href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read full article"})]},a))]})]}):(0,s.jsx)("p",{className:c().infoText,children:"No scenario yet."}),(0,s.jsxs)("div",{className:c().editButtonContainer,children:[(0,s.jsx)("button",{className:c().button,onClick:()=>{I&&y&&A(y),L(!I)},children:(0,s.jsx)("span",{className:c().buttonText,children:I?"Cancel Edit":"Edit Scenario"})}),I&&(0,s.jsx)("button",{className:c().button,onClick:()=>{E&&(V(E),L(!1))},children:(0,s.jsx)("span",{className:c().buttonText,children:"Save Changes"})}),(0,s.jsx)("button",{className:c().button,onClick:H,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Convert to Speech"})})]})]});case 2:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa02: TTS Conversion"}),(0,s.jsx)("div",{className:c().resultContainer,children:R.map((e,a)=>(0,s.jsxs)("p",{className:c().resultText,children:["Audio Clip ",a+1,": ",e]},a))}),(0,s.jsx)("label",{className:c().formLabel,children:"Select Image Source:"}),(0,s.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"DREAMSTUDIO",children:"DreamStudio"}),(0,s.jsx)("option",{value:"DALL-E",children:"DALL\xb7E\xa03"}),(0,s.jsx)("option",{value:"LoRA",children:"LoRA"}),(0,s.jsx)("option",{value:"SKIP",children:"Skip"})]}),(0,s.jsx)("div",{className:c().buttonContainerImages,children:"SKIP"===w?(0,s.jsx)("button",{className:c().button,onClick:()=>{O([]),p(3)},children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Skip Image Generation"})}):(0,s.jsx)("button",{className:c().button,onClick:J,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Generate Images"})})})]});case 3:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa03: Scene Images"}),(0,s.jsx)("div",{className:c().resultContainer,children:D.map((e,a)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",null==E?void 0:E.scenes[a].sceneNumber]}),(0,s.jsx)("img",{src:e,className:c().imagePreview,alt:"scene ".concat(a+1)}),(0,s.jsx)("p",{className:c().subLabel,children:"Dialogues:"}),null==E?void 0:E.scenes[a].dialogues.map((e,a)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},a))]},a))}),(0,s.jsx)("div",{className:c().buttonContainer,children:(0,s.jsx)("button",{className:c().button,onClick:Y,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Generate Video Clips"})})})]});case 4:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa04: Video Clips"}),(0,s.jsx)("div",{className:c().resultContainer,children:B.map((e,a)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",null==E?void 0:E.scenes[a].sceneNumber]}),(0,s.jsx)("video",{src:e,controls:!0,style:{width:"100%",height:250,borderRadius:10,marginBottom:5}}),(0,s.jsx)("p",{className:c().subLabel,children:"Dialogues:"}),null==E?void 0:E.scenes[a].dialogues.map((e,a)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},a))]},a))}),(0,s.jsx)("div",{className:c().buttonContainer,children:(0,s.jsx)("button",{className:c().button,onClick:X,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Merge Video"})})})]});case 5:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa05: Final Video"}),F?(0,s.jsx)("video",{src:F,controls:!0,autoPlay:!0,style:{width:"100%",height:250,borderRadius:10,marginBottom:5}}):(0,s.jsx)("p",{className:c().infoText,children:"No merged video yet."}),(0,s.jsxs)("div",{className:c().buttonContainerVertical,children:[["Instagram","Facebook","TikTok","Twitter","YouTube"].map(e=>(0,s.jsx)("button",{className:c().buttonWide,onClick:()=>Z(e),children:(0,s.jsxs)("span",{className:c().buttonText,children:["Upload to ",e]})},e)),(0,s.jsx)("button",{className:c().button,onClick:()=>Z("ALL"),children:(0,s.jsx)("span",{className:c().buttonText,children:"Upload All"})})]}),(0,s.jsxs)("div",{className:c().buttonContainer,children:[(0,s.jsx)("button",{className:c().button,onClick:q,children:(0,s.jsx)("span",{className:c().buttonText,children:"Download/Share Video"})}),(0,s.jsx)("button",{className:c().button,onClick:()=>t.back(),children:(0,s.jsx)("span",{className:c().buttonText,children:"Back to Settings"})})]})]});default:return null}})(),N&&(0,s.jsx)("p",{className:c().errorText,children:N}),x&&(0,s.jsx)("div",{className:c().loader,children:(0,s.jsx)("div",{className:c().spinner})})]})})}},35695:(e,a,t)=>{"use strict";var s=t(18999);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},61065:(e,a,t)=>{"use strict";t.d(a,{s:()=>r,U:()=>c});var s=t(95155),n=t(12115);let i=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),o={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let a=navigator.language.split("-");a.length>1&&(e=a[1])}let a="";switch(e.toUpperCase()){case"CA":a="ca.";break;case"AU":a="au.";break;case"GB":a="uk.";break;default:a=""}return console.log("domainPrefix: ",a),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:i.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:i.SC,FACEBOOK_BANNER_PLACEMENT_ID:i.O8},l=(0,n.createContext)(null),r=e=>{let{children:a}=e;return(0,s.jsx)(l.Provider,{value:o,children:a})},c=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},80175:(e,a,t)=>{Promise.resolve().then(t.bind(t,32229))}},e=>{var a=a=>e(e.s=a);e.O(0,[8199,3464,8441,1684,7358],()=>a(80175)),_N_E=e.O()}]);