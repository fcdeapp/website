(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3226],{5984:e=>{e.exports={container:"VideoProductionPage_container__0p1bN",scrollContent:"VideoProductionPage_scrollContent__tLjEv",pageTitle:"VideoProductionPage_pageTitle__qyqHo",formContainer:"VideoProductionPage_formContainer__pXf2G",stepContainer:"VideoProductionPage_stepContainer__83zX0",formLabel:"VideoProductionPage_formLabel__ms0no",subLabel:"VideoProductionPage_subLabel__W2ap0",textInput:"VideoProductionPage_textInput__oUJxa",picker:"VideoProductionPage_picker__JkZZD",button:"VideoProductionPage_button__JG0S0",buttonWide:"VideoProductionPage_buttonWide__xCWoB",buttonContainer:"VideoProductionPage_buttonContainer__YN7NB",buttonContainerImages:"VideoProductionPage_buttonContainerImages__475dP",buttonContainerVertical:"VideoProductionPage_buttonContainerVertical__ad6FX",editButtonContainer:"VideoProductionPage_editButtonContainer__ewJzT",stepTitle:"VideoProductionPage_stepTitle__gWl8_",resultContainer:"VideoProductionPage_resultContainer__jmaY_",resultText:"VideoProductionPage_resultText__TQcV9",infoText:"VideoProductionPage_infoText__IEN_K",errorText:"VideoProductionPage_errorText__7B2TI",sceneContainer:"VideoProductionPage_sceneContainer__3XCwg",sceneHeader:"VideoProductionPage_sceneHeader__1SDMe",imagePreview:"VideoProductionPage_imagePreview__ShWmk",loader:"VideoProductionPage_loader__J10Vw",spinner:"VideoProductionPage_spinner__6ZCZ9",spin:"VideoProductionPage_spin__W6bwL"}},32229:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(95155),n=a(12115),i=a(35695),r=a(23464),o=a(89760),l=a(5984),c=a.n(l);let d=()=>{let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{SERVER_URL:a}=(0,o.U)(),[l,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(0),[h,p]=(0,n.useState)(!1),[x,_]=(0,n.useState)(""),[N,g]=(0,n.useState)("Canada"),[C,v]=(0,n.useState)("Custom"),[E,j]=(0,n.useState)(""),[P,b]=(0,n.useState)(3),[T,f]=(0,n.useState)("DREAMSTUDIO"),[S,A]=(0,n.useState)(null),[I,L]=(0,n.useState)(null),[V,w]=(0,n.useState)(!1),[y,R]=(0,n.useState)([]),[k,D]=(0,n.useState)([]),[U,O]=(0,n.useState)([]),[B,F]=(0,n.useState)(""),M=()=>_("");(0,n.useEffect)(()=>{let e=t.get("taskId");e&&d(e)},[t]),(0,n.useEffect)(()=>{l||(async()=>{p(!0);try{let e=await r.A.post("".concat(a,"/api/video-tasks"),null,{withCredentials:!0});d(e.data.task._id)}catch(e){_(e.message)}finally{p(!1)}})()},[a,l]),(0,n.useEffect)(()=>{l&&(async()=>{p(!0);try{let e=(await r.A.get("".concat(a,"/api/video-tasks/").concat(l),{withCredentials:!0})).data.task;e.scenario&&(A(e.scenario),L(e.scenario)),R(e.audioUrls||[]),D(e.sceneImages||[]),O(e.videoUrls||[]),F(e.finalVideoUrl||""),m(e.currentStep||0)}catch(e){_(e.message)}finally{p(!1)}})()},[a,l]);let K=async()=>{M(),p(!0);try{let{scenario:e,newsArticles:t=[]}=(await r.A.post("".concat(a,"/api/video-production"),{action:"generate-scenario",country:N,conceptMode:C,concept:"Custom"===C?E:"",sceneCount:P,taskId:l},{withCredentials:!0})).data;A({...e,newsArticles:t}),L({...e,newsArticles:t}),m(1)}catch(e){_(e.message||"Failed to generate scenario.")}finally{p(!1)}},X=async()=>{M(),p(!0);try{if(!I)throw Error("No scenario.");let e=await Promise.all(I.scenes.map(async e=>(await r.A.post("".concat(a,"/api/video-production"),{action:"generate-tts",text:e.dialogues[0],taskId:l},{withCredentials:!0})).data.audio_url));R(e),m(2)}catch(e){_(e.message||"TTS failed.")}finally{p(!1)}},W=async()=>{M(),p(!0);try{if(!S)throw Error("No scenario.");let e=await Promise.all(S.scenes.map(async e=>(await r.A.post("".concat(a,"/api/video-production"),{action:"generate-image",prompt:"".concat(e.scenePrompt," in 9:16 aspect ratio for a reel video"),source:T,taskId:l},{withCredentials:!0})).data.image_url));D(e),m(3)}catch(e){_(e.message||"Image gen failed.")}finally{p(!1)}},G=async()=>{M(),p(!0);try{if(!S)throw Error("No scenario.");let e=await Promise.all(S.scenes.map(async(e,t)=>{let s="SKIP"===T?{action:"generate-video",videoMode:"text",prompt:S.scenes[t].scenePrompt,duration:"5",ratio:"9:16",model:"kling-video/v1.6/standard/text-to-video",taskId:l}:{action:"generate-video",videoMode:"image",image:k[t],prompt:S.scenes[t].scenePrompt,duration:"5",ratio:"9:16",model:"kling-video/v1.6/standard/image-to-video",taskId:l};return(await r.A.post("".concat(a,"/api/video-production"),s,{withCredentials:!0})).data.video_url}));O(e),m(4)}catch(e){_(e.message||"Video clip gen failed.")}finally{p(!1)}},H=async()=>{M(),p(!0);try{if(y.length!==U.length)throw Error("Mismatch clips.");let e=await r.A.post("".concat(a,"/api/video-production"),{action:"merge-video",videoUrls:U,audioUrls:y,taskId:l},{withCredentials:!0});F(e.data.mergedVideoUrl),m(5)}catch(e){_(e.message||"Merge failed.")}finally{p(!1)}},J=async e=>{M(),p(!0);try{await r.A.post("".concat(a,"/api/video-production"),{action:"upload-final-video",taskId:l,platform:e},{withCredentials:!0}),alert("Uploaded to ".concat(e,"!")),m(6)}catch(e){alert(e.message)}finally{p(!1)}},Z=async()=>{if(!B)return alert("No video.");if(navigator.share)try{await navigator.share({title:"Final Video",url:B})}catch(e){alert(e.message)}else{let e=document.createElement("a");e.href=B,e.download="video.mp4",document.body.appendChild(e),e.click(),document.body.removeChild(e)}};return(0,s.jsx)("div",{className:c().container,children:(0,s.jsxs)("div",{className:c().scrollContent,children:[(0,s.jsx)("h1",{className:c().pageTitle,children:"Video Production Workflow"}),(()=>{switch(u){case 0:return(0,s.jsxs)("div",{className:c().formContainer,children:[(0,s.jsx)("label",{className:c().formLabel,children:"Select Country:"}),(0,s.jsxs)("select",{value:N,onChange:e=>g(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"",children:"None"}),(0,s.jsx)("option",{value:"Canada",children:"Canada"}),(0,s.jsx)("option",{value:"Australia",children:"Australia"}),(0,s.jsx)("option",{value:"United Kingdom",children:"United Kingdom"})]}),(0,s.jsx)("label",{className:c().formLabel,children:"Select Concept Mode:"}),(0,s.jsxs)("select",{value:C,onChange:e=>v(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"News",children:"News"}),(0,s.jsx)("option",{value:"Custom",children:"Custom"})]}),"Custom"===C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{className:c().formLabel,children:"Concept (opt.):"}),(0,s.jsx)("textarea",{className:c().textInput,placeholder:"e.g., funny, surprising",maxLength:100,value:E,onChange:e=>j(e.target.value)})]}),(0,s.jsx)("label",{className:c().formLabel,children:"Number of Scenes:"}),(0,s.jsx)("select",{value:P,onChange:e=>b(Number(e.target.value)),className:c().picker,children:Array.from({length:10},(e,t)=>t+1).map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("button",{className:c().button,onClick:K,children:(0,s.jsx)("span",{className:c().buttonText,children:"Generate Scenario"})})]});case 1:var t;return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Scenario Result"}),I?(0,s.jsxs)("div",{className:c().resultContainer,children:[(0,s.jsxs)("p",{className:c().resultText,children:["Overall: ",I.scenario]}),I.scenes.map((e,t)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",e.sceneNumber]}),(0,s.jsx)("label",{className:c().subLabel,children:"Dialogues:"}),V?e.dialogues.map((e,a)=>(0,s.jsx)("textarea",{className:c().textInput,maxLength:1e3,value:I.scenes[t].dialogues[a],onChange:e=>{let s={...I};s.scenes[t].dialogues[a]=e.target.value,L(s)}},a)):e.dialogues.map((e,t)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},t)),(0,s.jsx)("label",{className:c().subLabel,children:"Prompt:"}),V?(0,s.jsx)("textarea",{className:c().textInput,maxLength:1e3,value:I.scenes[t].scenePrompt,onChange:e=>{let a={...I};a.scenes[t].scenePrompt=e.target.value,L(a)}}):(0,s.jsx)("p",{className:c().resultText,children:e.scenePrompt})]},t)),(null==S?void 0:null===(t=S.newsArticles)||void 0===t?void 0:t.length)>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:c().stepTitle,children:"Source Articles"}),S.newsArticles.map((e,t)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsx)("p",{className:c().subLabel,children:e.title}),(0,s.jsx)("p",{className:c().resultText,children:e.source.name}),(0,s.jsx)("a",{className:c().resultText,style:{color:"blue"},href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read full article"})]},t))]})]}):(0,s.jsx)("p",{className:c().infoText,children:"No scenario yet."}),(0,s.jsxs)("div",{className:c().editButtonContainer,children:[(0,s.jsx)("button",{className:c().button,onClick:()=>{V&&S&&L(S),w(!V)},children:(0,s.jsx)("span",{className:c().buttonText,children:V?"Cancel Edit":"Edit Scenario"})}),V&&(0,s.jsx)("button",{className:c().button,onClick:()=>{I&&(A(I),w(!1))},children:(0,s.jsx)("span",{className:c().buttonText,children:"Save Changes"})}),(0,s.jsx)("button",{className:c().button,onClick:X,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Convert to Speech"})})]})]});case 2:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa02: TTS Conversion"}),(0,s.jsx)("div",{className:c().resultContainer,children:y.map((e,t)=>(0,s.jsxs)("p",{className:c().resultText,children:["Audio Clip ",t+1,": ",e]},t))}),(0,s.jsx)("label",{className:c().formLabel,children:"Select Image Source:"}),(0,s.jsxs)("select",{value:T,onChange:e=>f(e.target.value),className:c().picker,children:[(0,s.jsx)("option",{value:"DREAMSTUDIO",children:"DreamStudio"}),(0,s.jsx)("option",{value:"DALL-E",children:"DALL\xb7E\xa03"}),(0,s.jsx)("option",{value:"LoRA",children:"LoRA"}),(0,s.jsx)("option",{value:"SKIP",children:"Skip"})]}),(0,s.jsx)("div",{className:c().buttonContainerImages,children:"SKIP"===T?(0,s.jsx)("button",{className:c().button,onClick:()=>{D([]),m(3)},children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Skip Image Generation"})}):(0,s.jsx)("button",{className:c().button,onClick:W,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Generate Images"})})})]});case 3:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa03: Scene Images"}),(0,s.jsx)("div",{className:c().resultContainer,children:k.map((e,t)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",null==I?void 0:I.scenes[t].sceneNumber]}),(0,s.jsx)("img",{src:e,className:c().imagePreview,alt:"scene ".concat(t+1)}),(0,s.jsx)("p",{className:c().subLabel,children:"Dialogues:"}),null==I?void 0:I.scenes[t].dialogues.map((e,t)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},t))]},t))}),(0,s.jsx)("div",{className:c().buttonContainer,children:(0,s.jsx)("button",{className:c().button,onClick:G,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Generate Video Clips"})})})]});case 4:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa04: Video Clips"}),(0,s.jsx)("div",{className:c().resultContainer,children:U.map((e,t)=>(0,s.jsxs)("div",{className:c().sceneContainer,children:[(0,s.jsxs)("h3",{className:c().sceneHeader,children:["Scene ",null==I?void 0:I.scenes[t].sceneNumber]}),(0,s.jsx)("video",{src:e,controls:!0,style:{width:"100%",height:250,borderRadius:10,marginBottom:5}}),(0,s.jsx)("p",{className:c().subLabel,children:"Dialogues:"}),null==I?void 0:I.scenes[t].dialogues.map((e,t)=>(0,s.jsxs)("p",{className:c().resultText,children:["- ",e]},t))]},t))}),(0,s.jsx)("div",{className:c().buttonContainer,children:(0,s.jsx)("button",{className:c().button,onClick:H,children:(0,s.jsx)("span",{className:c().buttonText,children:"Next: Merge Video"})})})]});case 5:return(0,s.jsxs)("div",{className:c().stepContainer,children:[(0,s.jsx)("h2",{className:c().stepTitle,children:"Step\xa05: Final Video"}),B?(0,s.jsx)("video",{src:B,controls:!0,autoPlay:!0,style:{width:"100%",height:250,borderRadius:10,marginBottom:5}}):(0,s.jsx)("p",{className:c().infoText,children:"No merged video yet."}),(0,s.jsxs)("div",{className:c().buttonContainerVertical,children:[["Instagram","Facebook","TikTok","Twitter","YouTube"].map(e=>(0,s.jsx)("button",{className:c().buttonWide,onClick:()=>J(e),children:(0,s.jsxs)("span",{className:c().buttonText,children:["Upload to ",e]})},e)),(0,s.jsx)("button",{className:c().button,onClick:()=>J("ALL"),children:(0,s.jsx)("span",{className:c().buttonText,children:"Upload All"})})]}),(0,s.jsxs)("div",{className:c().buttonContainer,children:[(0,s.jsx)("button",{className:c().button,onClick:Z,children:(0,s.jsx)("span",{className:c().buttonText,children:"Download/Share Video"})}),(0,s.jsx)("button",{className:c().button,onClick:()=>e.back(),children:(0,s.jsx)("span",{className:c().buttonText,children:"Back to Settings"})})]})]});default:return null}})(),x&&(0,s.jsx)("p",{className:c().errorText,children:x}),h&&(0,s.jsx)("div",{className:c().loader,children:(0,s.jsx)("div",{className:c().spinner})})]})})}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},80175:(e,t,a)=>{Promise.resolve().then(a.bind(a,32229))},89760:(e,t,a)=>{"use strict";a.d(t,{s:()=>m,U:()=>h});var s=a(95155),n=a(12115),i=a(49509);function r(e){switch(e.trim().toUpperCase()){case"BETA":return"https://beta.fcde.app";case"DEVELOPMENT":return"https://dev.fcde.app";case"CA":case"CANADA":return"https://ca.fcde.app";case"AU":case"AUSTRALIA":return"https://au.fcde.app";case"GB":case"UK":return"https://uk.fcde.app";case"KR":case"KOREA":return"https://kr.fcde.app";default:return"https://fcde.app"}}function o(){return"https://fcde.app"}async function l(e){try{return(await fetch("".concat(e,"/health"),{method:"GET"})).ok}catch(e){return!1}}async function c(){let e=null;try{let t=localStorage.getItem("selectedServer");t&&(e=t)}catch(e){}for(let t of(!e&&i.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER&&(e=i.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER),e||(e=function(){try{let e=localStorage.getItem("region");if(e)return e}catch(e){}if("undefined"!=typeof navigator&&navigator.language){let e=navigator.language.split("-");if(e.length>1)return e[1]}return"KR"}()),[e,"Beta","Development"])){let e=r(t);if(await l(e))return e}return r(e)}let d={SERVER_URL:o(),APP_VERSION:i.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:i.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:i.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(i.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(i.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},u=(0,n.createContext)(null),m=e=>{let{children:t}=e,[a,i]=(0,n.useState)(o());(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await c();e&&i(t)}catch(e){}})(),()=>{e=!1}},[]);let r={SERVER_URL:a,APP_VERSION:d.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:d.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:d.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:d.FEATURE_UNDER_DEV,TEST_AD_MODE:d.TEST_AD_MODE};return(0,s.jsx)(u.Provider,{value:r,children:t})},h=()=>{let e=(0,n.useContext)(u);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[8199,3464,8441,1684,7358],()=>t(80175)),_N_E=e.O()}]);