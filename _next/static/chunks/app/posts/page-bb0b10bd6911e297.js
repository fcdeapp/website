(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{70:(e,t,a)=>{"use strict";a.d(t,{F:()=>n,S:()=>s});let s=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=Math.floor((Date.now()-a)/6e4),n=Math.floor(s/60),o=Math.floor(n/24);return s<1?t("just_now"):s<60?t("minutes_ago",{count:s}):n<24?t("hours_ago",{count:n}):t("days_ago",{count:o})},n=(e,t)=>{let a=new Date(e).getTime();if(isNaN(a))return t("unknown");let s=a-Date.now(),n=Math.floor(Math.abs(s)/6e4),o=Math.floor(n/60);return s>0?o<1?t("minutes_remaining",{count:n}):o<24?t("hours_remaining",{count:o}):t("days_remaining",{count:Math.floor(o/24)}):t("meeting_passed")}},560:e=>{e.exports={modal:"MySubjectOrderChangeOverlay_modal__RoiU2",overlayBackground:"MySubjectOrderChangeOverlay_overlayBackground__PcSba",overlayContainer:"MySubjectOrderChangeOverlay_overlayContainer__EuZGx",header:"MySubjectOrderChangeOverlay_header__16gtS",headerLeft:"MySubjectOrderChangeOverlay_headerLeft__F_ezV",headerTitle:"MySubjectOrderChangeOverlay_headerTitle__ReqdJ",toggleViewButton:"MySubjectOrderChangeOverlay_toggleViewButton__Y7feF",toggleViewButtonText:"MySubjectOrderChangeOverlay_toggleViewButtonText__YYCzd",closeButton:"MySubjectOrderChangeOverlay_closeButton__s0fy6",deleteIcon:"MySubjectOrderChangeOverlay_deleteIcon__ijBo4",scrollContent:"MySubjectOrderChangeOverlay_scrollContent__HDfbv",groupContainer:"MySubjectOrderChangeOverlay_groupContainer__46Z_i",groupHeader:"MySubjectOrderChangeOverlay_groupHeader__Ko2TT",topicItem:"MySubjectOrderChangeOverlay_topicItem__eXgdr",topicButtonWrapper:"MySubjectOrderChangeOverlay_topicButtonWrapper___LHNf",topicButton:"MySubjectOrderChangeOverlay_topicButton__pYA0r",topicText:"MySubjectOrderChangeOverlay_topicText__bQAMb"}},629:(e,t,a)=>{Promise.resolve().then(a.bind(a,8464))},802:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155);a(2115);let n=e=>{let{visible:t,onLogin:a,onBrowse:n}=e;if(!t)return null;let o={backgroundColor:"transparent",padding:"12px 20px",border:"2px solid #0A1045",borderRadius:"30px",cursor:"pointer"},r={...o,borderColor:"#355C7D"},l={color:"#0A1045",fontSize:"16px",fontWeight:700,margin:0};return(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(45deg, rgba(0, 0, 0, 0.7), rgba(50, 50, 50, 0.7))",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("div",{style:{width:"90%",maxWidth:"500px",borderRadius:"30px",overflow:"hidden",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:(0,s.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.85)",borderRadius:"30px",padding:"30px 25px",textAlign:"center",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.35)"},children:[(0,s.jsx)("h2",{style:{fontSize:"28px",fontWeight:800,color:"#0A1045",marginBottom:"15px"},children:"Welcome to Facade"}),(0,s.jsx)("p",{style:{fontSize:"16px",color:"#333",marginBottom:"30px",lineHeight:"24px"},children:"To see announcements and recommendations, please log in."}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[(0,s.jsx)("button",{style:o,onClick:a,children:(0,s.jsx)("span",{style:l,children:"Log In"})}),(0,s.jsx)("button",{style:r,onClick:n,children:(0,s.jsx)("span",{style:l,children:"Continue as Guest"})})]})]})})})})}},1347:e=>{e.exports={container:"Post_container__s8CIx",fixedHeader:"Post_fixedHeader___NHM5",header:"Post_header__n8A3q",logoButton:"Post_logoButton__RWzXp",logo:"Post_logo__xgCW8",gradientBorderSearch:"Post_gradientBorderSearch__kXZ2K",searchBar:"Post_searchBar__UJa7C",profileButton:"Post_profileButton__r99O2",topicRow:"Post_topicRow__2Zor5",filterButton:"Post_filterButton__82y0h",subjectListButton:"Post_subjectListButton__NQLTe",topicSliderWrapper:"Post_topicSliderWrapper__rD1v4",flatList:"Post_flatList__hnkZD",postContainer:"Post_postContainer__rbrdD",loadingContainer:"Post_loadingContainer__BxUhB",loadingIndicator:"Post_loadingIndicator__VPeYc",loadingText:"Post_loadingText__5YBZ1",lottieAnimation:"Post_lottieAnimation__qWkU4",adContainer:"Post_adContainer__qIMm_",androidBlur:"Post_androidBlur__MOrFb",blurFull:"Post_blurFull__OGc7n",gradientMask:"Post_gradientMask__EKbQq"}},1772:e=>{e.exports={container:"ProfileWithFlag_container__fXJUY",profileImage:"ProfileWithFlag_profileImage__kvu3h",gradientBorder:"ProfileWithFlag_gradientBorder__c_Y4a",flagWrapper:"ProfileWithFlag_flagWrapper__C0EJW",flagImage:"ProfileWithFlag_flagImage__mZNJt",spinner:"ProfileWithFlag_spinner__j6Bkl",spin:"ProfileWithFlag_spin__7po5D",modal:"ProfileWithFlag_modal__KzG8T"}},1875:e=>{let t=Math.asin,a=Math.cos,s=Math.sin,n=Math.sqrt,o=Math.PI;function r(e){return e*o/180}function l(e){var t;return(t=s(e/2))*t}e.exports=function(e,s){let o=r(Array.isArray(e)?e[1]:e.latitude??e.lat),i=r(Array.isArray(s)?s[1]:s.latitude??s.lat),c=r(Array.isArray(e)?e[0]:e.longitude??e.lng??e.lon),g=r(Array.isArray(s)?s[0]:s.longitude??s.lng??s.lon);return 0xc2a532*t(n(l(i-o)+a(o)*a(i)*l(g-c)))}},2649:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var s=a(5155),n=a(2115),o=a(3464),r=a(1065),l=a(5695),i=a(802),c=a(7926),g=a(1772),u=a.n(g);let d=e=>"string"==typeof e&&""!==e.trim()?e.startsWith("http")||e.startsWith("/assets/")?e:"/assets/".concat(e):"/assets/Annonymous.png",p=e=>{let{userId:t,nickname:a,profileImage:g,profileThumbnail:p,countryName:f,size:m,trustBadge:_}=e,{SERVER_URL:h}=(0,r.U)(),y=(0,l.useRouter)(),[x,v]=(0,n.useState)(p||g||null),[k,j]=(0,n.useState)(f||null),[b,S]=(0,n.useState)(_||!1),[N,C]=(0,n.useState)(!1),[T,w]=(0,n.useState)(null),[B,I]=(0,n.useState)(!1),[P,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{w(localStorage.getItem("userId"))},[]),(0,n.useEffect)(()=>{f&&(p||g)&&void 0!==_||!t||(async()=>{try{C(!0);let e=localStorage.getItem("token");if(!e){C(!1);return}let a=await o.A.get("".concat(h,"/users/country?userId=").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(200===a.status){let e=a.data;j(e.originCountry),"string"!=typeof e.profileThumbnail&&(e.profileThumbnail=""),"string"!=typeof e.profileImage&&(e.profileImage=""),v(e.profileThumbnail||e.profileImage||""),S(e.trustBadge||!1)}else console.log("Failed to fetch user details")}catch(e){console.error("Error fetching user details:",e)}finally{C(!1)}})()},[f,p,g,_,t,h]);let A=c.X.find(e=>e.name===k),F=A?A.flag:null,E=d(x);return((0,n.useEffect)(()=>{I(!!localStorage.getItem("token"))},[]),N)?(0,s.jsx)("div",{className:u().container,style:{width:m,height:m},children:(0,s.jsx)("div",{className:u().spinner})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{onClick:()=>{if(!B){M(!0);return}let e={userId:t,nickname:a,profileImage:g||null,profileThumbnail:p||null};t===T?y.push("/myProfile?".concat(new URLSearchParams(e).toString())):y.push("/profile?".concat(new URLSearchParams(e).toString()))},className:u().container,style:{width:m,height:m},children:[b?(0,s.jsx)("div",{className:u().gradientBorder,style:{width:m,height:m,borderRadius:m/2},children:(0,s.jsx)("img",{src:E,alt:"Profile",className:u().profileImage,style:{width:m-4,height:m-4,borderRadius:(m-4)/2}})}):(0,s.jsx)("img",{src:E,alt:"Profile",className:u().profileImage,style:{width:m,height:m,borderRadius:m/2}}),F&&(0,s.jsx)("div",{className:u().flagWrapper,style:{width:m/3+4,height:m/3+4,borderRadius:m/6+2},children:(0,s.jsx)("img",{src:F,alt:"Flag",className:u().flagImage,style:{width:m/3,height:m/3,borderRadius:m/6}})})]}),P&&(0,s.jsx)("div",{className:u().modal,children:(0,s.jsx)(i.A,{visible:!0,onLogin:()=>{M(!1),y.push("/signInLogIn")},onBrowse:()=>M(!1)})})]})}},5193:e=>{e.exports={container:"TopicSlider_container__oASiY",topicToggleContainer:"TopicSlider_topicToggleContainer__4NXLY",slider:"TopicSlider_slider___LuZT",sliderGradient:"TopicSlider_sliderGradient__Sqi4B",horizontalScroll:"TopicSlider_horizontalScroll__LqJo5",topicButtonAll:"TopicSlider_topicButtonAll__nldzX",allButton:"TopicSlider_allButton__sRTVb",allTopicText:"TopicSlider_allTopicText__gzEJW",topicButton:"TopicSlider_topicButton__k8V42",topicText:"TopicSlider_topicText__Ufr1l",animatedBorderContainer:"TopicSlider_animatedBorderContainer__jul_U",gradientBorder:"TopicSlider_gradientBorder__1JJbH",compactShadow:"TopicSlider_compactShadow__mqfeT"}},6734:e=>{e.exports={box:"PostMain_box__ec0j5",cardContainer:"PostMain_cardContainer__5qPE2",postMain:"PostMain_postMain__eT_zr",postContent:"PostMain_postContent__hJ2Hs",transparentBackground:"PostMain_transparentBackground__CWnVO",textContent:"PostMain_textContent__rRdPy",authorInformation:"PostMain_authorInformation__iid80",profileImage:"PostMain_profileImage__xCp_Z",author:"PostMain_author__m70l4",authorText:"PostMain_authorText__s4Msz",timeCategoryText:"PostMain_timeCategoryText__lK3rT",recruitmentInfo:"PostMain_recruitmentInfo__O40pt",checkText:"PostMain_checkText__s0qol",recruitmentCompleteText:"PostMain_recruitmentCompleteText__h0E7F",circleWrapper:"PostMain_circleWrapper__HalE_",circle:"PostMain_circle__yHIVM",recruitmentText:"PostMain_recruitmentText__67dJN",meetingRow:"PostMain_meetingRow__huYw_",meetingTime:"PostMain_meetingTime__oXQBx",meetingStatus:"PostMain_meetingStatus__Grd7r",meetingStatusText:"PostMain_meetingStatusText__oUgra",postTextImageSet:"PostMain_postTextImageSet__LWNbb",postTextSet:"PostMain_postTextSet__f4z5_",postTitle:"PostMain_postTitle__zvGtm",postContents:"PostMain_postContents__9sSut",postImageCover:"PostMain_postImageCover__vfDgX",postImage:"PostMain_postImage__MAs9y",postInformation:"PostMain_postInformation__3cAX6",iconInfo:"PostMain_iconInfo__bvDbk",iconInfoAll:"PostMain_iconInfoAll__hV6GJ",iconText:"PostMain_iconText__YhBw2",icon:"PostMain_icon___k_FA",mapIcon:"PostMain_mapIcon__dzQLC",iconRow:"PostMain_iconRow__kY2E5",placeRow:"PostMain_placeRow__0UCye",translateButton:"PostMain_translateButton__l_ypf",spinner:"PostMain_spinner__3xF1s",spin:"PostMain_spin__4YjBp",floatingHeart:"PostMain_floatingHeart__ikSso",floatHeart:"PostMain_floatHeart__y4tAC",floatingHeartsContainer:"PostMain_floatingHeartsContainer__0htHr",mapBackground:"PostMain_mapBackground__Sh3va",blurOverlay:"PostMain_blurOverlay__Dv502",recruitmentBadge:"PostMain_recruitmentBadge__YZ3Jd",badgeIcon:"PostMain_badgeIcon__zAP8p",recruitmentBadgeText:"PostMain_recruitmentBadgeText__9u36U",marqueeContainer:"PostMain_marqueeContainer__KYf1B",marqueeWrapper:"PostMain_marqueeWrapper__flooE",marqueeText:"PostMain_marqueeText__SpYrF",applicantsContainer:"PostMain_applicantsContainer__7EuYa",appilcantsContainer:"PostMain_appilcantsContainer__k7udc",appilcantsText:"PostMain_appilcantsText__aw_ve",marquee:"PostMain_marquee__6aBae"}},8464:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var s=a(5155),n=a(2115),o=a(5695),r=a(3464),l=a(1218),i=a(1065),c=a(5193),g=a.n(c);let u=e=>{let{myTopics:t,selectedTopics:a,setSelectedTopics:o,isCompact:r,handleSelectTopic:l,t:i}=e;window.innerWidth;let c=(0,n.useRef)(null),[u,d]=(0,n.useState)([]),[p,f]=(0,n.useState)(0),[m,_]=(0,n.useState)(0),[h,y]=(0,n.useState)(0),[x,v]=(0,n.useState)("#0A1045"),k=(0,n.useRef)([]),j=t.length+1,b=(0,n.useCallback)(e=>{if(c.current&&k.current[e]){let t=c.current.getBoundingClientRect(),a=k.current[e].getBoundingClientRect(),s=a.left-t.left;d(t=>{let a=[...t];return a[e]=s,a}),0===e&&f(a.width)}},[]);(0,n.useEffect)(()=>{for(let e=0;e<j;e++)b(e);let e=()=>{for(let e=0;e<j;e++)b(e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,b,j]),(0,n.useEffect)(()=>{let e=0;if(a.includes("no_topic"))e=0,v("#0A1045");else{let s=t.findIndex(e=>a.includes(e.key));-1!==s&&(e=s+1,v(t[s].color))}if(void 0!==u[e]&&(_(u[e]),y(p),c.current&&k.current[e])){let t=k.current[e],a=c.current.offsetWidth,s=t.getBoundingClientRect(),n=c.current.getBoundingClientRect(),o=Math.max(0,s.left-n.left+s.width/2-a/2);c.current.scrollTo({left:o,behavior:"smooth"})}},[a,u,p,t]);let S=(e,t)=>{l(e,t)},N=a.includes("no_topic")?a.length-1:a.length,C={height:r?48:40,borderRadius:30,padding:"0 16px",display:"flex",justifyContent:"center",alignItems:"center",background:N===t.length?"linear-gradient(to right, #FF7E5F, #FD3A69)":"#EEEEEE"},T={fontSize:r?16:14,fontWeight:600,color:N===t.length?"#fff":"#888"},w=(e,t)=>{let a=e.split(" ")[0];return t&&r?a:t&&!r?e:t||r?"":e.replace(/[\u{1F600}-\u{1F64F}]/gu,"").trim()};return(0,s.jsx)("div",{className:g().container,style:{width:"100%",height:"60px"},children:(0,s.jsxs)("div",{className:g().topicToggleContainer,children:[(0,s.jsx)("div",{className:g().slider,style:{left:m+11+"px",width:h+"px",top:"0",bottom:"0",position:"absolute"},children:(0,s.jsx)("div",{className:g().sliderGradient})}),(0,s.jsxs)("div",{className:g().horizontalScroll,ref:c,children:[(0,s.jsx)("button",{ref:e=>{k.current[0]=e},className:g().topicButtonAll,style:{backgroundColor:"transparent",borderColor:"transparent",margin:"0 8px",height:r?48:40},onClick:()=>{a.includes("no_topic")&&a.length-1===t.length||o([...t.map(e=>e.key),"no_topic"]),l("no_topic",0)},children:(0,s.jsx)("div",{className:g().allButton,style:Object.assign({height:r?48:40},C),children:(0,s.jsx)("span",{className:g().allTopicText,style:T,children:i("select_all")})})}),t.map((e,t)=>{let n=a.includes(e.key);if(!n&&r)return null;let o=w(i("topics.".concat(e.key)),n);return(0,s.jsx)("div",{style:{transform:"scale(1)"},children:(0,s.jsx)("button",{ref:e=>{k.current[t+1]=e},className:g().topicButton,style:{backgroundColor:n?"#fff":"transparent",borderColor:n?e.color:"#D9D9D9",margin:"0 8px",height:r?48:40,padding:r?"0 8px":"0 16px"},onClick:()=>S(e.key,t+1),children:(0,s.jsx)("span",{className:g().topicText,style:{fontSize:n?r?30:14:r?22:12,color:n?e.color:"#888"},children:o})})},e.key)})]})]})})};var d=a(2649),p=a(70),f=a(1875),m=a.n(f);let _=async(e,t,a)=>{try{if(!localStorage.getItem("token"))return console.log("Not logged in: skipping location fetch."),"";let a=await new Promise((e,t)=>{if(!navigator.geolocation)return t(Error("Geolocation is not supported by this browser."));navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0})}),s={latitude:a.coords.latitude,longitude:a.coords.longitude},n=m()(s,{latitude:e,longitude:t}),o=!navigator.language.includes("US");return h(n,o)}catch(e){return console.error("Error fetching location:",e),a("placeDetails.locationError")}},h=(e,t)=>{if(t)return e<1e3?"".concat(Math.round(e)," m"):e<1e4?"".concat((e/1e3).toFixed(1)," km"):"".concat(Math.round(e/1e3)," km");{let t=3.28084*e;if(t<5280)return"".concat(Math.round(t)," ft");{let e=t/5280;return e<10?"".concat(e.toFixed(1)," mi"):"".concat(Math.round(e)," mi")}}};var y=a(6734),x=a.n(y);let v=e=>e?e.startsWith("http")||e.startsWith("/assets/")?e:"/assets/".concat(e):"",k=e=>{let{text:t,style:a,containerStyle:o,speed:r=6e3,repeatSpacer:l=80,parentWidth:i}=e,[c,g]=(0,n.useState)(0),[u,d]=(0,n.useState)(!1),p=(0,n.useRef)(null),f=()=>{if(p.current){let e=p.current.offsetWidth;g(e),d(e>.6*i)}};return(0,n.useEffect)(()=>{f()},[t,i]),(0,s.jsx)("div",{className:x().marqueeContainer,style:{...o,whiteSpace:"nowrap",overflow:"hidden"},children:u?(0,s.jsxs)("div",{className:x().marqueeWrapper,style:{animation:"marquee ".concat(r,"ms linear infinite"),width:2*c+l},children:[(0,s.jsx)("div",{className:x().marqueeText,style:a,ref:p,children:t}),(0,s.jsx)("div",{style:{paddingLeft:l}}),(0,s.jsx)("div",{className:x().marqueeText,style:a,children:t})]}):(0,s.jsx)("div",{className:x().marqueeText,style:a,ref:p,children:t})})},j=e=>{try{let t=new Date(e);if(isNaN(t.getTime()))return"unknown";return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)}catch(e){return console.error("Error formatting ISO date:",e),"unknown"}},b=(e,t)=>e?e.length>t?"".concat(e.substring(0,t),"..."):e:"",S=e=>{let{postId:t,author:a,time:c,meetingTime:g,meetingPlace:u,meetingCity:f,meetingCountry:m,category:h,title:y,content:S,likes:N,comments:C,commentList:T,visitors:w,visitedUsers:B=[],likedUsers:I=[],nicknameOption:P,profileImage:M,profileThumbnail:A,image:F,thumbnail:E,recruitmentCount:O,applicantsCount:D,userId:z,applicants:R,isBuddyPost:W,latitude:L,longitude:U}=e,{SERVER_URL:q}=(0,i.U)(),{t:G}=(0,l.Bd)(),H=(0,o.useRouter)(),[J,K]=(0,n.useState)(!1),[Y,V]=(0,n.useState)(!1),[X,Z]=(0,n.useState)({title:y,content:S}),[Q,$]=(0,n.useState)(!1),[ee,et]=(0,n.useState)(N),[ea,es]=(0,n.useState)(w),[en,eo]=(0,n.useState)(!1),[er,el]=(0,n.useState)(""),[ei,ec]=(0,n.useState)(""),[eg,eu]=(0,n.useState)(!1),[ed,ep]=(0,n.useState)([]),[ef,em]=(0,n.useState)(!1),[e_,eh]=(0,n.useState)(!1),[ey,ex]=(0,n.useState)([]),[ev,ek]=(0,n.useState)(window.innerWidth),[ej,eb]=(0,n.useState)(0),[eS,eN]=(0,n.useState)(0),[eC,eT]=(0,n.useState)(!1),[ew,eB]=(0,n.useState)(!0),[eI,eP]=(0,n.useState)(!1),[eM,eA]=(0,n.useState)(0),[eF,eE]=(0,n.useState)(null),eO=(0,n.useRef)(null),eD=window.innerWidth,ez=window.innerHeight,eR=(0,n.useRef)(0),eW="AI"===P?O>0?D/O:0:(D+1)/(O+1);(0,n.useEffect)(()=>{(async()=>{eB(!0);let e=localStorage.getItem("token");if(!e){console.log("No token found, skipping status check."),eB(!1);return}try{let{data:a}=await r.A.post("".concat(q,"/posts/").concat(t,"/visit"),{id:t},{headers:{Authorization:"Bearer ".concat(e)}});es(a.visitors);let{data:s}=await r.A.get("".concat(q,"/posts/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});$(s.likedUsers.includes(z)),et(s.likes),eo(s.commentList.some(e=>e.author===z))}catch(e){console.error("Error updating status:",e)}finally{eB(!1)}})()},[t,z,q]),(0,n.useEffect)(()=>{let e=async()=>{let e=3;for(;e>0;){try{let e=localStorage.getItem("token");if(!e){console.log("No token found");return}let{data:t}=await r.A.post("".concat(q,"/users/profiles"),{userIds:R},{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});ep(t.users);return}catch(e){console.error("Error fetching applicants profiles:",e)}await new Promise(t=>setTimeout(t,1e3*(4-e))),e-=1}};R&&R.length>0&&e()},[R,q]),(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let{data:t}=await r.A.get("".concat(q,"/users/me"),{headers:{Authorization:"Bearer ".concat(e)}});el(t.userId),ec(t.nickname)}catch(e){console.log("Error fetching user data:",e)}else console.log("No token found")})()},[q]),(0,n.useEffect)(()=>{eO.current&&eA(eO.current.offsetWidth)},[]),(0,n.useEffect)(()=>{(async()=>{L&&U&&eE(await _(L,U,G))})()},[L,U,G]);let eL=()=>{ek(0),eb(1),eN(200),em(!0)},eU=()=>{L&&U&&eL()},eq=()=>{eb(0),ek(eD),eN(0),setTimeout(()=>{em(!1)},500)},eG=()=>{eh(!1),eu(e=>!e)},eH=()=>{eh(!1)},eJ=async()=>{V(!0);let e=localStorage.getItem("token");if(!e){alert(G("noToken")),V(!1);return}try{let a=localStorage.getItem("language"),s="".concat(q,"/translate/posts/").concat(t,"?targetLanguage=").concat(a),{data:n}=await r.A.get(s,{headers:{Authorization:"Bearer ".concat(e)}});Z(J?{title:y,content:S}:{title:n.title,content:n.content}),K(!J)}catch(e){console.error(e),alert(G("translateError"))}finally{V(!1)}},eK=(0,n.useRef)(0),eY=()=>{eK.current+=1;let e="".concat(Date.now(),"_").concat(eK.current,"_").concat(Math.random().toString(36).substring(2,11));ex(t=>[...t,e]),setTimeout(()=>{ex(t=>t.filter(t=>t!==e))},2500)},eV=async()=>{let e=Date.now();if(e-eR.current<500||(eR.current=e,eC||ew))return;let a=localStorage.getItem("token");if(a){eT(!0);try{$(!Q),eY();let e=W?"".concat(q,"/buddyPosts"):"".concat(q,"/posts"),{data:s}=await (0,r.A)({url:"".concat(e,"/").concat(t,"/like"),method:Q?"delete":"post",headers:{Authorization:"Bearer ".concat(a)}});et(s.likes)}catch(e){console.error("Error liking post:",e)}finally{eT(!1)}}},eX=e=>{let{width:t,height:a}=e,n=Math.random()*t*.8+.1*t;return(0,s.jsx)("img",{src:v("like-colored.png"),alt:"heart",className:x().floatingHeart,style:{position:"absolute",width:40,height:40,left:n}})},eZ=async()=>{if(!ew)try{let e=localStorage.getItem("token"),s=W?"".concat(q,"/buddy-post"):"".concat(q,"/posts"),n=ea;if(e)try{let{data:a}=await r.A.post("".concat(s,"/").concat(t,"/visit"),null,{headers:{Authorization:"Bearer ".concat(e)}});n=a.visitors,es(n)}catch(e){console.error("Failed to update visitor count",e)}else console.log("Token not found, skipping visitor update.");let o=new URLSearchParams({id:t,author:a,time:c,meetingTime:g,meetingPlace:u,meetingCity:f,meetingCountry:m,category:h,title:y,content:S,likes:ee.toString(),comments:C.toString(),visitors:ea.toString(),profileImage:v(M),image:v(F),thumbnail:v(E),recruitmentCount:O.toString(),applicantsCount:D.toString(),applicants:JSON.stringify(R),isBuddyPost:W?"true":"false",latitude:(null==L?void 0:L.toString())||"",longitude:(null==U?void 0:U.toString())||""});H.push("/fullPost?".concat(o.toString()))}catch(e){console.error("Error visiting post:",e)}};return(0,s.jsx)("div",{className:x().box,onClick:eZ,ref:eO,onLoad:()=>{eO.current&&eA(eO.current.offsetWidth)},children:(0,s.jsxs)("div",{className:x().cardContainer,children:[(0,s.jsxs)("div",{className:x().postMain,style:{boxShadow:"0px 2px 4px rgba(0,0,0,0.2)"},children:[(0,s.jsx)("div",{className:"".concat(x().postContent," ").concat(ef?x().transparentBackground:""),children:(0,s.jsxs)("div",{className:x().textContent,children:[(0,s.jsxs)("div",{className:x().authorInformation,children:[(0,s.jsx)("div",{className:x().profileImage,children:"AI"===P?(0,s.jsx)("img",{src:v("AI.png"),alt:"AI",style:{width:48,height:48,borderRadius:24,objectFit:"cover"}}):(0,s.jsx)(d.A,{userId:z,nickname:a,profileImage:v(M)||v("Annonymous.png"),profileThumbnail:v(A),size:48,countryName:void 0})}),(0,s.jsxs)("div",{className:x().author,children:[(0,s.jsx)("p",{className:x().authorText,children:a}),(0,s.jsxs)("p",{className:x().timeCategoryText,children:[(0,p.S)(c,G)," \xb7 ",G("topics.".concat(h))]})]}),(0,s.jsxs)("div",{className:x().recruitmentInfo,children:[D>=O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:x().checkText,children:"✓"}),(0,s.jsx)("p",{className:x().recruitmentCompleteText,children:G("recruitment_status_complete")})]}):(0,s.jsx)("div",{className:x().circleWrapper,children:(0,s.jsx)("div",{className:x().circle,style:{background:"conic-gradient(#D8315B ".concat(100*eW,"%, #fff ").concat(100*eW,"%)")}})}),(0,s.jsx)("p",{className:x().recruitmentText,style:{color:D<O&&eg?"#1a1045":"transparent",fontSize:D<O&&eg?12:1,marginTop:D<O&&eg?5:0},children:"AI"===P?"".concat(D," / ").concat(O):"".concat(D+1," / ").concat(O+1)})]})]}),(0,s.jsxs)("div",{className:x().postTextImageSet,children:[(0,s.jsxs)("div",{className:x().postTextSet,style:{width:F?"60%":"100%"},children:[(0,s.jsx)("p",{className:x().postTitle,children:X.title}),(0,s.jsxs)("div",{className:x().meetingRow,children:[(0,s.jsx)("p",{className:x().meetingTime,children:j(g)}),(0,s.jsx)("div",{className:x().meetingStatus,children:(0,s.jsx)("p",{className:x().meetingStatusText,children:(0,p.F)(g,G)})})]}),(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),eP(e=>!e)},children:(0,s.jsx)("p",{className:x().postContents,children:b(X.content,eI?1e3:100)})})]}),E||F?(0,s.jsx)("div",{className:x().postImageCover,children:(0,s.jsx)("img",{className:x().postImage,src:v(E||F),alt:"post",onError:e=>console.warn("Failed to load image:",e)})}):(0,s.jsx)("div",{className:x().postImageCover})]})]})}),(0,s.jsxs)("div",{className:x().postInformation,children:[e_?(0,s.jsxs)("div",{className:x().iconInfoAll,children:[(0,s.jsxs)("div",{className:x().iconInfo,onClick:e=>{e.stopPropagation(),eH()},style:{backgroundColor:"transparent",borderRadius:8},children:[(0,s.jsx)("img",{src:v("eye-colored.png"),alt:"visitor",className:x().icon}),(0,s.jsx)("p",{className:x().iconText,children:ea})]}),(0,s.jsxs)("div",{className:x().iconInfo,onClick:e=>{e.stopPropagation(),eV()},style:{backgroundColor:"transparent",borderRadius:8},children:[(0,s.jsx)("img",{src:Q?v("like-colored.png"):v("like-icon.png"),alt:"like",className:x().icon}),(0,s.jsx)("p",{className:x().iconText,children:ee})]}),(0,s.jsx)("div",{className:x().floatingHeartsContainer,children:ey.map(e=>(0,s.jsx)(eX,{width:eD,height:ez},e))}),(0,s.jsxs)("div",{className:x().iconInfo,onClick:e=>{e.stopPropagation(),eH()},style:{backgroundColor:"transparent",borderRadius:8},children:[(0,s.jsx)("img",{src:v("comment-icon.png"),alt:"comment",className:x().icon}),(0,s.jsx)("p",{className:x().iconText,children:C})]})]}):(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),eh(!0),eq()},children:(0,s.jsx)("div",{className:x().iconInfoAll,children:(0,s.jsx)("div",{className:x().iconInfo,children:(0,s.jsx)("img",{src:v("plus-icon.png"),alt:"plus",className:x().icon})})})}),ef?(0,s.jsxs)("div",{className:x().placeRow,style:{transform:"translateX(".concat(ev,"px)"),opacity:ej,zIndex:10},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{onClick:eq,children:(0,s.jsx)("img",{src:v("map-colored.png"),alt:"map",className:x().mapIcon})}),(0,s.jsx)("div",{onClick:eq,style:{maxWidth:.6*eD},children:(0,s.jsx)(k,{text:u||G("defaultMeetingPlace"),style:void 0,parentWidth:eM||0,containerStyle:{maxWidth:.6*eD,alignSelf:"flex-start"},speed:6e3,repeatSpacer:80})})]}):eg&&R.length>0?(0,s.jsxs)("div",{className:x().applicantsContainer,onClick:e=>{e.stopPropagation(),eG()},children:[ed.map((e,t)=>{var a;return(0,s.jsx)(d.A,{userId:e.userId,nickname:e.nickname,profileImage:v(e.profileImage),profileThumbnail:v(e.profileThumbnail),size:30},null!==(a=e.userId)&&void 0!==a?a:t)}),(0,s.jsxs)("div",{className:x().appilcantsContainer,children:[(0,s.jsx)("img",{src:v("participants-icon.png"),alt:"participants",className:x().iconColored}),(0,s.jsx)("p",{className:x().appilcantsText,children:R.length})]})]}):(0,s.jsxs)("div",{className:x().iconRow,children:[(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),L&&U&&(eU(),eH())},children:(0,s.jsx)("img",{src:v("map-icon.png"),alt:"map icon",className:x().icon})}),(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),eG()},children:(0,s.jsx)("img",{src:v("participants-icon.png"),alt:"participants icon",className:x().icon})}),(0,s.jsx)("div",{onClick:e=>{e.stopPropagation(),eJ()},className:x().translateButton,style:{pointerEvents:Y?"none":"auto"},children:Y?(0,s.jsx)("div",{className:x().spinner}):(0,s.jsx)("img",{src:v("translate-icon.png"),alt:"translate icon",className:"".concat(x().icon," ").concat(J?x().iconTranslated:"")})})]})]})]}),D>=O&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:x().blurOverlay}),(0,s.jsxs)("div",{className:x().recruitmentBadge,children:[(0,s.jsx)("img",{src:v("checkedComponent.png"),alt:"badge",className:x().badgeIcon}),(0,s.jsx)("p",{className:x().recruitmentBadgeText,children:G("recruitment_status_complete")})]})]})]})})};var N=a(8997),C=a.n(N);let T={"United Kingdom":"/assets/flags/uk-flag.png","United States":"/assets/flags/usa-flag.png","South Korea":"/assets/flags/south-korea-flag.png",Japan:"/assets/flags/japan-flag.png",Germany:"/assets/flags/germany-flag.png",France:"/assets/flags/france-flag.png",Canada:"/assets/flags/canada-flag.png",Australia:"/assets/flags/australia-flag.png",Spain:"/assets/flags/spain-flag.png",China:"/assets/flags/china-flag.png","Saudi Arabia":"/assets/flags/saudi-arabia-flag.png",Poland:"/assets/flags/poland-flag.png",Portugal:"/assets/flags/portugal-flag.png",India:"/assets/flags/india-flag.png",Russia:"/assets/flags/russia-flag.png",Mexico:"/assets/flags/mexico-flag.png",Netherlands:"/assets/flags/netherlands-flag.png",Italy:"/assets/flags/italy-flag.png",Turkey:"/assets/flags/turkey-flag.png",Brazil:"/assets/flags/brazil-flag.png",UAE:"/assets/flags/united-arab-emirates-flag.png",Switzerland:"/assets/flags/switzerland-flag.png",Denmark:"/assets/flags/denmark-flag.png",Singapore:"/assets/flags/singapore-flag.png",Romania:"/assets/flags/romania-flag.png",Greece:"/assets/flags/greece-flag.png",Belgium:"/assets/flags/belgium-flag.png",Ukraine:"/assets/flags/ukraine-flag.png",Vietnam:"/assets/flags/vietnam-flag.png","Czech Republic":"/assets/flags/czech-republic-flag.png","New Zealand":"/assets/flags/new-zealand-flag.png",Norway:"/assets/flags/norway-flag.png",Israel:"/assets/flags/israel-flag.png",Sweden:"/assets/flags/sweden-flag.png",Thailand:"/assets/flags/thailand-flag.png",Hungary:"/assets/flags/hungary-flag.png",Indonesia:"/assets/flags/indonesia-flag.png",Austria:"/assets/flags/austria-flag.png",Palestine:"/assets/flags/palestine-flag.png",Finland:"/assets/flags/finland-flag.png",Slovakia:"/assets/flags/slovakia-flag.png",Pakistan:"/assets/flags/pakistan-flag.png",Serbia:"/assets/flags/serbia-flag.png",Egypt:"/assets/flags/egypt-flag.png",Ireland:"/assets/flags/ireland-flag.png",England:"/assets/flags/england-flag.png",Chile:"/assets/flags/chile-flag.png",Croatia:"/assets/flags/croatia-flag.png",Argentina:"/assets/flags/argentina-flag.png","South Africa":"/assets/flags/south-africa-flag.png",Morocco:"/assets/flags/morocco-flag.png",Georgia:"/assets/flags/georgia-flag.png",Colombia:"/assets/flags/colombia-flag.png",Qatar:"/assets/flags/qatar-flag.png",Bulgaria:"/assets/flags/bulgaria-flag.png",Albania:"/assets/flags/albania-flag.png",Bangladesh:"/assets/flags/bangladesh-flag.png",Philippines:"/assets/flags/philiphines-flag.png",Scotland:"/assets/flags/scotland-flag.png",Algeria:"/assets/flags/algeria-flag.png",Azerbaijan:"/assets/flags/azerbaijan-flag.png",Kazakhstan:"/assets/flags/kazakhstan-flag.png",Lithuania:"/assets/flags/lithuania-flag.png",Nigeria:"/assets/flags/nigeria-flag.png",Estonia:"/assets/flags/estonia-flag.png",Montenegro:"/assets/flags/montenegro-flag.png",Peru:"/assets/flags/peru-flag.png",Jamaica:"/assets/flags/jamaica-flag.png",Malta:"/assets/flags/malta-flag.png",Uruguay:"/assets/flags/uruguay-flag.png",Iceland:"/assets/flags/iceland-flag.png",Bahrain:"/assets/flags/bahrain-flag.png",Luxembourg:"/assets/flags/luxembourg-flag.png","Costa Rica":"/assets/flags/costa-rica-flag.png","Puerto Rico":"/assets/flags/puerto-rico-flag.png",Jordan:"/assets/flags/jordan-flag.png",Kuwait:"/assets/flags/kuwait-flag.png",Venezuela:"/assets/flags/venezuela-flag.png",Ghana:"/assets/flags/ghana-flag.png",Tunisia:"/assets/flags/tunusia-flag.png",Nepal:"/assets/flags/nepal-flag.png","Ivory Coast":"/assets/flags/ivory-coast-flag.png",Macedonia:"/assets/flags/macedonia-flag.png",Kyrgyzstan:"/assets/flags/kyrgyzstan-flag.png",Uzbekistan:"/assets/flags/uzbekistan-flag.png",Libya:"/assets/flags/libya-flag.png",Bosnia:"/assets/flags/bosnia-flag.png",Iran:"/assets/flags/iran-flag.png",Kosovo:"/assets/flags/kosovo-flag.png",Mongolia:"/assets/flags/mongolia-flag.png",Syria:"/assets/flags/syria-flag.png",Tanzania:"/assets/flags/tanzania-flag.png",Malaysia:"/assets/flags/malaysia-flag.png",Paraguay:"/assets/flags/paraguay-flag.png",Monaco:"/assets/flags/monaco-flag.png",Senegal:"/assets/flags/senegal-flag.png",Somalia:"/assets/flags/somalia-flag.png","Dominican Republic":"/assets/flags/dominican-republic-flag.png",Cameroon:"/assets/flags/cameroon-flag.png","Republic of Congo":"/assets/flags/republic-of-congo-flag.png",Guatemala:"/assets/flags/guatemala-flag.png",Sudan:"/assets/flags/sudan-flag.png",Cuba:"/assets/flags/cuba-flag.png",Tajikistan:"/assets/flags/tajikistan-flag.png",Laos:"/assets/flags/laos-flag.png",Honduras:"/assets/flags/honduras-flag.png",Ethiopia:"/assets/flags/ethiopia-flag.png",Yemen:"/assets/flags/yemen-flag.png",Guinea:"/assets/flags/guinea-flag.png",Slovenia:"/assets/flags/slovenia-flag.png","Burkina Faso":"/assets/flags/burkina-faso-flag.png",Bahamas:"/assets/flags/bahamas-flag.png","North Korea":"/assets/flags/north-korea-flag.png",Turkmenistan:"/assets/flags/turkmenistan-flag.png",Mauritius:"/assets/flags/mauritius-flag.png",Gambia:"/assets/flags/gambia-flag.png",Niger:"/assets/flags/niger-flag.png","Trinidad and Tobago":"/assets/flags/trinidad-and-tobago-flag.png","Sierra Leone":"/assets/flags/sierra-leone-flag.png",Benin:"/assets/flags/benin-flag.png","South Sudan":"/assets/flags/south-sudan-flag.png",Togo:"/assets/flags/togo-flag.png",Mauritania:"/assets/flags/mauritania-flag.png",Madagascar:"/assets/flags/madagascar-flag.png","Saint Vincent and the Grenadines":"/assets/flags/saint-vincent-and-the-grenadines-flag.png",Suriname:"/assets/flags/suriname-flag.png","Faroe Islands":"/assets/flags/faroe-islands-flag.png",Greenland:"/assets/flags/greenland-flag.png",Burundi:"/assets/flags/burundi-flag.png",Guyana:"/assets/flags/guyana-flag.png","French Guiana":"/assets/flags/french-guiana-flag.png",Tonga:"/assets/flags/tonga-flag.png","Central African Republic":"/assets/flags/central-african-republic-flag.png",Djibouti:"/assets/flags/djibouti-flag.png"},w=e=>{let{visible:t,onClose:a,sortOption:o,setSortOption:r,nearbyOption:c,setNearbyOption:g,countryOption:u,setCountryOption:d,currentCountry:p,currentCity:f}=e,{SERVER_URL:m}=(0,i.U)(),{t:_}=(0,l.Bd)(),[h,y]=(0,n.useState)({opacity:0,transform:"scale(0.9)"}),[x,v]=(0,n.useState)(t);(0,n.useEffect)(()=>{t?(v(!0),setTimeout(()=>{y({opacity:1,transform:"scale(1)"})},10)):(y({opacity:0,transform:"scale(0.9)"}),setTimeout(()=>{v(!1),a()},300))},[t,a]);let[k,j]=(0,n.useState)(1),[b,S]=(0,n.useState)(1),[N,w]=(0,n.useState)(1),[B,I]=(0,n.useState)(1),[P,M]=(0,n.useState)(1),[A,F]=(0,n.useState)(1);return(0,s.jsx)(s.Fragment,{children:x&&(0,s.jsx)("div",{className:C().modalOverlay,style:h,children:(0,s.jsxs)("div",{className:C().overlayInnerContent,children:[(0,s.jsx)("h2",{className:C().overlayTitle,children:_("filter_options")}),(0,s.jsxs)("div",{className:C().optionGroup,children:[(0,s.jsx)("span",{className:C().optionLabel,children:_("sort_by")}),(0,s.jsx)("button",{className:C().optionButton,onClick:()=>{let e=["latest","popularity","recommended","distance"],t=e[(e.indexOf(o)+1)%e.length];j(.8),S(0),setTimeout(()=>{r(t),j(1.1),S(1),setTimeout(()=>{j(1)},100)},200)},children:(0,s.jsx)("span",{className:C().optionText,style:{transform:"scale(".concat(k,")"),opacity:b},children:_("sort_options.".concat(o))})})]}),(0,s.jsxs)("div",{className:C().optionGroup,children:[(0,s.jsx)("span",{className:C().optionLabel,children:_("nearby_filter_options")}),(0,s.jsx)("button",{className:C().optionButton,onClick:()=>{let e=c===_("nearby-only")?_("anywhere"):_("nearby-only");w(.8),I(0),setTimeout(()=>{g(e),w(1.1),I(1),setTimeout(()=>{w(1)},100)},200)},children:(0,s.jsx)("span",{className:C().optionText,style:{transform:"scale(".concat(N,")"),opacity:B},children:_("nearby_options.".concat(c))})})]}),void 0!==u&&void 0!==d&&void 0!==p&&void 0!==f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:C().optionGroup,children:[(0,s.jsx)("span",{className:C().optionLabel,children:_("current_location")}),(0,s.jsxs)("div",{className:C().locationInfoContainer,children:["Unknown"!==p&&""!==p&&(0,s.jsx)("img",{src:T[p]||"",alt:p,className:C().locationFlag}),(0,s.jsxs)("div",{className:C().locationTextContainer,children:[(0,s.jsx)("span",{className:C().locationText,children:p}),(0,s.jsx)("span",{className:C().locationText,children:f})]})]})]}),(0,s.jsxs)("div",{className:C().optionGroup,children:[(0,s.jsx)("span",{className:C().optionLabel,children:_("country_filter")}),(0,s.jsx)("button",{className:C().optionButton,onClick:()=>{if(!d)return;let e=u===_("all_countries")?_("same_country"):_("all_countries");M(.8),F(0),setTimeout(()=>{d(e),M(1.1),F(1),setTimeout(()=>{M(1)},100)},200)},children:(0,s.jsx)("span",{className:C().optionText,style:{transform:"scale(".concat(P,")"),opacity:A},children:u})})]})]}),(0,s.jsx)("button",{className:C().closeButton,onClick:a,children:_("close")})]})})})};var B=a(560),I=a.n(B);let P=[{key:"language_study",color:"#D8315B"},{key:"cooking_enthusiasts",color:"#F2542D"},{key:"volunteer_activities",color:"#D8315B"},{key:"fitness_group",color:"#F2542D"},{key:"international_food_exchange",color:"#D8315B"},{key:"team_sports",color:"#F2542D"},{key:"hidden_spots_tour",color:"#F2542D"},{key:"photography_group",color:"#0A1045"},{key:"study_cafe",color:"#0A1045"},{key:"cultural_exchange",color:"#D8315B"},{key:"running_mates",color:"#F2542D"},{key:"academy_mates",color:"#0A1045"},{key:"movie_group",color:"#F2542D"},{key:"art_gathering",color:"#D8315B"},{key:"spontaneous_travel",color:"#F2542D"},{key:"karaoke_group",color:"#F2542D"},{key:"bowling_group",color:"#0A1045"},{key:"gaming_group",color:"#D8315B"},{key:"duo_dining",color:"#F2542D"},{key:"board_game_cafe",color:"#D8315B"},{key:"hobby_exchange",color:"#0A1045"},{key:"reading_group",color:"#D8315B"},{key:"bucket_list",color:"#F2542D"},{key:"sports_viewing",color:"#F2542D"},{key:"dog_walking",color:"#D8315B"},{key:"morning_hiking",color:"#0A1045"},{key:"camping_group",color:"#0A1045"},{key:"climbing_group",color:"#F2542D"},{key:"horror_movie_group",color:"#D8315B"},{key:"local_tours",color:"#0A1045"},{key:"bbq_gathering",color:"#F2542D"},{key:"writing_workshop",color:"#F2542D"},{key:"museum_visits",color:"#0A1045"},{key:"film_discussion_club",color:"#D8315B"},{key:"book_swap_club",color:"#0A1045"},{key:"music_jam_session",color:"#D8315B"},{key:"campus_tour_history",color:"#0A1045"}],M=[{groupNameKey:"groups.learning_culture",keys:["language_study","academy_mates","reading_group","library_stroll","campus_tour_history"]},{groupNameKey:"groups.food_drink",keys:["cooking_enthusiasts","international_food_exchange","duo_dining","bbq_gathering"]},{groupNameKey:"groups.outdoors_active",keys:["morning_hiking","running_mates","team_sports","dog_walking","camping_group","climbing_group"]},{groupNameKey:"groups.creative_social",keys:["art_gathering","movie_group","film_discussion_club","music_jam_session","writing_workshop","bowling_group","karaoke_group"]},{groupNameKey:"groups.community_exchange",keys:["cultural_exchange","volunteer_activities","hobby_exchange","book_swap_club","plant_exchange"]},{groupNameKey:"groups.relaxation_fun",keys:["relaxation","study_cafe","board_game_cafe","gaming_group","playlist_exchange"]},{groupNameKey:"groups.travel_exploration",keys:["hidden_spots_tour","local_tours","spontaneous_travel"]},{groupNameKey:"groups.special_interest",keys:["unusual_food_challenge","sports_viewing","bucket_list","horror_movie_group"]}],A=e=>{let{visible:t,onClose:a,myTopics:o,setMyTopics:r}=e,{SERVER_URL:c}=(0,i.U)(),{t:g}=(0,l.Bd)(),[u,d]=(0,n.useState)(200*!t),[p,f]=(0,n.useState)(+!!t),[m,_]=(0,n.useState)(P.map(()=>-200)),[h,y]=(0,n.useState)(P.map(()=>1)),[x,v]=(0,n.useState)(!1),k=(0,n.useRef)(!0);(0,n.useEffect)(()=>{t?(d(0),f(1),P.forEach((e,t)=>{setTimeout(()=>{_(e=>{let a=[...e];return a[t]=0,a})},100*t)})):(d(200),f(0),P.forEach((e,t)=>{setTimeout(()=>{_(e=>{let a=[...e];return a[t]=-200,a})},100*t)}),setTimeout(()=>{a()},300))},[t,a]),(0,n.useEffect)(()=>{k.current?k.current=!1:P.forEach((e,t)=>{setTimeout(()=>{_(e=>{let a=[...e];return a[t]=0,a}),y(e=>{let a=[...e];return a[t]=1,a})},150)})},[x]);let j=async e=>{try{localStorage.setItem("myTopics",JSON.stringify(e))}catch(e){console.error("Failed to save topics:",e)}},b=(e,t)=>{let a;if(o.some(t=>t.key===e))y(e=>{let a=[...e];return a[t]=.98,a}),setTimeout(()=>{y(e=>{let a=[...e];return a[t]=1,a})},150),a=o.filter(t=>t.key!==e);else{y(e=>{let a=[...e];return a[t]=.95,a}),setTimeout(()=>{y(e=>{let a=[...e];return a[t]=1,a})},150);let s=P.find(t=>t.key===e);s&&(a=[...o,s])}a&&(r(a),j(a))};return(0,s.jsxs)("div",{className:I().modal,onClick:a,children:[(0,s.jsx)("div",{className:I().overlayBackground}),(0,s.jsxs)("div",{className:I().overlayContainer,style:{transform:"translateY(".concat(u,"px)"),opacity:p},onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:I().header,children:[(0,s.jsxs)("div",{className:I().headerLeft,children:[(0,s.jsx)("h2",{className:I().headerTitle,children:g("change_topic_order")}),(0,s.jsx)("button",{className:I().toggleViewButton,onClick:()=>v(e=>!e),children:(0,s.jsx)("span",{className:I().toggleViewButtonText,children:x?g("toggle_ungroup_view"):g("toggle_group_view")})})]}),(0,s.jsx)("button",{className:I().closeButton,onClick:a,children:(0,s.jsx)("img",{src:"/assets/delete-icon-big.png",alt:"Close",className:I().deleteIcon})})]}),(0,s.jsx)("div",{className:I().scrollContent,children:x?M.map((e,t)=>(0,s.jsxs)("div",{className:I().groupContainer,children:[(0,s.jsx)("div",{className:I().groupHeader,children:g(e.groupNameKey)}),e.keys.map(e=>{let t=P.find(t=>t.key===e);if(!t)return null;let a=P.findIndex(t=>t.key===e),n=o.some(t=>t.key===e);return(0,s.jsx)("div",{className:I().topicItem,style:{transform:"scale(".concat(h[a],")"),margin:"4px 0"},children:(0,s.jsx)("button",{className:I().topicButton,onClick:()=>b(e,a),style:{borderColor:n?t.color:"transparent",borderWidth:"1px",borderStyle:"solid"},children:(0,s.jsx)("span",{className:I().topicText,style:{color:n?t.color:"#D9D9D9"},children:g("topics.".concat(e))})})},e)})]},t)):P.map((e,t)=>{let a=o.some(t=>t.key===e.key);return(0,s.jsx)("div",{className:I().topicButtonWrapper,style:{transform:"translateX(".concat(m[t],"px) scale(").concat(h[t],")")},children:(0,s.jsx)("button",{className:I().topicButton,onClick:()=>b(e.key,t),style:{borderColor:a?e.color:"transparent",borderWidth:"1px",borderStyle:"solid"},children:(0,s.jsx)("span",{className:I().topicText,style:{color:a?e.color:"#D9D9D9"},children:g("topics.".concat(e.key))})})},e.key)})})]})]})};var F=a(802),E=a(7768),O=a(1347),D=a.n(O);let z=()=>window.innerWidth,R=()=>{let{SERVER_URL:e}=(0,i.U)(),{t}=(0,l.Bd)(),a=(0,o.useRouter)(),[c,g]=(0,n.useState)(z()),[p,f]=(0,n.useState)(c>=768),[m,_]=(0,n.useState)("default"),[h,y]=(0,n.useState)(!1),x=(0,n.useRef)(null),[v,k]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),T=[{key:"language_study",color:"#D8315B"},{key:"cooking_enthusiasts",color:"#F2542D"},{key:"volunteer_activities",color:"#D8315B"},{key:"fitness_group",color:"#F2542D"},{key:"international_food_exchange",color:"#D8315B"},{key:"team_sports",color:"#F2542D"}],[B,I]=(0,n.useState)(T),[P,M]=(0,n.useState)(T.map(e=>e.key)),[O,R]=(0,n.useState)(t("popularity")),[W,L]=(0,n.useState)(t("nearby-only")),[U,q]=(0,n.useState)(t("all_countries")),[G,H]=(0,n.useState)(!1),[J,K]=(0,n.useState)(!1),[Y,V]=(0,n.useState)([]),[X,Z]=(0,n.useState)([]),[Q,$]=(0,n.useState)(1),[ee,et]=(0,n.useState)(!0),[ea,es]=(0,n.useState)(!1),[en,eo]=(0,n.useState)(""),[er,el]=(0,n.useState)(null),[ei,ec]=(0,n.useState)(null),[eg,eu]=(0,n.useState)(null),[ed,ep]=(0,n.useState)(""),[ef,em]=(0,n.useState)(null),[e_,eh]=(0,n.useState)(O),[ey,ex]=(0,n.useState)(W),[ev,ek]=(0,n.useState)(U),[ej,eb]=(0,n.useState)(P),[eS,eN]=(0,n.useState)(T),[eC,eT]=(0,n.useState)(!1),[ew,eB]=(0,n.useState)(1),eI=()=>{x.current&&clearTimeout(x.current),y(!1),x.current=setTimeout(()=>y(!0),6e4)};(0,n.useEffect)(()=>{eI();let e=()=>eI();return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),x.current&&clearTimeout(x.current)}},[]),(0,n.useEffect)(()=>{b(!!localStorage.getItem("token"))},[]),(0,n.useEffect)(()=>{let e=()=>{let e=window.innerWidth;g(e);let t=e>=768;t!==p&&(f(t),_("key-".concat(e)))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[p]),(0,n.useEffect)(()=>{if(j){let t=localStorage.getItem("token");k(localStorage.getItem("userId")),r.A.get("".concat(e,"/users/me"),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>{let{profileImage:t,profileThumbnail:a,originCountry:s}=e.data;el(t||null),ec(a||null),eu(s||null)}).catch(e=>{console.error("Error fetching user data:",e),el(null),ec(null)})}},[j,e]),(0,n.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{let{latitude:s,longitude:n}=a.coords;em({latitude:s,longitude:n}),(0,E.LF)(s,n,e).then(e=>{if(e){let{country:t,city:a}=e;eu(t||null),eo(a||"")}else eo(t("location_not_available"))}).catch(e=>{console.error("Error in reverse geocoding:",e),eo(t("location_not_available"))})},e=>{console.error("Error fetching geolocation:",e),eo(t("location_not_available"))})},[e,t]);let eP=async function(a){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];es(!0);try{let n=localStorage.getItem("token"),o=P.join(","),l=(await r.A.get("".concat(e,"/posts/filter"),{headers:{Authorization:n?"Bearer ".concat(n):""},params:{sort:O,nearbyOption:W,topics:o,page:a,limit:10,lat:ef?ef.latitude:0,lng:ef?ef.longitude:0,countryFilter:U===t("same_country")?eg:""}})).data;s?(Z(l),V(l)):(Z(e=>{let t=[...e,...l];return Array.from(new Map(t.map(e=>[e._id,e])).values())}),V(e=>{let t=[...e,...l];return Array.from(new Map(t.map(e=>[e._id,e])).values()).filter(e=>P.includes(e.category))})),l.length<10?et(!1):et(!0)}catch(e){console.error("Error fetching posts:",e)}finally{es(!1)}};(0,n.useEffect)(()=>{$(1),eP(1,!0)},[]),(0,n.useEffect)(()=>{Q>1&&eP(Q)},[Q]),(0,n.useEffect)(()=>{G||e_===O&&ey===W&&ev===U&&JSON.stringify(ej)===JSON.stringify(P)||($(1),eP(1,!0),eh(O),ex(W),ek(U),eb(P))},[G]),(0,n.useEffect)(()=>{J||JSON.stringify(eS)===JSON.stringify(B)||($(1),eP(1,!0),eN(B))},[J]);let eM=()=>{ed.trim()&&a.push("/search?searchTerm=".concat(encodeURIComponent(ed)))},eA=e=>{var t;return(0,s.jsx)("div",{className:D().postContainer,children:(0,s.jsx)(S,{postId:e._id,author:e.author,time:e.time,meetingTime:e.meetingTime,meetingPlace:e.meetingPlace,meetingCity:e.meetingCity,meetingCountry:e.meetingCountry,category:e.category,title:e.title,content:e.content,likes:e.likes,comments:e.comments,visitors:e.visitors,nicknameOption:e.nicknameOption,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,image:e.image,thumbnail:e.thumbnail,likedUsers:e.likedUsers,visitedUsers:e.visitedUsers,commentList:e.commentList,applicantsCount:e.applicantsCount,recruitmentCount:e.recruitmentCount,userId:e.userId,applicants:(null===(t=e.applicants)||void 0===t?void 0:t.map(e=>e.userId))||[],isBuddyPost:!1,latitude:e.meetingLatitude,longitude:e.meetingLongitude})},e._id)};return ea&&1===Q?(0,s.jsx)("div",{className:D().loadingContainer,children:(0,s.jsx)("p",{className:D().loadingText,children:t("loading_posts")})}):(0,s.jsxs)("div",{className:D().container,onScroll:e=>{let{scrollTop:t,scrollHeight:a,clientHeight:s}=e.currentTarget;t>50&&!eC?(eT(!0),eB(0)):t<=50&&eC&&(eT(!1),eB(1)),a-t-s<100&&!ea&&ee&&$(e=>e+1)},children:[N&&(0,s.jsx)(F.A,{visible:N,onLogin:()=>{C(!1),a.push("/signInLogIn")},onBrowse:()=>C(!1)}),(0,s.jsx)("div",{className:D().fixedHeader,style:{opacity:ew},children:(0,s.jsxs)("div",{className:D().header,children:[(0,s.jsx)("button",{className:D().logoButton,onClick:()=>{},children:(0,s.jsx)("img",{className:D().logo,src:h?"/assets/sleepingOwl.png":"/assets/Owl-icon-pink.png",alt:"Logo"})}),(0,s.jsx)("div",{className:D().gradientBorderSearch,children:(0,s.jsx)("input",{className:D().searchBar,placeholder:t("search_placeholder"),value:ed,onChange:e=>ep(e.target.value),onBlur:eM,onKeyDown:e=>"Enter"===e.key&&eM()})}),(0,s.jsx)("button",{className:D().profileButton,onClick:()=>{j||C(!0)},children:(0,s.jsx)(d.A,{userId:v||"",profileImage:er||"",profileThumbnail:ei||"",size:48})})]})}),(0,s.jsxs)("div",{className:D().topicRow,children:[(0,s.jsx)("button",{className:D().filterButton,onClick:()=>H(!0),children:t("filter")}),(0,s.jsx)("div",{className:D().topicSliderWrapper,children:(0,s.jsx)(u,{myTopics:B,selectedTopics:P,setSelectedTopics:M,isCompact:eC,handleSelectTopic:(e,t)=>{if("no_topic"===e)M([...B.map(e=>e.key),"no_topic"]);else{let t=P.includes(e)?P.filter(t=>t!==e):[...P,e];t.includes("no_topic")||t.push("no_topic"),M(t)}},t:t})}),(0,s.jsx)("button",{className:D().subjectListButton,onClick:()=>K(!0),children:t("change_topic_order")})]}),(0,s.jsxs)("div",{className:D().flatList,children:[(()=>{let e=[];return Y.forEach((t,a)=>{e.push({type:"post",data:t}),(a+1)%5==0&&e.push({type:"ad",key:"ad-".concat(a)})}),e})().map((e,t)=>"ad"===e.type?(0,s.jsx)("div",{className:D().adContainer,children:(0,s.jsx)("p",{children:"AD"})},"ad-".concat(t)):eA(e.data?e.data:e)),ea&&(0,s.jsx)("div",{className:D().loadingIndicator,children:t("loading_posts")})]},m),(0,s.jsx)(w,{visible:G,onClose:()=>H(!1),sortOption:O,setSortOption:R,nearbyOption:W,setNearbyOption:L,countryOption:U,setCountryOption:q,currentCountry:eg||"",currentCity:en}),J&&(0,s.jsx)(A,{visible:J,onClose:()=>K(!1),myTopics:B,setMyTopics:I})]})}},8997:e=>{e.exports={modalOverlay:"FilterOverlay_modalOverlay__mqFrU",overlayInnerContent:"FilterOverlay_overlayInnerContent__4WJi8",overlayTitle:"FilterOverlay_overlayTitle__DWMaf",optionGroup:"FilterOverlay_optionGroup__N8vwL",optionLabel:"FilterOverlay_optionLabel__BQ7gH",optionButton:"FilterOverlay_optionButton__40cM_",optionText:"FilterOverlay_optionText__jmiYJ",locationInfoContainer:"FilterOverlay_locationInfoContainer__vk8mR",locationFlag:"FilterOverlay_locationFlag__nwy7y",locationTextContainer:"FilterOverlay_locationTextContainer__Vm6Z_",locationText:"FilterOverlay_locationText__2Vnf4",closeButton:"FilterOverlay_closeButton__wqBYc"}}},e=>{var t=t=>e(e.s=t);e.O(0,[954,230,935,218,794,82,768,441,684,358],()=>t(629)),_N_E=e.O()}]);