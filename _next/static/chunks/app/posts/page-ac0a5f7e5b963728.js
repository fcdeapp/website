(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6530],{560:e=>{e.exports={modal:"MySubjectOrderChangeOverlay_modal__RoiU2",overlayBackground:"MySubjectOrderChangeOverlay_overlayBackground__PcSba",overlayContainer:"MySubjectOrderChangeOverlay_overlayContainer__EuZGx",header:"MySubjectOrderChangeOverlay_header__16gtS",headerLeft:"MySubjectOrderChangeOverlay_headerLeft__F_ezV",headerTitle:"MySubjectOrderChangeOverlay_headerTitle__ReqdJ",toggleViewButton:"MySubjectOrderChangeOverlay_toggleViewButton__Y7feF",toggleViewButtonText:"MySubjectOrderChangeOverlay_toggleViewButtonText__YYCzd",closeButton:"MySubjectOrderChangeOverlay_closeButton__s0fy6",deleteIcon:"MySubjectOrderChangeOverlay_deleteIcon__ijBo4",scrollContent:"MySubjectOrderChangeOverlay_scrollContent__HDfbv",groupContainer:"MySubjectOrderChangeOverlay_groupContainer__46Z_i",groupHeader:"MySubjectOrderChangeOverlay_groupHeader__Ko2TT",topicItem:"MySubjectOrderChangeOverlay_topicItem__eXgdr",topicButtonWrapper:"MySubjectOrderChangeOverlay_topicButtonWrapper___LHNf",topicButton:"MySubjectOrderChangeOverlay_topicButton__pYA0r",topicText:"MySubjectOrderChangeOverlay_topicText__bQAMb"}},21347:e=>{e.exports={container:"Post_container__s8CIx",fixedHeader:"Post_fixedHeader___NHM5",fixedHeaderOut:"Post_fixedHeaderOut__HFlPj",header:"Post_header__n8A3q",logoButton:"Post_logoButton__RWzXp",logo:"Post_logo__xgCW8",gradientBorderSearch:"Post_gradientBorderSearch__kXZ2K",searchBar:"Post_searchBar__UJa7C",profileButton:"Post_profileButton__r99O2",topicRow:"Post_topicRow__2Zor5",filterButton:"Post_filterButton__82y0h",subjectListButton:"Post_subjectListButton__NQLTe",topicSliderWrapper:"Post_topicSliderWrapper__rD1v4",flatList:"Post_flatList__hnkZD",postContainer:"Post_postContainer__rbrdD",loadingContainer:"Post_loadingContainer__BxUhB",loadingIndicator:"Post_loadingIndicator__VPeYc",loadingText:"Post_loadingText__5YBZ1",lottieAnimation:"Post_lottieAnimation__qWkU4",adContainer:"Post_adContainer__qIMm_",androidBlur:"Post_androidBlur__MOrFb",blurFull:"Post_blurFull__OGc7n",gradientMask:"Post_gradientMask__EKbQq"}},31875:e=>{let t=Math.asin,o=Math.cos,r=Math.sin,n=Math.sqrt,a=Math.PI;function i(e){return e*a/180}function l(e){var t;return(t=r(e/2))*t}e.exports=function(e,r){let a=i(Array.isArray(e)?e[1]:e.latitude??e.lat),s=i(Array.isArray(r)?r[1]:r.latitude??r.lat),c=i(Array.isArray(e)?e[0]:e.longitude??e.lng??e.lon),u=i(Array.isArray(r)?r[0]:r.longitude??r.lng??r.lon);return 0xc2a532*t(n(l(s-a)+o(a)*o(s)*l(u-c)))}},35695:(e,t,o)=>{"use strict";var r=o(18999);o.o(r,"usePathname")&&o.d(t,{usePathname:function(){return r.usePathname}}),o.o(r,"useRouter")&&o.d(t,{useRouter:function(){return r.useRouter}}),o.o(r,"useSearchParams")&&o.d(t,{useSearchParams:function(){return r.useSearchParams}})},38997:e=>{e.exports={modalOverlay:"FilterOverlay_modalOverlay__mqFrU",overlayInnerContent:"FilterOverlay_overlayInnerContent__4WJi8",overlayTitle:"FilterOverlay_overlayTitle__DWMaf",optionGroup:"FilterOverlay_optionGroup__N8vwL",optionLabel:"FilterOverlay_optionLabel__BQ7gH",optionButton:"FilterOverlay_optionButton__40cM_",optionText:"FilterOverlay_optionText__jmiYJ",locationInfoContainer:"FilterOverlay_locationInfoContainer__vk8mR",locationFlag:"FilterOverlay_locationFlag__nwy7y",locationTextContainer:"FilterOverlay_locationTextContainer__Vm6Z_",locationText:"FilterOverlay_locationText__2Vnf4",closeButton:"FilterOverlay_closeButton__wqBYc"}},70629:(e,t,o)=>{Promise.resolve().then(o.bind(o,91038))},85193:e=>{e.exports={container:"TopicSlider_container__oASiY",topicToggleContainer:"TopicSlider_topicToggleContainer__4NXLY",sliderWrapper:"TopicSlider_sliderWrapper__JabLT",horizontalScroll:"TopicSlider_horizontalScroll__LqJo5",topicButtonAll:"TopicSlider_topicButtonAll__nldzX",allButton:"TopicSlider_allButton__sRTVb",allTopicText:"TopicSlider_allTopicText__gzEJW",topicButton:"TopicSlider_topicButton__k8V42",topicText:"TopicSlider_topicText__Ufr1l",animatedBorderContainer:"TopicSlider_animatedBorderContainer__jul_U",gradientBorder:"TopicSlider_gradientBorder__1JJbH",compactShadow:"TopicSlider_compactShadow__mqfeT"}},91038:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>B});var r=o(95155),n=o(12115),a=o(35695),i=o(23464),l=o(91218),s=o(89760),c=o(85193),u=o.n(c);let d=e=>{let{myTopics:t,selectedTopics:o,setSelectedTopics:a,isCompact:i,handleSelectTopic:l,t:s}=e;window.innerWidth;let c=(0,n.useRef)(null),[d,_]=(0,n.useState)([]),[p,g]=(0,n.useState)(0),[m,y]=(0,n.useState)(0),[h,f]=(0,n.useState)(0),[v,x]=(0,n.useState)("#120C3A"),k=(0,n.useRef)([]),b=t.length+1,S=(0,n.useCallback)(e=>{if(c.current&&k.current[e]){let t=c.current.getBoundingClientRect(),o=k.current[e].getBoundingClientRect(),r=o.left-t.left;_(t=>{let o=[...t];return o[e]=r,o}),0===e&&g(o.width)}},[]);(0,n.useEffect)(()=>{for(let e=0;e<b;e++)S(e);let e=()=>{for(let e=0;e<b;e++)S(e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,S,b]),(0,n.useEffect)(()=>{let e=0;if(o.includes("no_topic"))e=0,x("#120C3A");else{let r=t.findIndex(e=>o.includes(e.key));-1!==r&&(e=r+1,x(t[r].color))}if(void 0!==d[e]&&(y(d[e]),f(p),c.current&&k.current[e])){let t=k.current[e],o=c.current.offsetWidth,r=t.getBoundingClientRect(),n=c.current.getBoundingClientRect(),a=Math.max(0,r.left-n.left+r.width/2-o/2);c.current.scrollTo({left:a,behavior:"smooth"})}},[o,d,p,t]);let j=(e,t)=>{l(e,t)},C=o.includes("no_topic")?o.length-1:o.length,N={height:i?48:40,borderRadius:30,padding:"0 16px",display:"flex",justifyContent:"center",alignItems:"center",background:C===t.length?"linear-gradient(to right, #FF7E5F, #FD3A69)":"#EEEEEE"},T={fontSize:i?16:14,fontWeight:600,color:C===t.length?"#fff":"#888"},B=(e,t)=>{let o=e.split(" ")[0];return t&&i?o:t&&!i?e:t||i?"":e.replace(/[\u{1F600}-\u{1F64F}]/gu,"").trim()};return(0,r.jsx)("div",{className:u().container,style:{width:"100%",height:"60px"},children:(0,r.jsx)("div",{className:u().topicToggleContainer,children:(0,r.jsx)("div",{className:u().sliderWrapper,children:(0,r.jsxs)("div",{className:u().horizontalScroll,ref:c,children:[(0,r.jsx)("button",{ref:e=>{k.current[0]=e},className:u().topicButtonAll,style:{backgroundColor:"transparent",borderColor:"transparent",margin:"0 8px",height:i?48:40},onClick:()=>{o.includes("no_topic")&&o.length-1===t.length||a([...t.map(e=>e.key),"no_topic"]),l("no_topic",0)},children:(0,r.jsx)("div",{className:u().allButton,style:Object.assign({height:i?48:40},N),children:(0,r.jsx)("span",{className:u().allTopicText,style:T,children:s("select_all")})})}),t.map((e,t)=>{let n=o.includes(e.key);if(!n&&i)return null;let a=B(s("topics.".concat(e.key)),n);return(0,r.jsx)("div",{style:{transform:"scale(1)"},children:(0,r.jsx)("button",{ref:e=>{k.current[t+1]=e},className:u().topicButton,style:{backgroundColor:n?"#fff":"transparent",borderColor:n?e.color:"#D9D9D9",margin:"0 8px",height:i?48:40,padding:i?"0 8px":"0 16px"},onClick:()=>j(e.key,t+1),children:(0,r.jsx)("span",{className:u().topicText,style:{fontSize:n?i?30:14:i?22:12,color:n?e.color:"#888"},children:a})})},e.key)})]})})})})};var _=o(21557),p=o(38997),g=o.n(p),m=o(73625);let y=e=>{let{visible:t,onClose:o,sortOption:a,setSortOption:i,nearbyOption:c,setNearbyOption:u,recruitmentOption:d,setRecruitmentOption:_,countryOption:p,setCountryOption:y,currentCountry:h,currentCity:f}=e,{SERVER_URL:v}=(0,s.U)(),{t:x}=(0,l.Bd)(),[k,b]=(0,n.useState)({opacity:0,transform:"scale(0.9)"}),[S,j]=(0,n.useState)(t);(0,n.useEffect)(()=>{t?(j(!0),setTimeout(()=>{b({opacity:1,transform:"scale(1)"})},10)):(b({opacity:0,transform:"scale(0.9)"}),setTimeout(()=>{j(!1),o()},300))},[t,o]);let[C,N]=(0,n.useState)(1),[T,B]=(0,n.useState)(1),[O,w]=(0,n.useState)(1),[F,D]=(0,n.useState)(1),[E,A]=(0,n.useState)(1),[I,L]=(0,n.useState)(1),[P,M]=(0,n.useState)(1),[R,W]=(0,n.useState)(1);return(0,r.jsx)(r.Fragment,{children:S&&(0,r.jsx)("div",{className:g().modalOverlay,style:k,children:(0,r.jsxs)("div",{className:g().overlayInnerContent,children:[(0,r.jsx)("h2",{className:g().overlayTitle,children:x("filter_options")}),(0,r.jsxs)("div",{className:g().optionGroup,children:[(0,r.jsx)("span",{className:g().optionLabel,children:x("sort_by")}),(0,r.jsx)("button",{className:g().optionButton,onClick:()=>{let e=["latest","popularity","recommended","distance"],t=e[(e.indexOf(a)+1)%e.length];N(.8),B(0),setTimeout(()=>{i(t),N(1.1),B(1),setTimeout(()=>{N(1)},100)},200)},children:(0,r.jsx)("span",{className:g().optionText,style:{transform:"scale(".concat(C,")"),opacity:T},children:x("sort_options.".concat(a))})})]}),(0,r.jsxs)("div",{className:g().optionGroup,children:[(0,r.jsx)("span",{className:g().optionLabel,children:x("nearby_filter_options")}),(0,r.jsx)("button",{className:g().optionButton,onClick:()=>{let e=c===x("nearby-only")?x("anywhere"):x("nearby-only");w(.8),D(0),setTimeout(()=>{u(e),w(1.1),D(1),setTimeout(()=>{w(1)},100)},200)},children:(0,r.jsx)("span",{className:g().optionText,style:{transform:"scale(".concat(O,")"),opacity:F},children:x("nearby_options.".concat(c))})})]}),void 0!==d&&void 0!==_&&(0,r.jsxs)("div",{className:g().optionGroup,children:[(0,r.jsx)("span",{className:g().optionLabel,children:x("recruitment_filter_options")}),(0,r.jsx)("button",{className:g().optionButton,onClick:()=>{if(!_||!d)return;let e="active"===d?"all":"active";M(.8),W(0),setTimeout(()=>{_(e),M(1.1),W(1),setTimeout(()=>{M(1)},100)},200)},children:(0,r.jsx)("span",{className:g().optionText,style:{transform:"scale(".concat(P,")"),opacity:R},children:x("recruitment_options.".concat(d))})})]}),void 0!==p&&void 0!==y&&void 0!==h&&void 0!==f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:g().optionGroup,children:[(0,r.jsx)("span",{className:g().optionLabel,children:x("current_location")}),(0,r.jsxs)("div",{className:g().locationInfoContainer,children:["Unknown Country"!==h&&"Unknown"!==h&&""!==h&&(0,r.jsx)("img",{src:m.A[h]||"",alt:h,className:g().locationFlag}),(0,r.jsxs)("div",{className:g().locationTextContainer,children:[(0,r.jsx)("span",{className:g().locationText,children:h}),(0,r.jsx)("span",{className:g().locationText,children:f})]})]})]}),(0,r.jsxs)("div",{className:g().optionGroup,children:[(0,r.jsx)("span",{className:g().optionLabel,children:x("country_filter")}),(0,r.jsx)("button",{className:g().optionButton,onClick:()=>{if(!y)return;let e=p===x("all_countries")?x("same_country"):x("all_countries");A(.8),L(0),setTimeout(()=>{y(e),A(1.1),L(1),setTimeout(()=>{A(1)},100)},200)},children:(0,r.jsx)("span",{className:g().optionText,style:{transform:"scale(".concat(E,")"),opacity:I},children:p})})]})]}),(0,r.jsx)("button",{className:g().closeButton,onClick:o,children:x("close")})]})})})};var h=o(560),f=o.n(h);let v=[{key:"language_study",color:"#D8315B"},{key:"cooking_enthusiasts",color:"#F2542D"},{key:"volunteer_activities",color:"#D8315B"},{key:"fitness_group",color:"#F2542D"},{key:"international_food_exchange",color:"#D8315B"},{key:"team_sports",color:"#F2542D"},{key:"hidden_spots_tour",color:"#F2542D"},{key:"photography_group",color:"#0A1045"},{key:"study_cafe",color:"#0A1045"},{key:"cultural_exchange",color:"#D8315B"},{key:"running_mates",color:"#F2542D"},{key:"academy_mates",color:"#0A1045"},{key:"movie_group",color:"#F2542D"},{key:"art_gathering",color:"#D8315B"},{key:"spontaneous_travel",color:"#F2542D"},{key:"karaoke_group",color:"#F2542D"},{key:"bowling_group",color:"#0A1045"},{key:"gaming_group",color:"#D8315B"},{key:"duo_dining",color:"#F2542D"},{key:"board_game_cafe",color:"#D8315B"},{key:"hobby_exchange",color:"#0A1045"},{key:"reading_group",color:"#D8315B"},{key:"bucket_list",color:"#F2542D"},{key:"sports_viewing",color:"#F2542D"},{key:"dog_walking",color:"#D8315B"},{key:"morning_hiking",color:"#0A1045"},{key:"camping_group",color:"#0A1045"},{key:"climbing_group",color:"#F2542D"},{key:"horror_movie_group",color:"#D8315B"},{key:"local_tours",color:"#0A1045"},{key:"bbq_gathering",color:"#F2542D"},{key:"writing_workshop",color:"#F2542D"},{key:"museum_visits",color:"#0A1045"},{key:"film_discussion_club",color:"#D8315B"},{key:"book_swap_club",color:"#0A1045"},{key:"music_jam_session",color:"#D8315B"},{key:"campus_tour_history",color:"#0A1045"}],x=[{groupNameKey:"groups.learning_culture",keys:["language_study","academy_mates","reading_group","library_stroll","campus_tour_history"]},{groupNameKey:"groups.food_drink",keys:["cooking_enthusiasts","international_food_exchange","duo_dining","bbq_gathering"]},{groupNameKey:"groups.outdoors_active",keys:["morning_hiking","running_mates","team_sports","dog_walking","camping_group","climbing_group"]},{groupNameKey:"groups.creative_social",keys:["art_gathering","movie_group","film_discussion_club","music_jam_session","writing_workshop","bowling_group","karaoke_group"]},{groupNameKey:"groups.community_exchange",keys:["cultural_exchange","volunteer_activities","hobby_exchange","book_swap_club","plant_exchange"]},{groupNameKey:"groups.relaxation_fun",keys:["relaxation","study_cafe","board_game_cafe","gaming_group","playlist_exchange"]},{groupNameKey:"groups.travel_exploration",keys:["hidden_spots_tour","local_tours","spontaneous_travel"]},{groupNameKey:"groups.special_interest",keys:["unusual_food_challenge","sports_viewing","bucket_list","horror_movie_group"]}],k=e=>{let{visible:t,onClose:o,myTopics:a,setMyTopics:i}=e,{SERVER_URL:c}=(0,s.U)(),{t:u}=(0,l.Bd)(),[d,_]=(0,n.useState)(200*!t),[p,g]=(0,n.useState)(+!!t),[m,y]=(0,n.useState)(v.map(()=>-200)),[h,k]=(0,n.useState)(v.map(()=>1)),[b,S]=(0,n.useState)(!1),j=(0,n.useRef)(!0);(0,n.useEffect)(()=>{t?(_(0),g(1),v.forEach((e,t)=>{setTimeout(()=>{y(e=>{let o=[...e];return o[t]=0,o})},120*t)})):(_(200),g(0),v.forEach((e,t)=>{setTimeout(()=>{y(e=>{let o=[...e];return o[t]=-200,o})},120*t)}),setTimeout(()=>{o()},300))},[t,o]),(0,n.useEffect)(()=>{j.current?j.current=!1:v.forEach((e,t)=>{setTimeout(()=>{y(e=>{let o=[...e];return o[t]=0,o}),k(e=>{let o=[...e];return o[t]=1,o})},150)})},[b]);let C=async e=>{try{localStorage.setItem("myTopics",JSON.stringify(e))}catch(e){console.error("Failed to save topics:",e)}},N=(e,t)=>{let o;if(a.some(t=>t.key===e))k(e=>{let o=[...e];return o[t]=.98,o}),setTimeout(()=>{k(e=>{let o=[...e];return o[t]=1,o})},150),o=a.filter(t=>t.key!==e);else{k(e=>{let o=[...e];return o[t]=.95,o}),setTimeout(()=>{k(e=>{let o=[...e];return o[t]=1,o})},150);let r=v.find(t=>t.key===e);r&&(o=[...a,r])}o&&(i(o),C(o))};return(0,r.jsxs)("div",{className:f().modal,onClick:o,children:[(0,r.jsx)("div",{className:f().overlayBackground}),(0,r.jsxs)("div",{className:f().overlayContainer,style:{transform:"translateY(".concat(d,"px)"),opacity:p},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:f().header,children:[(0,r.jsxs)("div",{className:f().headerLeft,children:[(0,r.jsx)("h2",{className:f().headerTitle,children:u("change_topic_order")}),(0,r.jsx)("button",{className:f().toggleViewButton,onClick:()=>S(e=>!e),children:(0,r.jsx)("span",{className:f().toggleViewButtonText,children:b?u("toggle_ungroup_view"):u("toggle_group_view")})})]}),(0,r.jsx)("button",{className:f().closeButton,onClick:o,children:(0,r.jsx)("img",{src:"/assets/delete-icon-big.png",alt:"Close",className:f().deleteIcon})})]}),(0,r.jsx)("div",{className:f().scrollContent,children:b?x.map((e,t)=>(0,r.jsxs)("div",{className:f().groupContainer,children:[(0,r.jsx)("div",{className:f().groupHeader,children:u(e.groupNameKey)}),e.keys.map(e=>{let t=v.find(t=>t.key===e);if(!t)return null;let o=v.findIndex(t=>t.key===e),n=a.some(t=>t.key===e);return(0,r.jsx)("div",{className:f().topicItem,style:{transform:"scale(".concat(h[o],")"),margin:"4px 0"},children:(0,r.jsx)("button",{className:f().topicButton,onClick:()=>N(e,o),style:{borderColor:n?t.color:"transparent",borderWidth:"1px",borderStyle:"solid"},children:(0,r.jsx)("span",{className:f().topicText,style:{color:n?t.color:"#D9D9D9"},children:u("topics.".concat(e))})})},e)})]},t)):v.map((e,t)=>{let o=a.some(t=>t.key===e.key);return(0,r.jsx)("div",{className:f().topicButtonWrapper,style:{transform:"translateX(".concat(m[t],"px) scale(").concat(h[t],")")},children:(0,r.jsx)("button",{className:f().topicButton,onClick:()=>N(e.key,t),style:{borderColor:o?e.color:"transparent",borderWidth:"1px",borderStyle:"solid"},children:(0,r.jsx)("span",{className:f().topicText,style:{color:o?e.color:"#D9D9D9"},children:u("topics.".concat(e.key))})})},e.key)})})]})]})};var b=o(50802),S=o(7768),j=o(21347),C=o.n(j),N=o(32649);let T=()=>window.innerWidth,B=()=>{let{SERVER_URL:e}=(0,s.U)(),{t}=(0,l.Bd)(),o=(0,a.useRouter)(),[c,u]=(0,n.useState)(T()),[p,g]=(0,n.useState)(c>=768),[m,h]=(0,n.useState)("default"),[f,v]=(0,n.useState)(!1),x=(0,n.useRef)(null),[j,B]=(0,n.useState)(null),[O,w]=(0,n.useState)(!1),[F,D]=(0,n.useState)(!1),E=[{key:"language_study",color:"#D8315B"},{key:"cooking_enthusiasts",color:"#F2542D"},{key:"volunteer_activities",color:"#D8315B"},{key:"fitness_group",color:"#F2542D"},{key:"international_food_exchange",color:"#D8315B"},{key:"team_sports",color:"#F2542D"}],[A,I]=(0,n.useState)(E),[L,P]=(0,n.useState)(E.map(e=>e.key)),[M,R]=(0,n.useState)(t("popularity")),[W,U]=(0,n.useState)(t("nearby-only")),[z,H]=(0,n.useState)(t("all_countries")),[J,K]=(0,n.useState)(!1),[q,V]=(0,n.useState)(!1),[Y,G]=(0,n.useState)([]),[Z,X]=(0,n.useState)([]),[Q,$]=(0,n.useState)(1),[ee,et]=(0,n.useState)(!0),[eo,er]=(0,n.useState)(!1),[en,ea]=(0,n.useState)(""),[ei,el]=(0,n.useState)(null),[es,ec]=(0,n.useState)(null),[eu,ed]=(0,n.useState)(null),[e_,ep]=(0,n.useState)(""),[eg,em]=(0,n.useState)(null),[ey,eh]=(0,n.useState)(M),[ef,ev]=(0,n.useState)(W),[ex,ek]=(0,n.useState)(z),[eb,eS]=(0,n.useState)(L),[ej,eC]=(0,n.useState)(E),[eN,eT]=(0,n.useState)(!1),[eB,eO]=(0,n.useState)(1),ew=()=>{x.current&&clearTimeout(x.current),v(!1),x.current=setTimeout(()=>v(!0),6e4)};(0,n.useEffect)(()=>{ew();let e=()=>ew();return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),x.current&&clearTimeout(x.current)}},[]),(0,n.useEffect)(()=>{w("true"===localStorage.getItem("isLoggedIn"))},[]),(0,n.useEffect)(()=>{let e=()=>{let e=window.innerWidth;u(e);let t=e>=768;t!==p&&(g(t),h("key-".concat(e)))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[p]),(0,n.useEffect)(()=>{"true"===localStorage.getItem("isLoggedIn")&&(B(localStorage.getItem("userId")),i.A.get("".concat(e,"/users/me")).then(e=>{let{profileImage:t,profileThumbnail:o,originCountry:r}=e.data;el(t||null),ec(o||null),ed(r||null)}).catch(e=>{console.error("Error fetching user data:",e),el(null),ec(null)}))},[O,e]),(0,n.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(o=>{let{latitude:r,longitude:n}=o.coords;em({latitude:r,longitude:n}),(0,S.LF)(r,n,e).then(e=>{if(e){let{country:t,city:o}=e;ed(t||null),ea(o||"")}else ea(t("location_not_available"))}).catch(e=>{console.error("Error in reverse geocoding:",e),ea(t("location_not_available"))})},e=>{console.error("Error fetching geolocation:",e),ea(t("location_not_available"))})},[e,t]);let eF=async function(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];er(!0);try{let n=L.join(","),a=(await i.A.get("".concat(e,"/posts/filter"),{params:{sort:M,nearbyOption:W,topics:n,page:o,limit:10,lat:eg?eg.latitude:0,lng:eg?eg.longitude:0,countryFilter:z===t("same_country")?eu:""}})).data;r?(X(a),G(a)):(X(e=>{let t=[...e,...a];return Array.from(new Map(t.map(e=>[e._id,e])).values())}),G(e=>{let t=[...e,...a];return Array.from(new Map(t.map(e=>[e._id,e])).values()).filter(e=>L.includes(e.category))})),a.length<10?et(!1):et(!0)}catch(e){console.error("Error fetching posts:",e)}finally{er(!1)}};(0,n.useEffect)(()=>{$(1),eF(1,!0)},[]),(0,n.useEffect)(()=>{Q>1&&eF(Q)},[Q]),(0,n.useEffect)(()=>{J||ey===M&&ef===W&&ex===z&&JSON.stringify(eb)===JSON.stringify(L)||($(1),eF(1,!0),eh(M),ev(W),ek(z),eS(L))},[J]),(0,n.useEffect)(()=>{q||JSON.stringify(ej)===JSON.stringify(A)||($(1),eF(1,!0),eC(A))},[q]);let eD=()=>{e_.trim()&&o.push("/searchPage?searchTerm=".concat(encodeURIComponent(e_)))},eE=e=>{var t;return(0,r.jsx)("div",{className:C().postContainer,children:(0,r.jsx)(_.A,{postId:e._id,author:e.author,time:e.time,meetingTime:e.meetingTime,meetingPlace:e.meetingPlace,meetingCity:e.meetingCity,meetingCountry:e.meetingCountry,category:e.category,title:e.title,content:e.content,likes:e.likes,comments:e.comments,visitors:e.visitors,nicknameOption:e.nicknameOption,profileImage:e.profileImage,profileThumbnail:e.profileThumbnail,image:e.image,thumbnail:e.thumbnail,likedUsers:e.likedUsers,visitedUsers:e.visitedUsers,commentList:e.commentList,applicantsCount:e.applicantsCount,recruitmentCount:e.recruitmentCount,userId:e.userId,applicants:(null===(t=e.applicants)||void 0===t?void 0:t.map(e=>e.userId))||[],isBuddyPost:!1,latitude:e.meetingLatitude,longitude:e.meetingLongitude})},e._id)};return eo&&1===Q?(0,r.jsx)("div",{className:C().loadingContainer,children:(0,r.jsx)("p",{className:C().loadingText,children:t("loading_posts")})}):(0,r.jsxs)("div",{className:C().container,onScroll:e=>{let{scrollTop:t,scrollHeight:o,clientHeight:r}=e.currentTarget;t>50&&!eN?(eT(!0),eO(0)):t<=50&&eN&&(eT(!1),eO(1)),o-t-r<100&&!eo&&ee&&$(e=>e+1)},children:[F&&(0,r.jsx)(b.A,{visible:F,onLogin:()=>{D(!1),o.push("/signInLogIn")},onBrowse:()=>D(!1)}),(0,r.jsxs)("div",{className:C().fixedHeaderOut,children:[(0,r.jsx)("div",{className:C().fixedHeader,style:{opacity:eB},children:(0,r.jsxs)("div",{className:C().header,children:[(0,r.jsx)("button",{className:C().logoButton,onClick:()=>o.push("/"),children:(0,r.jsx)("img",{className:C().logo,src:"/assets/FoxIconMain.png",alt:"Logo"})}),(0,r.jsx)("div",{className:C().gradientBorderSearch,children:(0,r.jsx)("input",{className:C().searchBar,placeholder:t("search_placeholder"),value:e_,onChange:e=>ep(e.target.value),onBlur:eD,onKeyDown:e=>"Enter"===e.key&&eD()})}),(0,r.jsx)("button",{className:C().profileButton,onClick:()=>{O||D(!0)},children:(0,r.jsx)(N.A,{userId:j||"",profileImage:ei||"",profileThumbnail:es||"",size:48})})]})}),(0,r.jsxs)("div",{className:C().topicRow,children:[(0,r.jsx)("button",{className:C().filterButton,onClick:()=>K(!0),children:t("filter")}),(0,r.jsx)("div",{className:C().topicSliderWrapper,children:(0,r.jsx)(d,{myTopics:A,selectedTopics:L,setSelectedTopics:P,isCompact:eN,handleSelectTopic:(e,t)=>{if("no_topic"===e)P([...A.map(e=>e.key),"no_topic"]);else{let t=L.includes(e)?L.filter(t=>t!==e):[...L,e];t.includes("no_topic")||t.push("no_topic"),P(t)}},t:t})}),(0,r.jsx)("button",{className:C().subjectListButton,onClick:()=>V(!0),children:t("change_topic_order")})]})]}),(0,r.jsxs)("div",{className:C().flatList,children:[(()=>{let e=[];return Y.forEach((t,o)=>{e.push({type:"post",data:t}),(o+1)%6==0&&e.push({type:"ad",key:"ad-".concat(o)})}),e})().map((e,t)=>"ad"===e.type?(0,r.jsx)("div",{className:C().adContainer,children:(0,r.jsx)("p",{children:"AD"})},"ad-".concat(t)):eE(e.data?e.data:e)),eo&&(0,r.jsx)("div",{className:C().loadingIndicator,children:t("loading_posts")})]},m),(0,r.jsx)(y,{visible:J,onClose:()=>K(!1),sortOption:M,setSortOption:R,nearbyOption:W,setNearbyOption:U,countryOption:z,setCountryOption:H,currentCountry:eu||"",currentCity:en}),q&&(0,r.jsx)(k,{visible:q,onClose:()=>V(!1),myTopics:A,setMyTopics:I})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8954,5038,4935,3464,1218,8723,165,7768,8441,1684,7358],()=>t(70629)),_N_E=e.O()}]);