(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9699],{62865:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>o});var t=r(95155),s=r(12115),i=r(23464),a=r(81273),l=r.n(a);let c={ruleId:"",type:"grammar",pattern:"",suggestion:"",description:"",issueType:"",category:{id:"",name:""},languageCode:"",importanceScore:0,difficultyScore:0};function o(){let[e,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[o,d]=(0,s.useState)(c),[u,h]=(0,s.useState)(null),[x,m]=(0,s.useState)(""),j=async()=>{a(!0);try{let e=await i.A.get("/api/corrections");n(e.data)}catch(e){console.error(e),m("Failed to load corrections")}finally{a(!1)}};(0,s.useEffect)(()=>{j()},[]);let p=e=>n=>{let r=n.target.value;d(n=>({...n,[e]:"importanceScore"===e||"difficultyScore"===e?Number(r):r}))},g=async e=>{e.preventDefault(),m("");try{u?await i.A.put("/api/corrections/".concat(u),o):await i.A.post("/api/corrections",o),d(c),h(null),j()}catch(e){var n,r;console.error(e),m((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"Save failed")}},_=e=>{d(e),h(e.ruleId)},y=async e=>{if(confirm("Delete ".concat(e,"?")))try{await i.A.delete("/api/corrections/".concat(e)),j()}catch(e){console.error(e),m("Delete failed")}};return(0,t.jsxs)("div",{className:l().container,children:[(0,t.jsx)("h1",{className:l().header,children:"Admin Corrections"}),(0,t.jsx)("button",{className:l().newBtn,onClick:()=>{d(c),h(null),m("")},children:"+ New Correction"}),(null!==u||""===o.ruleId)&&(0,t.jsxs)("form",{className:l().form,onSubmit:g,children:[x&&(0,t.jsx)("div",{className:l().error,children:x}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Rule ID"}),(0,t.jsx)("input",{type:"text",value:o.ruleId,onChange:p("ruleId"),disabled:!!u,required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Type"}),(0,t.jsxs)("select",{value:o.type,onChange:p("type"),children:[(0,t.jsx)("option",{value:"grammar",children:"Grammar"}),(0,t.jsx)("option",{value:"expression",children:"Expression"})]})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Pattern"}),(0,t.jsx)("input",{type:"text",value:o.pattern,onChange:p("pattern")})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Suggestion"}),(0,t.jsx)("input",{type:"text",value:o.suggestion,onChange:p("suggestion"),required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Description"}),(0,t.jsx)("input",{type:"text",value:o.description,onChange:p("description"),required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Issue Type"}),(0,t.jsx)("input",{type:"text",value:o.issueType,onChange:p("issueType")})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Category ID"}),(0,t.jsx)("input",{type:"text",value:o.category.id,onChange:e=>d(n=>({...n,category:{...n.category,id:e.target.value}})),required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Category Name"}),(0,t.jsx)("input",{type:"text",value:o.category.name,onChange:e=>d(n=>({...n,category:{...n.category,name:e.target.value}})),required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Language Code"}),(0,t.jsx)("input",{type:"text",value:o.languageCode,onChange:p("languageCode"),required:!0})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Importance (0–10)"}),(0,t.jsx)("input",{type:"number",min:0,max:10,value:o.importanceScore,onChange:p("importanceScore")})]}),(0,t.jsxs)("div",{className:l().row,children:[(0,t.jsx)("label",{children:"Difficulty (0–10)"}),(0,t.jsx)("input",{type:"number",min:0,max:10,value:o.difficultyScore,onChange:p("difficultyScore")})]}),(0,t.jsxs)("div",{className:l().actions,children:[(0,t.jsx)("button",{type:"submit",className:l().saveBtn,children:u?"Update":"Create"}),(0,t.jsx)("button",{type:"button",className:l().cancelBtn,onClick:()=>{d(c),h(null),m("")},children:"Cancel"})]})]}),r?(0,t.jsx)("p",{className:l().loader,children:"Loading…"}):(0,t.jsxs)("table",{className:l().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Rule ID"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Suggestion"}),(0,t.jsx)("th",{children:"Category"}),(0,t.jsx)("th",{children:"Lang"}),(0,t.jsx)("th",{children:"Imp"}),(0,t.jsx)("th",{children:"Diff"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.ruleId}),(0,t.jsx)("td",{children:e.type}),(0,t.jsx)("td",{children:e.suggestion}),(0,t.jsxs)("td",{children:[e.category.id,"/",e.category.name]}),(0,t.jsx)("td",{children:e.languageCode}),(0,t.jsx)("td",{children:e.importanceScore}),(0,t.jsx)("td",{children:e.difficultyScore}),(0,t.jsxs)("td",{className:l().actionsCell,children:[(0,t.jsx)("button",{onClick:()=>_(e),className:l().editBtn,children:"✎"}),(0,t.jsx)("button",{onClick:()=>y(e.ruleId),className:l().delBtn,children:"\uD83D\uDDD1"})]})]},e.ruleId))})]})]})}},81273:e=>{e.exports={container:"AdminCorrections_container__t4CzX",header:"AdminCorrections_header__rFe9D",newBtn:"AdminCorrections_newBtn__Uh4Zn",form:"AdminCorrections_form__ARWzs",row:"AdminCorrections_row__0eoUy",actions:"AdminCorrections_actions__LLpU_",saveBtn:"AdminCorrections_saveBtn__JqNeW",cancelBtn:"AdminCorrections_cancelBtn__GwX_E",error:"AdminCorrections_error__Pf3NA",loader:"AdminCorrections_loader__JqXDI",table:"AdminCorrections_table__Av208",actionsCell:"AdminCorrections_actionsCell__zDFY0",editBtn:"AdminCorrections_editBtn__uJ3Z7",delBtn:"AdminCorrections_delBtn__KTKWD"}},85356:(e,n,r)=>{Promise.resolve().then(r.bind(r,62865))}},e=>{var n=n=>e(e.s=n);e.O(0,[8758,3464,8441,1684,7358],()=>n(85356)),_N_E=e.O()}]);