(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9699],{61065:(e,n,r)=>{"use strict";r.d(n,{s:()=>o,U:()=>c});var t=r(95155),a=r(12115);let s=JSON.parse('{"hl":"1.0.0","SC":"YOUR_INTERSTITIAL_PLACEMENT_ID","O8":"YOUR_BANNER_PLACEMENT_ID"}'),i={SERVER_URL:(()=>{let e="KR";if("undefined"!=typeof navigator&&navigator.language){let n=navigator.language.split("-");n.length>1&&(e=n[1])}let n="";switch(e.toUpperCase()){case"CA":n="ca.";break;case"AU":n="au.";break;case"GB":n="uk.";break;default:n=""}return console.log("domainPrefix: ",n),console.log("region: ",e),"https://beta.fcde.app"})(),APP_VERSION:s.hl,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:s.SC,FACEBOOK_BANNER_PLACEMENT_ID:s.O8},l=(0,a.createContext)(null),o=e=>{let{children:n}=e;return(0,t.jsx)(l.Provider,{value:i,children:n})},c=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}},62865:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>d});var t=r(95155),a=r(12115),s=r(23464),i=r(61065),l=r(81273),o=r.n(l);let c={ruleId:"",type:"grammar",pattern:"",suggestion:"",description:"",issueType:"",category:{id:"",name:""},languageCode:"",importanceScore:0,difficultyScore:0};function d(){let{SERVER_URL:e}=(0,i.U)(),[n,r]=(0,a.useState)([]),[l,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(c),[h,_]=(0,a.useState)(null),[p,j]=(0,a.useState)(""),[x,C]=(0,a.useState)(!1),[g,y]=(0,a.useState)("[]"),[N,v]=(0,a.useState)(null),A=async()=>{d(!0);try{let n=await s.A.get("".concat(e,"/api/corrections"));r(n.data)}catch(e){console.error(e)}d(!1)};(0,a.useEffect)(()=>{A()},[]);let b=e=>n=>{let r=n.target.value;m(n=>({...n,[e]:"importanceScore"===e||"difficultyScore"===e?Number(r):r}))},f=async n=>{n.preventDefault();try{h?await s.A.put("".concat(e,"/api/corrections/").concat(h),u):await s.A.post("".concat(e,"/api/corrections"),u),m(c),_(null),j(""),A()}catch(e){var r,t;j((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.error)||"Save failed")}},S=async n=>{confirm("Delete?")&&(await s.A.delete("".concat(e,"/api/corrections/").concat(n)),A())},B=async()=>{v(null),j("");try{let n=JSON.parse(g),r=await s.A.post("".concat(e,"/api/corrections/bulk"),n);v(r.data),A()}catch(e){j(e.message)}};return(0,t.jsxs)("div",{className:o().container,children:[(0,t.jsx)("h1",{className:o().header,children:"Admin – Corrections"}),(0,t.jsxs)("div",{className:o().topBar,children:[(0,t.jsx)("button",{className:o().newBtn,onClick:()=>{C(!1),m(c),_(null),j("")},children:"+ New"}),(0,t.jsx)("button",{className:o().jsonBtn,onClick:()=>{C(!x),j("")},children:x?"← Back to form":"⇪ Bulk JSON"})]}),x&&(0,t.jsxs)("div",{className:o().jsonCard,children:[(0,t.jsx)("textarea",{className:o().jsonArea,value:g,onChange:e=>y(e.target.value),placeholder:'[ { "ruleId": "...", "type": "grammar", ... }, ... ]'}),(0,t.jsx)("div",{className:o().actions,children:(0,t.jsx)("button",{className:o().saveBtn,onClick:B,children:"Upload JSON"})}),N&&(0,t.jsx)("pre",{className:o().jsonResp,children:JSON.stringify(N,null,2)}),p&&(0,t.jsx)("div",{className:o().error,children:p})]}),!x&&(0,t.jsxs)("form",{className:o().form,onSubmit:f,children:[p&&(0,t.jsx)("div",{className:o().error,children:p}),[{label:"Rule ID",key:"ruleId",disabled:!!h},{label:"Pattern",key:"pattern"},{label:"Suggestion",key:"suggestion"},{label:"Description",key:"description"},{label:"Issue Type",key:"issueType"},{label:"Category ID",key:"category.id"},{label:"Category Name",key:"category.name"},{label:"Language Code",key:"languageCode"}].map(e=>{let{label:n,key:r,disabled:a}=e,[s,i]=r.split("."),l=i?u[s][i]:u[s];return(0,t.jsxs)("div",{className:o().row,children:[(0,t.jsx)("label",{children:n}),(0,t.jsx)("input",{value:l,disabled:a,onChange:e=>{i?m(n=>({...n,[s]:{...n[s],[i]:e.target.value}})):b(s)(e)},required:["ruleId","suggestion","description","category.id","category.name","languageCode"].includes(r)})]},r)}),(0,t.jsxs)("div",{className:o().row,children:[(0,t.jsx)("label",{children:"Type"}),(0,t.jsxs)("select",{value:u.type,onChange:b("type"),children:[(0,t.jsx)("option",{value:"grammar",children:"Grammar"}),(0,t.jsx)("option",{value:"expression",children:"Expression"})]})]}),(0,t.jsxs)("div",{className:o().row,children:[(0,t.jsx)("label",{children:"Importance"}),(0,t.jsx)("input",{type:"number",min:0,max:10,value:u.importanceScore,onChange:b("importanceScore")})]}),(0,t.jsxs)("div",{className:o().row,children:[(0,t.jsx)("label",{children:"Difficulty"}),(0,t.jsx)("input",{type:"number",min:0,max:10,value:u.difficultyScore,onChange:b("difficultyScore")})]}),(0,t.jsxs)("div",{className:o().actions,children:[(0,t.jsx)("button",{className:o().saveBtn,type:"submit",children:h?"Update":"Create"}),(0,t.jsx)("button",{className:o().cancelBtn,type:"button",onClick:()=>{m(c),_(null)},children:"Cancel"})]})]}),l?(0,t.jsx)("p",{className:o().loader,children:"Loading…"}):(0,t.jsxs)("table",{className:o().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Suggestion"}),(0,t.jsx)("th",{children:"Category"}),(0,t.jsx)("th",{children:"Lang"}),(0,t.jsx)("th",{children:"Imp"}),(0,t.jsx)("th",{children:"Diff"}),(0,t.jsx)("th",{children:"⋯"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.ruleId}),(0,t.jsx)("td",{children:e.type}),(0,t.jsx)("td",{children:e.suggestion}),(0,t.jsxs)("td",{children:[e.category.id,"/",e.category.name]}),(0,t.jsx)("td",{children:e.languageCode}),(0,t.jsx)("td",{children:e.importanceScore}),(0,t.jsx)("td",{children:e.difficultyScore}),(0,t.jsxs)("td",{className:o().actionsCell,children:[(0,t.jsx)("button",{className:o().editBtn,onClick:()=>{m(e),_(e.ruleId),C(!1)},children:"✎"}),(0,t.jsx)("button",{className:o().delBtn,onClick:()=>S(e.ruleId),children:"\uD83D\uDDD1"})]})]},e.ruleId))})]})]})}},81273:e=>{e.exports={container:"AdminCorrections_container__t4CzX",header:"AdminCorrections_header__rFe9D",topBar:"AdminCorrections_topBar__bkqMk",newBtn:"AdminCorrections_newBtn__Uh4Zn",jsonBtn:"AdminCorrections_jsonBtn__e3Zvb",form:"AdminCorrections_form__ARWzs",jsonCard:"AdminCorrections_jsonCard__B9fip",row:"AdminCorrections_row__0eoUy",actions:"AdminCorrections_actions__LLpU_",saveBtn:"AdminCorrections_saveBtn__JqNeW",cancelBtn:"AdminCorrections_cancelBtn__GwX_E",error:"AdminCorrections_error__Pf3NA",loader:"AdminCorrections_loader__JqXDI",table:"AdminCorrections_table__Av208",actionsCell:"AdminCorrections_actionsCell__zDFY0",editBtn:"AdminCorrections_editBtn__uJ3Z7",delBtn:"AdminCorrections_delBtn__KTKWD",jsonArea:"AdminCorrections_jsonArea__VEtof",jsonResp:"AdminCorrections_jsonResp__YTHra"}},85356:(e,n,r)=>{Promise.resolve().then(r.bind(r,62865))}},e=>{var n=n=>e(e.s=n);e.O(0,[8758,3464,8441,1684,7358],()=>n(85356)),_N_E=e.O()}]);