(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9699],{62865:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(95155),a=n(12115),s=n(23464),c=n(89760),l=n(81273),i=n.n(l);let o={ruleId:"",type:"grammar",pattern:"",suggestion:"",description:"",issueType:"",category:{id:"",name:""},languageCode:"",importanceScore:0,difficultyScore:0,originalSentence:"",correctedSentence:""};function d(){let{SERVER_URL:e}=(0,c.U)(),[t,n]=(0,a.useState)([]),[l,d]=(0,a.useState)(!0),[u,_]=(0,a.useState)(o),[h,p]=(0,a.useState)(null),[m,E]=(0,a.useState)(""),[C,g]=(0,a.useState)(!1),[A,N]=(0,a.useState)("[]"),[j,x]=(0,a.useState)(null),[f,v]=(0,a.useState)(""),[y,S]=(0,a.useState)(""),[I,D]=(0,a.useState)(""),T=async()=>{if(!f||!y){D("시작과 종료 ruleId를 모두 입력하세요.");return}if(confirm("".concat(f,"부터 ").concat(y,"까지 정말 삭제할까요?")))try{await s.A.delete("".concat(e,"/api/corrections/range"),{params:{start:f,end:y}}),D(""),v(""),S(""),B()}catch(e){var t,n;D((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||"삭제 실패")}},B=async()=>{d(!0);try{let t=await s.A.get("".concat(e,"/api/corrections"));n(t.data)}catch(e){console.error(e)}d(!1)};(0,a.useEffect)(()=>{B()},[]);let b=e=>t=>{let n=t.target.value;_(t=>({...t,[e]:"importanceScore"===e||"difficultyScore"===e?Number(n):n}))},R=async t=>{t.preventDefault();try{h?await s.A.put("".concat(e,"/api/corrections/").concat(h),u):await s.A.post("".concat(e,"/api/corrections"),u),_(o),p(null),E(""),B()}catch(e){var n,r;E((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"Save failed")}},O=async t=>{confirm("Delete?")&&(await s.A.delete("".concat(e,"/api/corrections/").concat(t)),B())},L=async()=>{x(null),E("");try{let t=JSON.parse(A),n=await s.A.post("".concat(e,"/api/corrections/bulk"),t);x(n.data),B()}catch(e){E(e.message)}};return(0,r.jsxs)("div",{className:i().container,children:[(0,r.jsx)("h1",{className:i().header,children:"Admin – Corrections"}),(0,r.jsxs)("div",{className:i().topBar,children:[(0,r.jsx)("button",{className:i().newBtn,onClick:()=>{g(!1),_(o),p(null),E("")},children:"+ New"}),(0,r.jsx)("button",{className:i().jsonBtn,onClick:()=>{g(!C),E("")},children:C?"← Back to form":"⇪ Bulk JSON"}),(0,r.jsxs)("div",{className:i().rangeDelete,children:[(0,r.jsx)("input",{className:i().rangeInput,placeholder:"Start ruleId",value:f,onChange:e=>v(e.target.value)}),(0,r.jsx)("input",{className:i().rangeInput,placeholder:"End ruleId",value:y,onChange:e=>S(e.target.value)}),(0,r.jsx)("button",{className:i().delBtn,onClick:T,children:"Delete Range"})]}),I&&(0,r.jsx)("div",{className:i().error,children:I})]}),C&&(0,r.jsxs)("div",{className:i().jsonCard,children:[(0,r.jsx)("textarea",{className:i().jsonArea,value:A,onChange:e=>N(e.target.value),placeholder:'[ { "ruleId": "...", "type": "grammar", ... }, ... ]'}),(0,r.jsx)("div",{className:i().actions,children:(0,r.jsx)("button",{className:i().saveBtn,onClick:L,children:"Upload JSON"})}),j&&(0,r.jsx)("pre",{className:i().jsonResp,children:JSON.stringify(j,null,2)}),m&&(0,r.jsx)("div",{className:i().error,children:m})]}),!C&&(0,r.jsxs)("form",{className:i().form,onSubmit:R,children:[m&&(0,r.jsx)("div",{className:i().error,children:m}),[{label:"Rule ID",key:"ruleId",disabled:!!h},{label:"Pattern",key:"pattern"},{label:"Suggestion",key:"suggestion"},{label:"Description",key:"description"},{label:"Issue Type",key:"issueType"},{label:"Category ID",key:"category.id"},{label:"Category Name",key:"category.name"},{label:"Language Code",key:"languageCode"},{label:"Original Sentence",key:"originalSentence"},{label:"Corrected Sentence",key:"correctedSentence"}].map(e=>{let{label:t,key:n,disabled:a}=e,[s,c]=n.split("."),l=c?u[s][c]:u[s];return(0,r.jsxs)("div",{className:i().row,children:[(0,r.jsx)("label",{children:t}),(0,r.jsx)("input",{value:l,disabled:a,onChange:e=>{c?_(t=>({...t,[s]:{...t[s],[c]:e.target.value}})):b(s)(e)},required:["ruleId","suggestion","description","category.id","category.name","languageCode","originalSentence","correctedSentence"].includes(n)})]},n)}),(0,r.jsxs)("div",{className:i().row,children:[(0,r.jsx)("label",{children:"Type"}),(0,r.jsxs)("select",{value:u.type,onChange:b("type"),children:[(0,r.jsx)("option",{value:"grammar",children:"Grammar"}),(0,r.jsx)("option",{value:"expression",children:"Expression"})]})]}),(0,r.jsxs)("div",{className:i().row,children:[(0,r.jsx)("label",{children:"Importance"}),(0,r.jsx)("input",{type:"number",min:0,max:10,value:u.importanceScore,onChange:b("importanceScore")})]}),(0,r.jsxs)("div",{className:i().row,children:[(0,r.jsx)("label",{children:"Difficulty"}),(0,r.jsx)("input",{type:"number",min:0,max:10,value:u.difficultyScore,onChange:b("difficultyScore")})]}),(0,r.jsxs)("div",{className:i().actions,children:[(0,r.jsx)("button",{className:i().saveBtn,type:"submit",children:h?"Update":"Create"}),(0,r.jsx)("button",{className:i().cancelBtn,type:"button",onClick:()=>{_(o),p(null)},children:"Cancel"})]})]}),l?(0,r.jsx)("p",{className:i().loader,children:"Loading…"}):(0,r.jsxs)("table",{className:i().table,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Type"}),(0,r.jsx)("th",{children:"Suggestion"}),(0,r.jsx)("th",{children:"Category"}),(0,r.jsx)("th",{children:"Lang"}),(0,r.jsx)("th",{children:"Imp"}),(0,r.jsx)("th",{children:"Diff"}),(0,r.jsx)("th",{children:"⋯"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.ruleId}),(0,r.jsx)("td",{children:e.type}),(0,r.jsx)("td",{children:e.suggestion}),(0,r.jsxs)("td",{children:[e.category.id,"/",e.category.name]}),(0,r.jsx)("td",{children:e.languageCode}),(0,r.jsx)("td",{children:e.importanceScore}),(0,r.jsx)("td",{children:e.difficultyScore}),(0,r.jsxs)("td",{className:i().actionsCell,children:[(0,r.jsx)("button",{className:i().editBtn,onClick:()=>{_(e),p(e.ruleId),g(!1)},children:"✎"}),(0,r.jsx)("button",{className:i().delBtn,onClick:()=>O(e.ruleId),children:"\uD83D\uDDD1"})]})]},e.ruleId))})]})]})}},81273:e=>{e.exports={container:"AdminCorrections_container__t4CzX",topBar:"AdminCorrections_topBar__bkqMk",rangeDelete:"AdminCorrections_rangeDelete__HHhgh",rangeInput:"AdminCorrections_rangeInput__PEEBg",header:"AdminCorrections_header__rFe9D",newBtn:"AdminCorrections_newBtn__Uh4Zn",jsonBtn:"AdminCorrections_jsonBtn__e3Zvb",form:"AdminCorrections_form__ARWzs",jsonCard:"AdminCorrections_jsonCard__B9fip",row:"AdminCorrections_row__0eoUy",actions:"AdminCorrections_actions__LLpU_",saveBtn:"AdminCorrections_saveBtn__JqNeW",cancelBtn:"AdminCorrections_cancelBtn__GwX_E",error:"AdminCorrections_error__Pf3NA",loader:"AdminCorrections_loader__JqXDI",table:"AdminCorrections_table__Av208",actionsCell:"AdminCorrections_actionsCell__zDFY0",editBtn:"AdminCorrections_editBtn__uJ3Z7",delBtn:"AdminCorrections_delBtn__KTKWD",jsonArea:"AdminCorrections_jsonArea__VEtof",jsonResp:"AdminCorrections_jsonResp__YTHra"}},85356:(e,t,n)=>{Promise.resolve().then(n.bind(n,62865))},89760:(e,t,n)=>{"use strict";n.d(t,{s:()=>_,U:()=>h});var r=n(95155),a=n(12115),s=n(49509);function c(e){switch(e.trim().toUpperCase()){case"BETA":return"https://beta.fcde.app";case"DEVELOPMENT":return"https://dev.fcde.app";case"CA":case"CANADA":return"https://ca.fcde.app";case"AU":case"AUSTRALIA":return"https://au.fcde.app";case"GB":case"UK":return"https://uk.fcde.app";case"KR":case"KOREA":return"https://kr.fcde.app";default:return"https://fcde.app"}}function l(){return"https://fcde.app"}async function i(e){try{return(await fetch("".concat(e,"/health"),{method:"GET"})).ok}catch(e){return!1}}async function o(){let e=null;try{let t=localStorage.getItem("selectedServer");t&&(e=t)}catch(e){}for(let t of(!e&&s.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER&&(e=s.env.NEXT_PUBLIC_FORCED_DEFAULT_SERVER),e||(e=function(){try{let e=localStorage.getItem("region");if(e)return e}catch(e){}if("undefined"!=typeof navigator&&navigator.language){let e=navigator.language.split("-");if(e.length>1)return e[1]}return"KR"}()),[e,"Beta","Development"])){let e=c(t);if(await i(e))return e}return c(e)}let d={SERVER_URL:l()||"https://www.fcde.app",APP_VERSION:s.env.NEXT_PUBLIC_APP_VERSION||"",FACEBOOK_INTERSTITIAL_PLACEMENT_ID:s.env.NEXT_PUBLIC_FACEBOOK_INTERSTITIAL_PLACEMENT_ID||"",FACEBOOK_BANNER_PLACEMENT_ID:s.env.NEXT_PUBLIC_FACEBOOK_BANNER_PLACEMENT_ID||"",FEATURE_UNDER_DEV:"true"===(s.env.NEXT_PUBLIC_FEATURE_UNDER_DEV||"true").toLowerCase(),TEST_AD_MODE:"true"===(s.env.NEXT_PUBLIC_TEST_AD_MODE||"false").toLowerCase()},u=(0,a.createContext)(null),_=e=>{let{children:t}=e,[n,s]=(0,a.useState)(l());(0,a.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await o();e&&s(t)}catch(e){}})(),()=>{e=!1}},[]);let c={SERVER_URL:n,APP_VERSION:d.APP_VERSION,FACEBOOK_INTERSTITIAL_PLACEMENT_ID:d.FACEBOOK_INTERSTITIAL_PLACEMENT_ID,FACEBOOK_BANNER_PLACEMENT_ID:d.FACEBOOK_BANNER_PLACEMENT_ID,FEATURE_UNDER_DEV:d.FEATURE_UNDER_DEV,TEST_AD_MODE:d.TEST_AD_MODE};return(0,r.jsx)(u.Provider,{value:c,children:t})},h=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useConfig must be used within a ConfigProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[8758,3464,8441,1684,7358],()=>t(85356)),_N_E=e.O()}]);